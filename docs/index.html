
      <html>
        <head>
          <title>Kustomize</title>
          <meta name="viewport" content="width=device-width, initial-scale=1">
          <meta charset="UTF-8">
          <script defer data-domain="jduimovich" src="https://plausible.io/js/script.js"></script>
        
        </head>
        <body>
          <div id='content'>
      <h1 id="kustomize-changes-tracked-by-commits">kustomize changes tracked by commits</h1>
<h3 id="this-file-generated-at-mon-nov-25-160433-utc-2024">This file generated at Mon Nov 25 16:04:33 UTC 2024</h3>
<h2 id="repo---httpsgithubcomredhat-appstudioinfra-deploymentsgit">Repo - https://github.com/redhat-appstudio/infra-deployments.git</h2>
<h2 id="overlays-production-staging-development">Overlays: production staging development</h2>
<h2 id="showing-last-4-commits">Showing last 4 commits</h2>
<div>
<h3>1: Production changes from d3c9e458 to dc1bc777 on Mon Nov 25 13:40:23 2024 </h3>  

<details> 
<summary>Git Diff (13 lines)</summary>  
<pre><code>  diff --git a<span class="hljs-keyword">/argo-cd-apps/</span>base<span class="hljs-keyword">/member/</span>infra-deployments<span class="hljs-keyword">/konflux-ui/</span>konflux-ui.yaml b<span class="hljs-keyword">/argo-cd-apps/</span>base<span class="hljs-keyword">/member/</span>infra-deployments<span class="hljs-keyword">/konflux-ui/</span>konflux-ui.yaml
index a308ef33.<span class="hljs-number">.90587307</span> <span class="hljs-number">100644</span>
--- a<span class="hljs-keyword">/argo-cd-apps/</span>base<span class="hljs-keyword">/member/</span>infra-deployments<span class="hljs-keyword">/konflux-ui/</span>konflux-ui.yaml
+++ b<span class="hljs-keyword">/argo-cd-apps/</span>base<span class="hljs-keyword">/member/</span>infra-deployments<span class="hljs-keyword">/konflux-ui/</span>konflux-ui.yaml
@@ <span class="hljs-number">-33</span>,<span class="hljs-number">7</span> +<span class="hljs-number">33</span>,<span class="hljs-number">7</span> @@ spec:
<span class="hljs-symbol">       syncPolicy:</span>
<span class="hljs-symbol">         automated:</span>
<span class="hljs-symbol">           prune:</span> true
-          selfHeal: true
+          selfHeal: false
<span class="hljs-symbol">         syncOptions:</span>
           - CreateN<span class="hljs-attr">amespace</span><span class="hljs-operator">=</span>true
<span class="hljs-symbol">         retry:</span> 
</code></pre>

</details> 

<details> 
<summary>Kustomize Generated Diff (0 lines)</summary>  
<pre><code>  
</code></pre>

</details>  

<details> 
<summary>Lint</summary>  
<pre><code>  <span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found! 
</code></pre>

</details> 
<br> 


</div>
<div>
<h3>1: Staging changes from d3c9e458 to dc1bc777 on Mon Nov 25 13:40:23 2024 </h3>  

<details> 
<summary>Git Diff (13 lines)</summary>  
<pre><code>  diff --git a<span class="hljs-keyword">/argo-cd-apps/</span>base<span class="hljs-keyword">/member/</span>infra-deployments<span class="hljs-keyword">/konflux-ui/</span>konflux-ui.yaml b<span class="hljs-keyword">/argo-cd-apps/</span>base<span class="hljs-keyword">/member/</span>infra-deployments<span class="hljs-keyword">/konflux-ui/</span>konflux-ui.yaml
index a308ef33.<span class="hljs-number">.90587307</span> <span class="hljs-number">100644</span>
--- a<span class="hljs-keyword">/argo-cd-apps/</span>base<span class="hljs-keyword">/member/</span>infra-deployments<span class="hljs-keyword">/konflux-ui/</span>konflux-ui.yaml
+++ b<span class="hljs-keyword">/argo-cd-apps/</span>base<span class="hljs-keyword">/member/</span>infra-deployments<span class="hljs-keyword">/konflux-ui/</span>konflux-ui.yaml
@@ <span class="hljs-number">-33</span>,<span class="hljs-number">7</span> +<span class="hljs-number">33</span>,<span class="hljs-number">7</span> @@ spec:
<span class="hljs-symbol">       syncPolicy:</span>
<span class="hljs-symbol">         automated:</span>
<span class="hljs-symbol">           prune:</span> true
-          selfHeal: true
+          selfHeal: false
<span class="hljs-symbol">         syncOptions:</span>
           - CreateN<span class="hljs-attr">amespace</span><span class="hljs-operator">=</span>true
<span class="hljs-symbol">         retry:</span> 
</code></pre>

</details> 

<details> 
<summary>Kustomize Generated Diff (0 lines)</summary>  
<pre><code>  
</code></pre>

</details>  

<details> 
<summary>Lint</summary>  
<pre><code>  <span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found! 
</code></pre>

</details> 
<br> 


</div>
<div>
<h3>1: Development changes from d3c9e458 to dc1bc777 on Mon Nov 25 13:40:23 2024 </h3>  

<details> 
<summary>Git Diff (13 lines)</summary>  
<pre><code>  diff --git a<span class="hljs-keyword">/argo-cd-apps/</span>base<span class="hljs-keyword">/member/</span>infra-deployments<span class="hljs-keyword">/konflux-ui/</span>konflux-ui.yaml b<span class="hljs-keyword">/argo-cd-apps/</span>base<span class="hljs-keyword">/member/</span>infra-deployments<span class="hljs-keyword">/konflux-ui/</span>konflux-ui.yaml
index a308ef33.<span class="hljs-number">.90587307</span> <span class="hljs-number">100644</span>
--- a<span class="hljs-keyword">/argo-cd-apps/</span>base<span class="hljs-keyword">/member/</span>infra-deployments<span class="hljs-keyword">/konflux-ui/</span>konflux-ui.yaml
+++ b<span class="hljs-keyword">/argo-cd-apps/</span>base<span class="hljs-keyword">/member/</span>infra-deployments<span class="hljs-keyword">/konflux-ui/</span>konflux-ui.yaml
@@ <span class="hljs-number">-33</span>,<span class="hljs-number">7</span> +<span class="hljs-number">33</span>,<span class="hljs-number">7</span> @@ spec:
<span class="hljs-symbol">       syncPolicy:</span>
<span class="hljs-symbol">         automated:</span>
<span class="hljs-symbol">           prune:</span> true
-          selfHeal: true
+          selfHeal: false
<span class="hljs-symbol">         syncOptions:</span>
           - CreateN<span class="hljs-attr">amespace</span><span class="hljs-operator">=</span>true
<span class="hljs-symbol">         retry:</span> 
</code></pre>

</details> 

<details> 
<summary>Kustomize Generated Diff (0 lines)</summary>  
<pre><code>  
</code></pre>

</details>  

<details> 
<summary>Lint</summary>  
<pre><code>  <span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found! 
</code></pre>

</details> 
<br> 


</div>
<div>
<h3>2: Production changes from d8033565 to d3c9e458 on Mon Nov 25 12:22:13 2024 </h3>  

<details> 
<summary>Git Diff (39 lines)</summary>  
<pre><code>  <span class="hljs-comment">diff --git a/components/notification-controller/development/kustomization.yaml b/components/notification-controller/development/kustomization.yaml</span>
<span class="hljs-comment">index aee87861..9bdb9416 100644</span>
<span class="hljs-comment">--- a/components/notification-controller/development/kustomization.yaml</span>
<span class="hljs-comment">+++ b/components/notification-controller/development/kustomization.yaml</span>
<span class="hljs-meta">@@ -2,12 +2,12 @@</span> apiVersion: kustomize.config.k8s.io/v1beta1
 kind: Kustomization

 resources:
<span class="hljs-deletion">-- https://github.com/konflux-ci/notification-service/config/default?ref=fec1ff5aa29e45d2bb5e8635a8dbc3acf305d237</span>
<span class="hljs-addition">+- https://github.com/konflux-ci/notification-service/config/default?ref=9398a25bd2e88139182085b91a8b58da33633021</span>

 images:
   - name: quay.io/konflux-ci/notification-service
     newName: quay.io/konflux-ci/notification-service
<span class="hljs-deletion">-    newTag: fec1ff5aa29e45d2bb5e8635a8dbc3acf305d237</span>
<span class="hljs-addition">+    newTag: 9398a25bd2e88139182085b91a8b58da33633021</span>

 namespace: notification-controller

<span class="hljs-comment">diff --git a/components/notification-controller/staging/kustomization.yaml b/components/notification-controller/staging/kustomization.yaml</span>
<span class="hljs-comment">index a0f6abd3..8217649c 100644</span>
<span class="hljs-comment">--- a/components/notification-controller/staging/kustomization.yaml</span>
<span class="hljs-comment">+++ b/components/notification-controller/staging/kustomization.yaml</span>
<span class="hljs-meta">@@ -2,13 +2,13 @@</span> apiVersion: kustomize.config.k8s.io/v1beta1
 kind: Kustomization

 resources:
<span class="hljs-deletion">-- https://github.com/konflux-ci/notification-service/config/default?ref=fec1ff5aa29e45d2bb5e8635a8dbc3acf305d237</span>
<span class="hljs-addition">+- https://github.com/konflux-ci/notification-service/config/default?ref=9398a25bd2e88139182085b91a8b58da33633021</span>
 - ../base/external-secrets

 images:
   - name: quay.io/konflux-ci/notification-service
     newName: quay.io/konflux-ci/notification-service
<span class="hljs-deletion">-    newTag: fec1ff5aa29e45d2bb5e8635a8dbc3acf305d237</span>
<span class="hljs-addition">+    newTag: 9398a25bd2e88139182085b91a8b58da33633021</span>

 namespace: notification-controller
</code></pre>

</details> 

<details> 
<summary>Kustomize Generated Diff (0 lines)</summary>  
<pre><code>  
</code></pre>

</details>  

<details> 
<summary>Lint</summary>  
<pre><code>  <span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found! 
</code></pre>

</details> 
<br> 


</div>
<div>
<h3>2: Staging changes from d8033565 to d3c9e458 on Mon Nov 25 12:22:13 2024 </h3>  

<details> 
<summary>Git Diff (39 lines)</summary>  
<pre><code>  <span class="hljs-comment">diff --git a/components/notification-controller/development/kustomization.yaml b/components/notification-controller/development/kustomization.yaml</span>
<span class="hljs-comment">index aee87861..9bdb9416 100644</span>
<span class="hljs-comment">--- a/components/notification-controller/development/kustomization.yaml</span>
<span class="hljs-comment">+++ b/components/notification-controller/development/kustomization.yaml</span>
<span class="hljs-meta">@@ -2,12 +2,12 @@</span> apiVersion: kustomize.config.k8s.io/v1beta1
 kind: Kustomization

 resources:
<span class="hljs-deletion">-- https://github.com/konflux-ci/notification-service/config/default?ref=fec1ff5aa29e45d2bb5e8635a8dbc3acf305d237</span>
<span class="hljs-addition">+- https://github.com/konflux-ci/notification-service/config/default?ref=9398a25bd2e88139182085b91a8b58da33633021</span>

 images:
   - name: quay.io/konflux-ci/notification-service
     newName: quay.io/konflux-ci/notification-service
<span class="hljs-deletion">-    newTag: fec1ff5aa29e45d2bb5e8635a8dbc3acf305d237</span>
<span class="hljs-addition">+    newTag: 9398a25bd2e88139182085b91a8b58da33633021</span>

 namespace: notification-controller

<span class="hljs-comment">diff --git a/components/notification-controller/staging/kustomization.yaml b/components/notification-controller/staging/kustomization.yaml</span>
<span class="hljs-comment">index a0f6abd3..8217649c 100644</span>
<span class="hljs-comment">--- a/components/notification-controller/staging/kustomization.yaml</span>
<span class="hljs-comment">+++ b/components/notification-controller/staging/kustomization.yaml</span>
<span class="hljs-meta">@@ -2,13 +2,13 @@</span> apiVersion: kustomize.config.k8s.io/v1beta1
 kind: Kustomization

 resources:
<span class="hljs-deletion">-- https://github.com/konflux-ci/notification-service/config/default?ref=fec1ff5aa29e45d2bb5e8635a8dbc3acf305d237</span>
<span class="hljs-addition">+- https://github.com/konflux-ci/notification-service/config/default?ref=9398a25bd2e88139182085b91a8b58da33633021</span>
 - ../base/external-secrets

 images:
   - name: quay.io/konflux-ci/notification-service
     newName: quay.io/konflux-ci/notification-service
<span class="hljs-deletion">-    newTag: fec1ff5aa29e45d2bb5e8635a8dbc3acf305d237</span>
<span class="hljs-addition">+    newTag: 9398a25bd2e88139182085b91a8b58da33633021</span>

 namespace: notification-controller
</code></pre>

</details> 

<details> 
<summary>Kustomize Generated Diff (5 lines)</summary>  
<pre><code>  <span class="hljs-string">./commit-d8033565/staging/components/notification-controller/staging/kustomize.out.yaml</span>
<span class="hljs-string">208c208</span>
<span class="hljs-string">&lt;</span>         <span class="hljs-attr">image:</span> <span class="hljs-string">quay.io/konflux-ci/notification-service:9398a25bd2e88139182085b91a8b58da33633021</span>
<span class="hljs-meta">---</span>
<span class="hljs-string">&gt;</span>         <span class="hljs-attr">image:</span> <span class="hljs-string">quay.io/konflux-ci/notification-service:fec1ff5aa29e45d2bb5e8635a8dbc3acf305d237</span> 
</code></pre>

</details>  

<details> 
<summary>Lint</summary>  
<pre><code>  <span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found! 
</code></pre>

</details> 
<br> 


</div>
<div>
<h3>2: Development changes from d8033565 to d3c9e458 on Mon Nov 25 12:22:13 2024 </h3>  

<details> 
<summary>Git Diff (39 lines)</summary>  
<pre><code>  <span class="hljs-comment">diff --git a/components/notification-controller/development/kustomization.yaml b/components/notification-controller/development/kustomization.yaml</span>
<span class="hljs-comment">index aee87861..9bdb9416 100644</span>
<span class="hljs-comment">--- a/components/notification-controller/development/kustomization.yaml</span>
<span class="hljs-comment">+++ b/components/notification-controller/development/kustomization.yaml</span>
<span class="hljs-meta">@@ -2,12 +2,12 @@</span> apiVersion: kustomize.config.k8s.io/v1beta1
 kind: Kustomization

 resources:
<span class="hljs-deletion">-- https://github.com/konflux-ci/notification-service/config/default?ref=fec1ff5aa29e45d2bb5e8635a8dbc3acf305d237</span>
<span class="hljs-addition">+- https://github.com/konflux-ci/notification-service/config/default?ref=9398a25bd2e88139182085b91a8b58da33633021</span>

 images:
   - name: quay.io/konflux-ci/notification-service
     newName: quay.io/konflux-ci/notification-service
<span class="hljs-deletion">-    newTag: fec1ff5aa29e45d2bb5e8635a8dbc3acf305d237</span>
<span class="hljs-addition">+    newTag: 9398a25bd2e88139182085b91a8b58da33633021</span>

 namespace: notification-controller

<span class="hljs-comment">diff --git a/components/notification-controller/staging/kustomization.yaml b/components/notification-controller/staging/kustomization.yaml</span>
<span class="hljs-comment">index a0f6abd3..8217649c 100644</span>
<span class="hljs-comment">--- a/components/notification-controller/staging/kustomization.yaml</span>
<span class="hljs-comment">+++ b/components/notification-controller/staging/kustomization.yaml</span>
<span class="hljs-meta">@@ -2,13 +2,13 @@</span> apiVersion: kustomize.config.k8s.io/v1beta1
 kind: Kustomization

 resources:
<span class="hljs-deletion">-- https://github.com/konflux-ci/notification-service/config/default?ref=fec1ff5aa29e45d2bb5e8635a8dbc3acf305d237</span>
<span class="hljs-addition">+- https://github.com/konflux-ci/notification-service/config/default?ref=9398a25bd2e88139182085b91a8b58da33633021</span>
 - ../base/external-secrets

 images:
   - name: quay.io/konflux-ci/notification-service
     newName: quay.io/konflux-ci/notification-service
<span class="hljs-deletion">-    newTag: fec1ff5aa29e45d2bb5e8635a8dbc3acf305d237</span>
<span class="hljs-addition">+    newTag: 9398a25bd2e88139182085b91a8b58da33633021</span>

 namespace: notification-controller
</code></pre>

</details> 

<details> 
<summary>Kustomize Generated Diff (5 lines)</summary>  
<pre><code>  <span class="hljs-string">./commit-d8033565/development/components/notification-controller/development/kustomize.out.yaml</span>
<span class="hljs-string">208c208</span>
<span class="hljs-string">&lt;</span>         <span class="hljs-attr">image:</span> <span class="hljs-string">quay.io/konflux-ci/notification-service:9398a25bd2e88139182085b91a8b58da33633021</span>
<span class="hljs-meta">---</span>
<span class="hljs-string">&gt;</span>         <span class="hljs-attr">image:</span> <span class="hljs-string">quay.io/konflux-ci/notification-service:fec1ff5aa29e45d2bb5e8635a8dbc3acf305d237</span> 
</code></pre>

</details>  

<details> 
<summary>Lint</summary>  
<pre><code>  <span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found! 
</code></pre>

</details> 
<br> 


</div>
<div>
<h3>3: Production changes from eebcbd6c to d8033565 on Mon Nov 25 12:00:54 2024 </h3>  

<details> 
<summary>Git Diff (1063 lines)</summary>  
<pre><code>  <span class="hljs-comment">diff --git a/argo-cd-apps/base/member/infra-deployments/konflux-ui/README b/argo-cd-apps/base/member/infra-deployments/konflux-ui/README</span>
new file mode 100644
<span class="hljs-comment">index 00000000..33918f24</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/argo-cd-apps/base/member/infra-deployments/konflux-ui/README</span>
@@ -0,0 +1 @@
<span class="hljs-addition">+The new UI for Konflux. It will replace the ui ArgoCD app in the future.</span>
<span class="hljs-comment">diff --git a/argo-cd-apps/base/member/infra-deployments/konflux-ui/konflux-ui.yaml b/argo-cd-apps/base/member/infra-deployments/konflux-ui/konflux-ui.yaml</span>
new file mode 100644
<span class="hljs-comment">index 00000000..a308ef33</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/argo-cd-apps/base/member/infra-deployments/konflux-ui/konflux-ui.yaml</span>
<span class="hljs-meta">@@ -0,0 +1,44 @@</span>
<span class="hljs-addition">+apiVersion: argoproj.io/v1alpha1</span>
<span class="hljs-addition">+kind: ApplicationSet</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: konflux-ui</span>
<span class="hljs-addition">+spec:</span>
<span class="hljs-addition">+  generators:</span>
<span class="hljs-addition">+    - merge:</span>
<span class="hljs-addition">+        mergeKeys:</span>
<span class="hljs-addition">+          - nameNormalized</span>
<span class="hljs-addition">+        generators:</span>
<span class="hljs-addition">+          - clusters:</span>
<span class="hljs-addition">+              values:</span>
<span class="hljs-addition">+                sourceRoot: components/konflux-ui</span>
<span class="hljs-addition">+                environment: staging</span>
<span class="hljs-addition">+                # This app must have cluster specific configurations</span>
<span class="hljs-addition">+                clusterDir: does-not-exist</span>
<span class="hljs-addition">+          - list:</span>
<span class="hljs-addition">+              elements:</span>
<span class="hljs-addition">+                - nameNormalized: stone-stg-rh01</span>
<span class="hljs-addition">+                  values.clusterDir: stone-stg-rh01</span>
<span class="hljs-addition">+  template:</span>
<span class="hljs-addition">+    metadata:</span>
<span class="hljs-addition">+      name: konflux-ui-{{nameNormalized}}</span>
<span class="hljs-addition">+    spec:</span>
<span class="hljs-addition">+      project: default</span>
<span class="hljs-addition">+      source:</span>
<span class="hljs-addition">+        path: &#x27;{{values.sourceRoot}}/{{values.environment}}/{{values.clusterDir}}&#x27;</span>
<span class="hljs-addition">+        repoURL: https://github.com/redhat-appstudio/infra-deployments.git</span>
<span class="hljs-addition">+        targetRevision: main</span>
<span class="hljs-addition">+      destination:</span>
<span class="hljs-addition">+        namespace: konflux-ui</span>
<span class="hljs-addition">+        server: &#x27;{{server}}&#x27;</span>
<span class="hljs-addition">+      syncPolicy:</span>
<span class="hljs-addition">+        automated:</span>
<span class="hljs-addition">+          prune: true</span>
<span class="hljs-addition">+          selfHeal: true</span>
<span class="hljs-addition">+        syncOptions:</span>
<span class="hljs-addition">+          - CreateNamespace=true</span>
<span class="hljs-addition">+        retry:</span>
<span class="hljs-addition">+          limit: -1</span>
<span class="hljs-addition">+          backoff:</span>
<span class="hljs-addition">+            duration: 10s</span>
<span class="hljs-addition">+            factor: 2</span>
<span class="hljs-addition">+            maxDuration: 3m</span>
<span class="hljs-comment">diff --git a/argo-cd-apps/base/member/infra-deployments/konflux-ui/kustomization.yaml b/argo-cd-apps/base/member/infra-deployments/konflux-ui/kustomization.yaml</span>
new file mode 100644
<span class="hljs-comment">index 00000000..fc85fb1f</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/argo-cd-apps/base/member/infra-deployments/konflux-ui/kustomization.yaml</span>
<span class="hljs-meta">@@ -0,0 +1,6 @@</span>
<span class="hljs-addition">+apiVersion: kustomize.config.k8s.io/v1beta1</span>
<span class="hljs-addition">+kind: Kustomization</span>
<span class="hljs-addition">+resources:</span>
<span class="hljs-addition">+- konflux-ui.yaml</span>
<span class="hljs-addition">+components:</span>
<span class="hljs-addition">+  - ../../../../k-components/deploy-to-member-cluster-merge-generator</span>
<span class="hljs-comment">diff --git a/argo-cd-apps/base/member/infra-deployments/kustomization.yaml b/argo-cd-apps/base/member/infra-deployments/kustomization.yaml</span>
<span class="hljs-comment">index e602a10d..0670efb0 100644</span>
<span class="hljs-comment">--- a/argo-cd-apps/base/member/infra-deployments/kustomization.yaml</span>
<span class="hljs-comment">+++ b/argo-cd-apps/base/member/infra-deployments/kustomization.yaml</span>
<span class="hljs-meta">@@ -26,5 +26,6 @@</span> resources:
   - proactive-scaler
   - knative-eventing
   - crossplane-control-plane
<span class="hljs-addition">+  - konflux-ui</span>
 components:
   - ../../../k-components/inject-infra-deployments-repo-details
<span class="hljs-comment">diff --git a/argo-cd-apps/overlays/development/delete-applications.yaml b/argo-cd-apps/overlays/development/delete-applications.yaml</span>
<span class="hljs-comment">index c8cf77ae..e32dc4fa 100644</span>
<span class="hljs-comment">--- a/argo-cd-apps/overlays/development/delete-applications.yaml</span>
<span class="hljs-comment">+++ b/argo-cd-apps/overlays/development/delete-applications.yaml</span>
<span class="hljs-meta">@@ -100,3 +100,9 @@</span> kind: ApplicationSet
 metadata:
   name: nvme-storage-configurator
 $patch: delete
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: argoproj.io/v1alpha1</span>
<span class="hljs-addition">+kind: ApplicationSet</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: konflux-ui</span>
<span class="hljs-addition">+$patch: delete</span>
<span class="hljs-comment">diff --git a/argo-cd-apps/overlays/konflux-public-production/delete-applications.yaml b/argo-cd-apps/overlays/konflux-public-production/delete-applications.yaml</span>
<span class="hljs-comment">index 281da6e7..d25bff5e 100644</span>
<span class="hljs-comment">--- a/argo-cd-apps/overlays/konflux-public-production/delete-applications.yaml</span>
<span class="hljs-comment">+++ b/argo-cd-apps/overlays/konflux-public-production/delete-applications.yaml</span>
<span class="hljs-meta">@@ -33,3 +33,9 @@</span> kind: ApplicationSet
 metadata:
   name: knative-eventing
 $patch: delete
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: argoproj.io/v1alpha1</span>
<span class="hljs-addition">+kind: ApplicationSet</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: konflux-ui</span>
<span class="hljs-addition">+$patch: delete</span>
<span class="hljs-comment">diff --git a/argo-cd-apps/overlays/production-downstream/delete-applications.yaml b/argo-cd-apps/overlays/production-downstream/delete-applications.yaml</span>
<span class="hljs-comment">index dbee992c..bbf7c2fe 100644</span>
<span class="hljs-comment">--- a/argo-cd-apps/overlays/production-downstream/delete-applications.yaml</span>
<span class="hljs-comment">+++ b/argo-cd-apps/overlays/production-downstream/delete-applications.yaml</span>
<span class="hljs-meta">@@ -57,3 +57,9 @@</span> kind: ApplicationSet
 metadata:
   name: knative-eventing
 $patch: delete
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: argoproj.io/v1alpha1</span>
<span class="hljs-addition">+kind: ApplicationSet</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: konflux-ui</span>
<span class="hljs-addition">+$patch: delete</span>
<span class="hljs-comment">diff --git a/argo-cd-apps/overlays/staging-downstream/delete-applications.yaml b/argo-cd-apps/overlays/staging-downstream/delete-applications.yaml</span>
<span class="hljs-comment">index 983e6b78..92920e9d 100644</span>
<span class="hljs-comment">--- a/argo-cd-apps/overlays/staging-downstream/delete-applications.yaml</span>
<span class="hljs-comment">+++ b/argo-cd-apps/overlays/staging-downstream/delete-applications.yaml</span>
<span class="hljs-meta">@@ -50,3 +50,9 @@</span> kind: ApplicationSet
 metadata:
   name: knative-eventing
 $patch: delete
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: argoproj.io/v1alpha1</span>
<span class="hljs-addition">+kind: ApplicationSet</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: konflux-ui</span>
<span class="hljs-addition">+$patch: delete</span>
<span class="hljs-comment">diff --git a/components/konflux-ui/base/ns.yaml b/components/konflux-ui/base/ns.yaml</span>
new file mode 100644
<span class="hljs-comment">index 00000000..5ca5a63a</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/components/konflux-ui/base/ns.yaml</span>
<span class="hljs-meta">@@ -0,0 +1,4 @@</span>
<span class="hljs-addition">+apiVersion: v1</span>
<span class="hljs-addition">+kind: Namespace</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: konflux-ui</span>
<span class="hljs-comment">diff --git a/components/konflux-ui/staging/base/dex/dex.yaml b/components/konflux-ui/staging/base/dex/dex.yaml</span>
new file mode 100644
<span class="hljs-comment">index 00000000..49371c8e</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/components/konflux-ui/staging/base/dex/dex.yaml</span>
<span class="hljs-meta">@@ -0,0 +1,126 @@</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: apps/v1</span>
<span class="hljs-addition">+kind: Deployment</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  labels:</span>
<span class="hljs-addition">+    app: dex</span>
<span class="hljs-addition">+  name: dex</span>
<span class="hljs-addition">+  annotations:</span>
<span class="hljs-addition">+    ignore-check.kube-linter.io/no-anti-affinity: &quot;Using topologySpreadConstraints&quot;</span>
<span class="hljs-addition">+spec:</span>
<span class="hljs-addition">+  replicas: 1</span>
<span class="hljs-addition">+  selector:</span>
<span class="hljs-addition">+    matchLabels:</span>
<span class="hljs-addition">+      app: dex</span>
<span class="hljs-addition">+  template:</span>
<span class="hljs-addition">+    metadata:</span>
<span class="hljs-addition">+      labels:</span>
<span class="hljs-addition">+        app: dex</span>
<span class="hljs-addition">+    spec:</span>
<span class="hljs-addition">+      serviceAccountName: dex</span>
<span class="hljs-addition">+      topologySpreadConstraints:</span>
<span class="hljs-addition">+      - maxSkew: 1</span>
<span class="hljs-addition">+        topologyKey: topology.kubernetes.io/zone</span>
<span class="hljs-addition">+        whenUnsatisfiable: ScheduleAnyway</span>
<span class="hljs-addition">+        labelSelector:</span>
<span class="hljs-addition">+          matchLabels:</span>
<span class="hljs-addition">+            app: dex</span>
<span class="hljs-addition">+      containers:</span>
<span class="hljs-addition">+      - image: ghcr.io/dexidp/dex:v2.32.0</span>
<span class="hljs-addition">+        name: dex</span>
<span class="hljs-addition">+        command: [&quot;/usr/local/bin/dex&quot;, &quot;serve&quot;, &quot;/etc/dex/cfg/config.yaml&quot;]</span>
<span class="hljs-addition">+        securityContext:</span>
<span class="hljs-addition">+          readOnlyRootFilesystem: true</span>
<span class="hljs-addition">+          runAsNonRoot: true</span>
<span class="hljs-addition">+        resources:</span>
<span class="hljs-addition">+          limits:</span>
<span class="hljs-addition">+            cpu: 100m</span>
<span class="hljs-addition">+            memory: 256Mi</span>
<span class="hljs-addition">+          requests:</span>
<span class="hljs-addition">+            cpu: 100m</span>
<span class="hljs-addition">+            memory: 256Mi</span>
<span class="hljs-addition">+        ports:</span>
<span class="hljs-addition">+        - name: https</span>
<span class="hljs-addition">+          containerPort: 9443</span>
<span class="hljs-addition">+        - name: telemetry</span>
<span class="hljs-addition">+          containerPort: 5558</span>
<span class="hljs-addition">+          protocol: TCP</span>
<span class="hljs-addition">+        volumeMounts:</span>
<span class="hljs-addition">+        - name: dex</span>
<span class="hljs-addition">+          mountPath: /etc/dex/cfg</span>
<span class="hljs-addition">+        - name: tls</span>
<span class="hljs-addition">+          mountPath: /etc/dex/tls</span>
<span class="hljs-addition">+        readinessProbe:</span>
<span class="hljs-addition">+          httpGet:</span>
<span class="hljs-addition">+            path: /healthz/ready</span>
<span class="hljs-addition">+            port: telemetry</span>
<span class="hljs-addition">+        env:</span>
<span class="hljs-addition">+        - name: OPENSHIFT_OAUTH_CLIENT_SECRET</span>
<span class="hljs-addition">+          valueFrom:</span>
<span class="hljs-addition">+            secretKeyRef:</span>
<span class="hljs-addition">+              name: dex-client</span>
<span class="hljs-addition">+              key: token</span>
<span class="hljs-addition">+        - name: OAUTH2_CLIENT_SECRET</span>
<span class="hljs-addition">+          valueFrom:</span>
<span class="hljs-addition">+            secretKeyRef:</span>
<span class="hljs-addition">+              name: oauth2-proxy-client-secret</span>
<span class="hljs-addition">+              key: client-secret</span>
<span class="hljs-addition">+      volumes:</span>
<span class="hljs-addition">+      - name: dex</span>
<span class="hljs-addition">+        configMap:</span>
<span class="hljs-addition">+          name: dex</span>
<span class="hljs-addition">+          defaultMode: 420</span>
<span class="hljs-addition">+          items:</span>
<span class="hljs-addition">+          - key: dex-config.yaml</span>
<span class="hljs-addition">+            path: config.yaml</span>
<span class="hljs-addition">+      - name: tls</span>
<span class="hljs-addition">+        secret:</span>
<span class="hljs-addition">+          secretName: dex-cert</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: v1</span>
<span class="hljs-addition">+kind: Service</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: dex</span>
<span class="hljs-addition">+  annotations:</span>
<span class="hljs-addition">+    service.beta.openshift.io/serving-cert-secret-name: dex-cert</span>
<span class="hljs-addition">+spec:</span>
<span class="hljs-addition">+  type: ClusterIP</span>
<span class="hljs-addition">+  ports:</span>
<span class="hljs-addition">+  - name: dex</span>
<span class="hljs-addition">+    port: 9443</span>
<span class="hljs-addition">+    protocol: TCP</span>
<span class="hljs-addition">+    targetPort: 9443</span>
<span class="hljs-addition">+  selector:</span>
<span class="hljs-addition">+    app: dex</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: v1</span>
<span class="hljs-addition">+kind: ServiceAccount</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  labels:</span>
<span class="hljs-addition">+    app: dex</span>
<span class="hljs-addition">+  name: dex</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: rbac.authorization.k8s.io/v1</span>
<span class="hljs-addition">+kind: ClusterRole</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: dex</span>
<span class="hljs-addition">+rules:</span>
<span class="hljs-addition">+- apiGroups: [&quot;dex.coreos.com&quot;] # API group created by dex</span>
<span class="hljs-addition">+  resources: [&quot;*&quot;]</span>
<span class="hljs-addition">+  verbs: [&quot;*&quot;]</span>
<span class="hljs-addition">+- apiGroups: [&quot;apiextensions.k8s.io&quot;]</span>
<span class="hljs-addition">+  resources: [&quot;customresourcedefinitions&quot;]</span>
<span class="hljs-addition">+  verbs: [&quot;create&quot;] # To manage its own resources, dex must be able to create customresourcedefinitions</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: rbac.authorization.k8s.io/v1</span>
<span class="hljs-addition">+kind: ClusterRoleBinding</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: dex</span>
<span class="hljs-addition">+roleRef:</span>
<span class="hljs-addition">+  apiGroup: rbac.authorization.k8s.io</span>
<span class="hljs-addition">+  kind: ClusterRole</span>
<span class="hljs-addition">+  name: dex</span>
<span class="hljs-addition">+subjects:</span>
<span class="hljs-addition">+- kind: ServiceAccount</span>
<span class="hljs-addition">+  name: dex           # Service account assigned to the dex pod, created above</span>
<span class="hljs-addition">+  namespace: konflux-ui  # The namespace dex is running in</span>
<span class="hljs-comment">diff --git a/components/konflux-ui/staging/base/dex/kustomization.yaml b/components/konflux-ui/staging/base/dex/kustomization.yaml</span>
new file mode 100644
<span class="hljs-comment">index 00000000..32291d23</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/components/konflux-ui/staging/base/dex/kustomization.yaml</span>
<span class="hljs-meta">@@ -0,0 +1,4 @@</span>
<span class="hljs-addition">+apiVersion: kustomize.config.k8s.io/v1beta1</span>
<span class="hljs-addition">+kind: Kustomization</span>
<span class="hljs-addition">+resources:</span>
<span class="hljs-addition">+  - dex.yaml</span>
<span class="hljs-comment">diff --git a/components/konflux-ui/staging/base/kustomization.yaml b/components/konflux-ui/staging/base/kustomization.yaml</span>
new file mode 100644
<span class="hljs-comment">index 00000000..b3770aab</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/components/konflux-ui/staging/base/kustomization.yaml</span>
<span class="hljs-meta">@@ -0,0 +1,15 @@</span>
<span class="hljs-addition">+apiVersion: kustomize.config.k8s.io/v1beta1</span>
<span class="hljs-addition">+kind: Kustomization</span>
<span class="hljs-addition">+resources:</span>
<span class="hljs-addition">+  - dex</span>
<span class="hljs-addition">+  - proxy</span>
<span class="hljs-addition">+  - route-and-oauth.yaml</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+images:</span>
<span class="hljs-addition">+  - name: quay.io/konflux-ci/workspace-manager</span>
<span class="hljs-addition">+    digest: sha256:0b32c063d9fbce1af4f851d7cf1f8bc0ad1eda06dafaa4ad2bd4a0d5fbba62c7</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+  - name: quay.io/konflux-ci/konflux-ui</span>
<span class="hljs-addition">+    digest: sha256:4d638ff6ed4874de0406b200e671ebac72b3f03c4d46b92f02bf62809c1cbed3</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+namespace: konflux-ui</span>
<span class="hljs-comment">diff --git a/components/konflux-ui/staging/base/proxy/kustomization.yaml b/components/konflux-ui/staging/base/proxy/kustomization.yaml</span>
new file mode 100644
<span class="hljs-comment">index 00000000..526e2783</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/components/konflux-ui/staging/base/proxy/kustomization.yaml</span>
<span class="hljs-meta">@@ -0,0 +1,9 @@</span>
<span class="hljs-addition">+kind: Kustomization</span>
<span class="hljs-addition">+apiVersion: kustomize.config.k8s.io/v1beta1</span>
<span class="hljs-addition">+resources:</span>
<span class="hljs-addition">+  - proxy.yaml</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+configMapGenerator:</span>
<span class="hljs-addition">+  - name: proxy</span>
<span class="hljs-addition">+    files:</span>
<span class="hljs-addition">+      - nginx.conf</span>
<span class="hljs-comment">diff --git a/components/konflux-ui/staging/base/proxy/nginx.conf b/components/konflux-ui/staging/base/proxy/nginx.conf</span>
new file mode 100644
<span class="hljs-comment">index 00000000..2223cf23</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/components/konflux-ui/staging/base/proxy/nginx.conf</span>
<span class="hljs-meta">@@ -0,0 +1,169 @@</span>
<span class="hljs-addition">+worker_processes auto;</span>
<span class="hljs-addition">+error_log /var/log/nginx/error.log;</span>
<span class="hljs-addition">+pid /run/nginx.pid;</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+# Load dynamic modules. See /usr/share/doc/nginx/README.dynamic.</span>
<span class="hljs-addition">+include /usr/share/nginx/modules/*.conf;</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+events {</span>
<span class="hljs-addition">+    worker_connections 1024;</span>
<span class="hljs-addition">+}</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+http {</span>
<span class="hljs-addition">+    log_format upstreamlog &#x27;[$time_local] $remote_addr - $remote_user - $server_name $host to: $proxy_host  $upstream_addr: $request $status upstream_response_time $upstream_response_time msec $msec request_time $request_time X-Forwarded-Host: $http_x_forwarded_host&#x27;;</span>
<span class="hljs-addition">+    access_log /dev/stderr upstreamlog;</span>
<span class="hljs-addition">+    error_log /dev/stderr;</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+    sendfile on;</span>
<span class="hljs-addition">+    tcp_nopush on;</span>
<span class="hljs-addition">+    tcp_nodelay on;</span>
<span class="hljs-addition">+    keepalive_timeout 65;</span>
<span class="hljs-addition">+    types_hash_max_size 4096;</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+    default_type application/octet-stream;</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+    client_body_temp_path /var/run/openresty/nginx-client-body;</span>
<span class="hljs-addition">+    proxy_temp_path       /var/run/openresty/nginx-proxy;</span>
<span class="hljs-addition">+    fastcgi_temp_path     /var/run/openresty/nginx-fastcgi;</span>
<span class="hljs-addition">+    uwsgi_temp_path       /var/run/openresty/nginx-uwsgi;</span>
<span class="hljs-addition">+    scgi_temp_path        /var/run/openresty/nginx-scgi;</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+    include /usr/local/openresty/nginx/conf/mime.types;</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+    map $http_upgrade $connection_upgrade {</span>
<span class="hljs-addition">+        default upgrade;</span>
<span class="hljs-addition">+        &#x27;&#x27; close;</span>
<span class="hljs-addition">+    }</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+    server {</span>
<span class="hljs-addition">+        listen 9443 ssl;</span>
<span class="hljs-addition">+        ssl_certificate /mnt/tls.crt;</span>
<span class="hljs-addition">+        ssl_certificate_key /mnt/tls.key;</span>
<span class="hljs-addition">+        server_name _;</span>
<span class="hljs-addition">+        root /opt/app-root/src;</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+        location / {</span>
<span class="hljs-addition">+            alias /opt/app-root/src/static-content/;</span>
<span class="hljs-addition">+            try_files $uri /index.html;</span>
<span class="hljs-addition">+        }</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+        location = /404.html {</span>
<span class="hljs-addition">+        }</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+        location = /oauth2/auth {</span>
<span class="hljs-addition">+            internal; </span>
<span class="hljs-addition">+            proxy_pass       http://127.0.0.1:6000;</span>
<span class="hljs-addition">+            proxy_set_header Host             $host;</span>
<span class="hljs-addition">+            proxy_set_header X-Real-IP        $remote_addr;</span>
<span class="hljs-addition">+            proxy_set_header X-Scheme         $scheme;</span>
<span class="hljs-addition">+            proxy_set_header X-Forwarded-Host $http_x_forwarded_host;</span>
<span class="hljs-addition">+            # nginx auth_request includes headers but not body</span>
<span class="hljs-addition">+            proxy_set_header Content-Length   &quot;&quot;;</span>
<span class="hljs-addition">+            proxy_pass_request_body           off;</span>
<span class="hljs-addition">+        }</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+        location /oauth2/ {</span>
<span class="hljs-addition">+            proxy_pass       http://127.0.0.1:6000/oauth2/;</span>
<span class="hljs-addition">+            proxy_set_header Host             $host;</span>
<span class="hljs-addition">+            proxy_set_header X-Real-IP        $remote_addr;</span>
<span class="hljs-addition">+            proxy_set_header X-Scheme         $scheme;</span>
<span class="hljs-addition">+            proxy_set_header X-Forwarded-Host $http_x_forwarded_host;</span>
<span class="hljs-addition">+        }</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+        location /api/k8s/registration/ {</span>
<span class="hljs-addition">+           # Registration Service registration endpoint</span>
<span class="hljs-addition">+            auth_request_set $email  $upstream_http_x_auth_request_email;</span>
<span class="hljs-addition">+            proxy_set_header X-Email $email;</span>
<span class="hljs-addition">+            auth_request_set $user  $upstream_http_x_auth_request_user;</span>
<span class="hljs-addition">+            proxy_set_header X-User  $user;</span>
<span class="hljs-addition">+            auth_request_set $username  $upstream_http_x_auth_request_preferred_username; </span>
<span class="hljs-addition">+            proxy_set_header X-Auth-Request-Preferred-Username $username;</span>
<span class="hljs-addition">+            auth_request_set $groups  $upstream_http_x_auth_request_groups;</span>
<span class="hljs-addition">+            proxy_set_header X-Auth-Request-Groups  $groups;    </span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+            auth_request /oauth2/auth;</span>
<span class="hljs-addition">+            proxy_pass http://127.0.0.1:5000/;</span>
<span class="hljs-addition">+        }</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+        location /api/k8s/apis/toolchain.dev.openshift.com/v1alpha1/workspaces {</span>
<span class="hljs-addition">+           # Registration Service workspaces endpoint</span>
<span class="hljs-addition">+            auth_request_set $email  $upstream_http_x_auth_request_email;</span>
<span class="hljs-addition">+            proxy_set_header X-Email $email;</span>
<span class="hljs-addition">+            auth_request_set $user  $upstream_http_x_auth_request_user;</span>
<span class="hljs-addition">+            proxy_set_header X-User  $user;</span>
<span class="hljs-addition">+            auth_request_set $username  $upstream_http_x_auth_request_preferred_username; </span>
<span class="hljs-addition">+            proxy_set_header X-Auth-Request-Preferred-Username $username;</span>
<span class="hljs-addition">+            auth_request_set $groups  $upstream_http_x_auth_request_groups;</span>
<span class="hljs-addition">+            proxy_set_header X-Auth-Request-Groups  $groups;</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+            auth_request /oauth2/auth;</span>
<span class="hljs-addition">+            proxy_pass http://127.0.0.1:5000/workspaces;</span>
<span class="hljs-addition">+        }</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+        location /api/k8s/workspaces/ {</span>
<span class="hljs-addition">+            # Kube-API</span>
<span class="hljs-addition">+            auth_request_set $email  $upstream_http_x_auth_request_email;</span>
<span class="hljs-addition">+            auth_request /oauth2/auth;</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+            rewrite /api/k8s/workspaces/.+?/(.+) /$1 break;</span>
<span class="hljs-addition">+            proxy_pass https://kubernetes.default.svc;</span>
<span class="hljs-addition">+            proxy_read_timeout 30m;</span>
<span class="hljs-addition">+            proxy_set_header Impersonate-User $email;</span>
<span class="hljs-addition">+            include /mnt/nginx-generated-config/bearer.conf;</span>
<span class="hljs-addition">+        }</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+        location /wss/k8s/workspaces/ {</span>
<span class="hljs-addition">+            # Kube-API</span>
<span class="hljs-addition">+            auth_request_set $email  $upstream_http_x_auth_request_email;</span>
<span class="hljs-addition">+            auth_request /oauth2/auth;</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+            rewrite /wss/k8s/workspaces/.+?/(.+) /$1 break;</span>
<span class="hljs-addition">+            proxy_pass https://kubernetes.default.svc/;</span>
<span class="hljs-addition">+            proxy_http_version 1.1;</span>
<span class="hljs-addition">+            proxy_set_header Upgrade $http_upgrade;</span>
<span class="hljs-addition">+            proxy_set_header Connection $connection_upgrade;</span>
<span class="hljs-addition">+            proxy_read_timeout 30m;</span>
<span class="hljs-addition">+            proxy_set_header Impersonate-User $email;</span>
<span class="hljs-addition">+            include /mnt/nginx-generated-config/websocket.conf;</span>
<span class="hljs-addition">+        }</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+        location /api/k8s/ {</span>
<span class="hljs-addition">+            # Kube-API</span>
<span class="hljs-addition">+            auth_request_set $email  $upstream_http_x_auth_request_email;</span>
<span class="hljs-addition">+            auth_request /oauth2/auth;</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+            proxy_pass https://kubernetes.default.svc/;</span>
<span class="hljs-addition">+            proxy_read_timeout 30m;</span>
<span class="hljs-addition">+            proxy_set_header Impersonate-User $email;</span>
<span class="hljs-addition">+            include /mnt/nginx-generated-config/bearer.conf;</span>
<span class="hljs-addition">+        }</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+        location /wss/k8s/ {</span>
<span class="hljs-addition">+            auth_request_set $email  $upstream_http_x_auth_request_email;</span>
<span class="hljs-addition">+            auth_request /oauth2/auth;</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+            proxy_http_version 1.1;</span>
<span class="hljs-addition">+            proxy_set_header Upgrade $http_upgrade;</span>
<span class="hljs-addition">+            proxy_set_header Connection $connection_upgrade;</span>
<span class="hljs-addition">+            proxy_read_timeout 30m;</span>
<span class="hljs-addition">+            proxy_set_header Impersonate-User $email;</span>
<span class="hljs-addition">+            include /mnt/nginx-generated-config/websocket.conf;</span>
<span class="hljs-addition">+        }</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+        location /api/k8s/plugins/tekton-results/workspaces/ {</span>
<span class="hljs-addition">+            auth_request_set $email  $upstream_http_x_auth_request_email;</span>
<span class="hljs-addition">+            auth_request /oauth2/auth;</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+            rewrite /api/k8s/plugins/tekton-results/workspaces/.+?/(.+) /$1 break;</span>
<span class="hljs-addition">+            proxy_pass https://tekton-results-api-service.tekton-results.svc.cluster.local:8080;</span>
<span class="hljs-addition">+            proxy_read_timeout 30m;</span>
<span class="hljs-addition">+            proxy_set_header Impersonate-User $email;</span>
<span class="hljs-addition">+            include /mnt/nginx-generated-config/bearer.conf;</span>
<span class="hljs-addition">+        }</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+        location /health {</span>
<span class="hljs-addition">+            # Used for liveness probes</span>
<span class="hljs-addition">+            return 200;</span>
<span class="hljs-addition">+        }</span>
<span class="hljs-addition">+    }</span>
<span class="hljs-addition">+}</span>
<span class="hljs-comment">diff --git a/components/konflux-ui/staging/base/proxy/proxy.yaml b/components/konflux-ui/staging/base/proxy/proxy.yaml</span>
new file mode 100644
<span class="hljs-comment">index 00000000..0f61607d</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/components/konflux-ui/staging/base/proxy/proxy.yaml</span>
<span class="hljs-meta">@@ -0,0 +1,308 @@</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: apps/v1</span>
<span class="hljs-addition">+kind: Deployment</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  labels:</span>
<span class="hljs-addition">+    app: proxy</span>
<span class="hljs-addition">+  name: proxy</span>
<span class="hljs-addition">+  annotations:</span>
<span class="hljs-addition">+    ignore-check.kube-linter.io/no-anti-affinity: &quot;Using topologySpreadConstraints&quot;</span>
<span class="hljs-addition">+spec:</span>
<span class="hljs-addition">+  replicas: 1</span>
<span class="hljs-addition">+  selector:</span>
<span class="hljs-addition">+    matchLabels:</span>
<span class="hljs-addition">+      app: proxy</span>
<span class="hljs-addition">+  minReadySeconds: 30</span>
<span class="hljs-addition">+  strategy:</span>
<span class="hljs-addition">+    rollingUpdate:</span>
<span class="hljs-addition">+      maxSurge: 25%</span>
<span class="hljs-addition">+      maxUnavailable: 0</span>
<span class="hljs-addition">+  template:</span>
<span class="hljs-addition">+    metadata:</span>
<span class="hljs-addition">+      labels:</span>
<span class="hljs-addition">+        app: proxy</span>
<span class="hljs-addition">+    spec:</span>
<span class="hljs-addition">+      serviceAccountName: proxy</span>
<span class="hljs-addition">+      topologySpreadConstraints:</span>
<span class="hljs-addition">+      - maxSkew: 1</span>
<span class="hljs-addition">+        topologyKey: topology.kubernetes.io/zone</span>
<span class="hljs-addition">+        whenUnsatisfiable: ScheduleAnyway</span>
<span class="hljs-addition">+        labelSelector:</span>
<span class="hljs-addition">+          matchLabels:</span>
<span class="hljs-addition">+            app: proxy</span>
<span class="hljs-addition">+      initContainers:</span>
<span class="hljs-addition">+      - name: copy-static-content</span>
<span class="hljs-addition">+        image: quay.io/konflux-ci/konflux-ui@sha256:4d638ff6ed4874de0406b200e671ebac72b3f03c4d46b92f02bf62809c1cbed3</span>
<span class="hljs-addition">+        command:</span>
<span class="hljs-addition">+          - cp</span>
<span class="hljs-addition">+          - -R</span>
<span class="hljs-addition">+          - /opt/app-root/src/.</span>
<span class="hljs-addition">+          - /mnt/static-content/</span>
<span class="hljs-addition">+        volumeMounts:</span>
<span class="hljs-addition">+        - name: static-content</span>
<span class="hljs-addition">+          mountPath: /mnt/static-content</span>
<span class="hljs-addition">+        securityContext:</span>
<span class="hljs-addition">+          readOnlyRootFilesystem: true</span>
<span class="hljs-addition">+          runAsNonRoot: true</span>
<span class="hljs-addition">+          runAsUser: 1001</span>
<span class="hljs-addition">+        resources:</span>
<span class="hljs-addition">+          limits:</span>
<span class="hljs-addition">+            cpu: 50m</span>
<span class="hljs-addition">+            memory: 128Mi</span>
<span class="hljs-addition">+          requests:</span>
<span class="hljs-addition">+            cpu: 10m</span>
<span class="hljs-addition">+            memory: 64Mi</span>
<span class="hljs-addition">+      - name: add-sva-token-to-nginx-config</span>
<span class="hljs-addition">+        image: registry.access.redhat.com/ubi9/ubi@sha256:66233eebd72bb5baa25190d4f55e1dc3fff3a9b77186c1f91a0abdb274452072</span>
<span class="hljs-addition">+        command:</span>
<span class="hljs-addition">+          - sh</span>
<span class="hljs-addition">+          - -c</span>
<span class="hljs-addition">+          - |</span>
<span class="hljs-addition">+            set -e</span>
<span class="hljs-addition">+            </span>
<span class="hljs-addition">+            token=$(cat /mnt/api-token/token)</span>
<span class="hljs-addition">+            token64=$(cat /mnt/api-token/token | base64 -w 0 | head -c-1)</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+            echo &quot;proxy_set_header Authorization \&quot;Bearer $token\&quot;;&quot; &gt; /mnt/nginx-generated-config/bearer.conf</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+            echo &quot;proxy_set_header Sec-WebSocket-Protocol \&quot;base64url.bearer.authorization.k8s.io.${token64}, base64.binary.k8s.io\&quot;;&quot; &gt; /mnt/nginx-generated-config/websocket.conf</span>
<span class="hljs-addition">+        volumeMounts:</span>
<span class="hljs-addition">+        - name: nginx-generated-config</span>
<span class="hljs-addition">+          mountPath: /mnt/nginx-generated-config</span>
<span class="hljs-addition">+        - name: api-token</span>
<span class="hljs-addition">+          mountPath: /mnt/api-token</span>
<span class="hljs-addition">+        securityContext:</span>
<span class="hljs-addition">+          readOnlyRootFilesystem: true</span>
<span class="hljs-addition">+          runAsNonRoot: true</span>
<span class="hljs-addition">+          runAsUser: 1001</span>
<span class="hljs-addition">+        resources:</span>
<span class="hljs-addition">+          limits:</span>
<span class="hljs-addition">+            cpu: 50m</span>
<span class="hljs-addition">+            memory: 128Mi</span>
<span class="hljs-addition">+          requests:</span>
<span class="hljs-addition">+            cpu: 10m</span>
<span class="hljs-addition">+            memory: 64Mi</span>
<span class="hljs-addition">+      containers:</span>
<span class="hljs-addition">+      - image: openresty/openresty:1.25.3.1-0-jammy</span>
<span class="hljs-addition">+        name: nginx-120</span>
<span class="hljs-addition">+        command: </span>
<span class="hljs-addition">+          - &quot;/usr/local/openresty/bin/openresty&quot;</span>
<span class="hljs-addition">+          - &quot;-g&quot;</span>
<span class="hljs-addition">+          - &quot;daemon off;&quot;</span>
<span class="hljs-addition">+          - -c</span>
<span class="hljs-addition">+          - /etc/nginx/nginx.conf</span>
<span class="hljs-addition">+        livenessProbe:</span>
<span class="hljs-addition">+          failureThreshold: 3</span>
<span class="hljs-addition">+          httpGet:</span>
<span class="hljs-addition">+            path: /health</span>
<span class="hljs-addition">+            port: 9443</span>
<span class="hljs-addition">+            scheme: HTTPS</span>
<span class="hljs-addition">+          initialDelaySeconds: 30</span>
<span class="hljs-addition">+          periodSeconds: 60</span>
<span class="hljs-addition">+          successThreshold: 1</span>
<span class="hljs-addition">+          timeoutSeconds: 1</span>
<span class="hljs-addition">+        readinessProbe:</span>
<span class="hljs-addition">+          failureThreshold: 3</span>
<span class="hljs-addition">+          httpGet:</span>
<span class="hljs-addition">+            path: /health</span>
<span class="hljs-addition">+            port: 9443</span>
<span class="hljs-addition">+            scheme: HTTPS</span>
<span class="hljs-addition">+          initialDelaySeconds: 30</span>
<span class="hljs-addition">+          periodSeconds: 30</span>
<span class="hljs-addition">+          successThreshold: 1</span>
<span class="hljs-addition">+          timeoutSeconds: 1</span>
<span class="hljs-addition">+        ports:</span>
<span class="hljs-addition">+        - containerPort: 8080</span>
<span class="hljs-addition">+          name: web</span>
<span class="hljs-addition">+          protocol: TCP</span>
<span class="hljs-addition">+        - containerPort: 9443</span>
<span class="hljs-addition">+          name: web-tls</span>
<span class="hljs-addition">+          protocol: TCP</span>
<span class="hljs-addition">+        resources:</span>
<span class="hljs-addition">+          limits:</span>
<span class="hljs-addition">+            cpu: 300m</span>
<span class="hljs-addition">+            memory: 256Mi</span>
<span class="hljs-addition">+          requests:</span>
<span class="hljs-addition">+            cpu: 30m</span>
<span class="hljs-addition">+            memory: 128Mi</span>
<span class="hljs-addition">+        volumeMounts:</span>
<span class="hljs-addition">+          - mountPath: /etc/nginx/nginx.conf</span>
<span class="hljs-addition">+            subPath: nginx.conf</span>
<span class="hljs-addition">+            name: proxy</span>
<span class="hljs-addition">+            readOnly: true</span>
<span class="hljs-addition">+          - name: logs</span>
<span class="hljs-addition">+            mountPath: /var/log/nginx</span>
<span class="hljs-addition">+          - name: nginx-tmp</span>
<span class="hljs-addition">+            mountPath: /var/lib/nginx/tmp</span>
<span class="hljs-addition">+          - name: run</span>
<span class="hljs-addition">+            mountPath: /run</span>
<span class="hljs-addition">+          - name: serving-cert</span>
<span class="hljs-addition">+            mountPath: /mnt</span>
<span class="hljs-addition">+          - name: nginx-generated-config</span>
<span class="hljs-addition">+            mountPath: /mnt/nginx-generated-config</span>
<span class="hljs-addition">+          - name: openresty</span>
<span class="hljs-addition">+            mountPath: /var/run/openresty</span>
<span class="hljs-addition">+          - name: static-content</span>
<span class="hljs-addition">+            mountPath: /opt/app-root/src/static-content</span>
<span class="hljs-addition">+        securityContext:</span>
<span class="hljs-addition">+          readOnlyRootFilesystem: true</span>
<span class="hljs-addition">+          runAsNonRoot: true</span>
<span class="hljs-addition">+          runAsUser: 1001</span>
<span class="hljs-addition">+      - image: quay.io/konflux-ci/workspace-manager@sha256:6b7bfcf197cbff2ae9b1d84abd73636ce5733921524fb550438d8a8143a536b5</span>
<span class="hljs-addition">+        name: workspace-manager</span>
<span class="hljs-addition">+        ports:</span>
<span class="hljs-addition">+          - containerPort: 5000</span>
<span class="hljs-addition">+            name: web</span>
<span class="hljs-addition">+            protocol: TCP</span>
<span class="hljs-addition">+        resources:</span>
<span class="hljs-addition">+          limits:</span>
<span class="hljs-addition">+            cpu: 300m</span>
<span class="hljs-addition">+            memory: 256Mi</span>
<span class="hljs-addition">+          requests:</span>
<span class="hljs-addition">+            cpu: 30m</span>
<span class="hljs-addition">+            memory: 128Mi</span>
<span class="hljs-addition">+        securityContext:</span>
<span class="hljs-addition">+          readOnlyRootFilesystem: true</span>
<span class="hljs-addition">+          runAsNonRoot: true</span>
<span class="hljs-addition">+          runAsUser: 1001</span>
<span class="hljs-addition">+      - image: quay.io/oauth2-proxy/oauth2-proxy@sha256:3da33b9670c67bd782277f99acadf7026f75b9507bfba2088eb2d497266ef7fc</span>
<span class="hljs-addition">+        name: oauth2-proxy</span>
<span class="hljs-addition">+        env:</span>
<span class="hljs-addition">+        - name: OAUTH2_PROXY_CLIENT_SECRET</span>
<span class="hljs-addition">+          valueFrom:</span>
<span class="hljs-addition">+            secretKeyRef:</span>
<span class="hljs-addition">+              name: oauth2-proxy-client-secret</span>
<span class="hljs-addition">+              key: client-secret</span>
<span class="hljs-addition">+        - name: OAUTH2_PROXY_COOKIE_SECRET</span>
<span class="hljs-addition">+          valueFrom:</span>
<span class="hljs-addition">+            secretKeyRef:</span>
<span class="hljs-addition">+              name: oauth2-proxy-cookie-secret</span>
<span class="hljs-addition">+              key: cookie-secret</span>
<span class="hljs-addition">+        args:</span>
<span class="hljs-addition">+          - to be replaced by a patch</span>
<span class="hljs-addition">+        ports:</span>
<span class="hljs-addition">+          - containerPort: 6000</span>
<span class="hljs-addition">+            name: web</span>
<span class="hljs-addition">+            protocol: TCP</span>
<span class="hljs-addition">+        resources:</span>
<span class="hljs-addition">+          limits:</span>
<span class="hljs-addition">+            cpu: 300m</span>
<span class="hljs-addition">+            memory: 256Mi</span>
<span class="hljs-addition">+          requests:</span>
<span class="hljs-addition">+            cpu: 30m</span>
<span class="hljs-addition">+            memory: 128Mi</span>
<span class="hljs-addition">+        securityContext:</span>
<span class="hljs-addition">+          readOnlyRootFilesystem: true</span>
<span class="hljs-addition">+          runAsNonRoot: true</span>
<span class="hljs-addition">+          runAsUser: 1001</span>
<span class="hljs-addition">+      volumes:</span>
<span class="hljs-addition">+        - configMap:</span>
<span class="hljs-addition">+            defaultMode: 420</span>
<span class="hljs-addition">+            name: proxy</span>
<span class="hljs-addition">+            items:</span>
<span class="hljs-addition">+              - key: nginx.conf</span>
<span class="hljs-addition">+                path: nginx.conf </span>
<span class="hljs-addition">+          name: proxy</span>
<span class="hljs-addition">+        - name: logs</span>
<span class="hljs-addition">+          emptyDir: {}</span>
<span class="hljs-addition">+        - name: nginx-tmp</span>
<span class="hljs-addition">+          emptyDir: {}</span>
<span class="hljs-addition">+        - name: run</span>
<span class="hljs-addition">+          emptyDir: {}</span>
<span class="hljs-addition">+        - name: serving-cert</span>
<span class="hljs-addition">+          secret:</span>
<span class="hljs-addition">+            secretName: serving-cert</span>
<span class="hljs-addition">+        - name: nginx-generated-config</span>
<span class="hljs-addition">+          emptyDir: {}</span>
<span class="hljs-addition">+        - name: api-token</span>
<span class="hljs-addition">+          secret:</span>
<span class="hljs-addition">+            secretName: proxy</span>
<span class="hljs-addition">+        - name: openresty</span>
<span class="hljs-addition">+          emptyDir: {}</span>
<span class="hljs-addition">+        - name: static-content</span>
<span class="hljs-addition">+          emptyDir: {}</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: v1</span>
<span class="hljs-addition">+kind: Service</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  labels:</span>
<span class="hljs-addition">+    app: proxy</span>
<span class="hljs-addition">+  name: proxy</span>
<span class="hljs-addition">+spec:</span>
<span class="hljs-addition">+  type: ClusterIP</span>
<span class="hljs-addition">+  internalTrafficPolicy: Cluster</span>
<span class="hljs-addition">+  ipFamilies:</span>
<span class="hljs-addition">+    - IPv4</span>
<span class="hljs-addition">+  ipFamilyPolicy: SingleStack</span>
<span class="hljs-addition">+  ports:</span>
<span class="hljs-addition">+    - name: web</span>
<span class="hljs-addition">+      port: 8888</span>
<span class="hljs-addition">+      protocol: TCP</span>
<span class="hljs-addition">+      targetPort: web</span>
<span class="hljs-addition">+    - name: web-tls</span>
<span class="hljs-addition">+      port: 9443</span>
<span class="hljs-addition">+      protocol: TCP</span>
<span class="hljs-addition">+      targetPort: web-tls</span>
<span class="hljs-addition">+  selector:</span>
<span class="hljs-addition">+    app: proxy</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: v1</span>
<span class="hljs-addition">+kind: ServiceAccount</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: proxy</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: v1</span>
<span class="hljs-addition">+kind: Secret</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: proxy</span>
<span class="hljs-addition">+  annotations:</span>
<span class="hljs-addition">+    kubernetes.io/service-account.name: proxy</span>
<span class="hljs-addition">+type: kubernetes.io/service-account-token</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: rbac.authorization.k8s.io/v1</span>
<span class="hljs-addition">+kind: ClusterRole</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: konflux-proxy</span>
<span class="hljs-addition">+rules:</span>
<span class="hljs-addition">+- apiGroups: [&quot;&quot;]</span>
<span class="hljs-addition">+  resources: [&quot;users&quot;]</span>
<span class="hljs-addition">+  verbs: [&quot;impersonate&quot;]</span>
<span class="hljs-addition">+- apiGroups: [&quot;authorization.k8s.io&quot;]</span>
<span class="hljs-addition">+  resources: [&quot;localsubjectaccessreviews&quot;]</span>
<span class="hljs-addition">+  verbs: [&quot;create&quot;]</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: rbac.authorization.k8s.io/v1</span>
<span class="hljs-addition">+kind: ClusterRoleBinding</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: konflux-proxy</span>
<span class="hljs-addition">+roleRef:</span>
<span class="hljs-addition">+  apiGroup: rbac.authorization.k8s.io</span>
<span class="hljs-addition">+  kind: ClusterRole</span>
<span class="hljs-addition">+  name: konflux-proxy</span>
<span class="hljs-addition">+subjects:</span>
<span class="hljs-addition">+- kind: ServiceAccount</span>
<span class="hljs-addition">+  name: proxy</span>
<span class="hljs-addition">+  namespace: konflux-ui</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: rbac.authorization.k8s.io/v1</span>
<span class="hljs-addition">+kind: ClusterRole</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: konflux-proxy-namespace-lister</span>
<span class="hljs-addition">+rules:</span>
<span class="hljs-addition">+- apiGroups: [&quot;&quot;]</span>
<span class="hljs-addition">+  resources: [&quot;namespaces&quot;]</span>
<span class="hljs-addition">+  verbs: [&quot;list&quot;, &quot;get&quot;]</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: rbac.authorization.k8s.io/v1</span>
<span class="hljs-addition">+kind: ClusterRoleBinding</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: konflux-proxy-namespace-lister</span>
<span class="hljs-addition">+roleRef:</span>
<span class="hljs-addition">+  apiGroup: rbac.authorization.k8s.io</span>
<span class="hljs-addition">+  kind: ClusterRole</span>
<span class="hljs-addition">+  name: konflux-proxy-namespace-lister</span>
<span class="hljs-addition">+subjects:</span>
<span class="hljs-addition">+- kind: ServiceAccount</span>
<span class="hljs-addition">+  name: proxy</span>
<span class="hljs-addition">+  namespace: konflux-ui</span>
<span class="hljs-comment">diff --git a/components/konflux-ui/staging/base/route-and-oauth.yaml b/components/konflux-ui/staging/base/route-and-oauth.yaml</span>
new file mode 100644
<span class="hljs-comment">index 00000000..89ec448f</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/components/konflux-ui/staging/base/route-and-oauth.yaml</span>
<span class="hljs-meta">@@ -0,0 +1,52 @@</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: route.openshift.io/v1</span>
<span class="hljs-addition">+kind: Route</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: konflux</span>
<span class="hljs-addition">+  annotations:</span>
<span class="hljs-addition">+    # Needed for running a local development env for the Konflux UI</span>
<span class="hljs-addition">+    haproxy.router.openshift.io/set-forwarded-headers: if-none</span>
<span class="hljs-addition">+spec:</span>
<span class="hljs-addition">+  host: tba</span>
<span class="hljs-addition">+  path: /</span>
<span class="hljs-addition">+  port:</span>
<span class="hljs-addition">+    targetPort: web-tls</span>
<span class="hljs-addition">+  tls:</span>
<span class="hljs-addition">+    insecureEdgeTerminationPolicy: Redirect</span>
<span class="hljs-addition">+    termination: reencrypt</span>
<span class="hljs-addition">+  to:</span>
<span class="hljs-addition">+    kind: Service</span>
<span class="hljs-addition">+    name: proxy</span>
<span class="hljs-addition">+    weight: 100</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: route.openshift.io/v1</span>
<span class="hljs-addition">+kind: Route</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: konflux-idp</span>
<span class="hljs-addition">+spec:</span>
<span class="hljs-addition">+  host: tba</span>
<span class="hljs-addition">+  path: /idp</span>
<span class="hljs-addition">+  port:</span>
<span class="hljs-addition">+    targetPort: dex</span>
<span class="hljs-addition">+  tls:</span>
<span class="hljs-addition">+    insecureEdgeTerminationPolicy: Redirect</span>
<span class="hljs-addition">+    termination: reencrypt</span>
<span class="hljs-addition">+  to:</span>
<span class="hljs-addition">+    kind: Service</span>
<span class="hljs-addition">+    name: dex</span>
<span class="hljs-addition">+    weight: 100</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+kind: ServiceAccount</span>
<span class="hljs-addition">+apiVersion: v1</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: dex-client</span>
<span class="hljs-addition">+  annotations:</span>
<span class="hljs-addition">+    serviceaccounts.openshift.io/oauth-redirecturi.konflux: tba</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+kind: Secret</span>
<span class="hljs-addition">+apiVersion: v1</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: dex-client</span>
<span class="hljs-addition">+  annotations:</span>
<span class="hljs-addition">+    kubernetes.io/service-account.name: dex-client</span>
<span class="hljs-addition">+type: kubernetes.io/service-account-token</span>
<span class="hljs-comment">diff --git a/components/konflux-ui/staging/stone-stg-rh01/add-service-certs-patch.yaml b/components/konflux-ui/staging/stone-stg-rh01/add-service-certs-patch.yaml</span>
new file mode 100644
<span class="hljs-comment">index 00000000..b636793b</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/components/konflux-ui/staging/stone-stg-rh01/add-service-certs-patch.yaml</span>
<span class="hljs-meta">@@ -0,0 +1,4 @@</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+- op: add</span>
<span class="hljs-addition">+  path: /metadata/annotations/service.beta.openshift.io~1serving-cert-secret-name</span>
<span class="hljs-addition">+  value: serving-cert</span>
<span class="hljs-comment">diff --git a/components/konflux-ui/staging/stone-stg-rh01/dex-config.yaml b/components/konflux-ui/staging/stone-stg-rh01/dex-config.yaml</span>
new file mode 100644
<span class="hljs-comment">index 00000000..0a61fd09</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/components/konflux-ui/staging/stone-stg-rh01/dex-config.yaml</span>
<span class="hljs-meta">@@ -0,0 +1,34 @@</span>
<span class="hljs-addition">+issuer: https://konflux-ui.apps.stone-stg-rh01.l2vh.p1.openshiftapps.com/idp</span>
<span class="hljs-addition">+storage:</span>
<span class="hljs-addition">+  type: kubernetes</span>
<span class="hljs-addition">+  config:</span>
<span class="hljs-addition">+    inCluster: true</span>
<span class="hljs-addition">+web:</span>
<span class="hljs-addition">+  https: 0.0.0.0:9443</span>
<span class="hljs-addition">+  tlsCert: /etc/dex/tls/tls.crt</span>
<span class="hljs-addition">+  tlsKey: /etc/dex/tls/tls.key</span>
<span class="hljs-addition">+oauth2:</span>
<span class="hljs-addition">+  skipApprovalScreen: true</span>
<span class="hljs-addition">+staticClients:</span>
<span class="hljs-addition">+- id: oauth2-proxy</span>
<span class="hljs-addition">+  redirectURIs:</span>
<span class="hljs-addition">+  - https://konflux-ui.apps.stone-stg-rh01.l2vh.p1.openshiftapps.com/oauth2/callback</span>
<span class="hljs-addition">+  # required for using dex from a UI instance run locally</span>
<span class="hljs-addition">+  - https://localhost:8080/oauth2/callback</span>
<span class="hljs-addition">+  name: &#x27;oauth2-proxy&#x27;</span>
<span class="hljs-addition">+  secretEnv: &#x27;OAUTH2_CLIENT_SECRET&#x27;</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+telemetry:</span>
<span class="hljs-addition">+  http: 0.0.0.0:5558</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+connectors:</span>
<span class="hljs-addition">+  - type: openshift</span>
<span class="hljs-addition">+    id: openshift</span>
<span class="hljs-addition">+    name: OpenShift</span>
<span class="hljs-addition">+    config:</span>
<span class="hljs-addition">+      # OpenShift API</span>
<span class="hljs-addition">+      issuer: https://api.stone-stg-rh01.l2vh.p1.openshiftapps.com:6443</span>
<span class="hljs-addition">+      # Credentials can be string literals or pulled from the environment.</span>
<span class="hljs-addition">+      clientID: system:serviceaccount:konflux-ui:dex-client</span>
<span class="hljs-addition">+      clientSecret: $OPENSHIFT_OAUTH_CLIENT_SECRET</span>
<span class="hljs-addition">+      redirectURI: https://konflux-ui.apps.stone-stg-rh01.l2vh.p1.openshiftapps.com/idp/callback</span>
<span class="hljs-comment">diff --git a/components/konflux-ui/staging/stone-stg-rh01/kustomization.yaml b/components/konflux-ui/staging/stone-stg-rh01/kustomization.yaml</span>
new file mode 100644
<span class="hljs-comment">index 00000000..149cbc6c</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/components/konflux-ui/staging/stone-stg-rh01/kustomization.yaml</span>
<span class="hljs-meta">@@ -0,0 +1,44 @@</span>
<span class="hljs-addition">+apiVersion: kustomize.config.k8s.io/v1beta1</span>
<span class="hljs-addition">+kind: Kustomization</span>
<span class="hljs-addition">+resources:</span>
<span class="hljs-addition">+  - ../base</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+configMapGenerator:</span>
<span class="hljs-addition">+  - name: dex</span>
<span class="hljs-addition">+    files:</span>
<span class="hljs-addition">+      - dex-config.yaml</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+patches:</span>
<span class="hljs-addition">+  - path: add-service-certs-patch.yaml</span>
<span class="hljs-addition">+    target:</span>
<span class="hljs-addition">+      group: &quot;&quot;</span>
<span class="hljs-addition">+      version: v1</span>
<span class="hljs-addition">+      kind: Service</span>
<span class="hljs-addition">+      name: proxy</span>
<span class="hljs-addition">+  - path: oauth2-proxy-args-patch.yaml</span>
<span class="hljs-addition">+    target:</span>
<span class="hljs-addition">+      group: apps</span>
<span class="hljs-addition">+      version: v1</span>
<span class="hljs-addition">+      kind: Deployment</span>
<span class="hljs-addition">+      name: proxy</span>
<span class="hljs-addition">+  - path: remove-run-as-user-proxy-patch.yaml</span>
<span class="hljs-addition">+    target:</span>
<span class="hljs-addition">+      group: apps</span>
<span class="hljs-addition">+      version: v1</span>
<span class="hljs-addition">+      kind: Deployment</span>
<span class="hljs-addition">+      name: proxy</span>
<span class="hljs-addition">+  - path: set-replicas-patch.yaml</span>
<span class="hljs-addition">+    target:</span>
<span class="hljs-addition">+      group: apps</span>
<span class="hljs-addition">+      version: v1</span>
<span class="hljs-addition">+      kind: Deployment</span>
<span class="hljs-addition">+  - path: set-redirect-uri.yaml</span>
<span class="hljs-addition">+    target:</span>
<span class="hljs-addition">+      name: dex-client</span>
<span class="hljs-addition">+      kind: ServiceAccount</span>
<span class="hljs-addition">+  - path: set-hostname.yaml</span>
<span class="hljs-addition">+    target:</span>
<span class="hljs-addition">+      kind: Route</span>
<span class="hljs-addition">+      version: v1</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+namespace: konflux-ui</span>
<span class="hljs-comment">diff --git a/components/konflux-ui/staging/stone-stg-rh01/oauth2-proxy-args-patch.yaml b/components/konflux-ui/staging/stone-stg-rh01/oauth2-proxy-args-patch.yaml</span>
new file mode 100644
<span class="hljs-comment">index 00000000..27f53739</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/components/konflux-ui/staging/stone-stg-rh01/oauth2-proxy-args-patch.yaml</span>
<span class="hljs-meta">@@ -0,0 +1,35 @@</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+- op: replace</span>
<span class="hljs-addition">+  path: /spec/template/spec/containers/2/args</span>
<span class="hljs-addition">+  value:</span>
<span class="hljs-addition">+    - --provider</span>
<span class="hljs-addition">+    - oidc</span>
<span class="hljs-addition">+    - --provider-display-name</span>
<span class="hljs-addition">+    - &quot;Dex&quot;</span>
<span class="hljs-addition">+    - --client-id</span>
<span class="hljs-addition">+    - oauth2-proxy</span>
<span class="hljs-addition">+    - --http-address</span>
<span class="hljs-addition">+    - &quot;127.0.0.1:6000&quot;</span>
<span class="hljs-addition">+  # We use relative redirect URI and the reverse-proxy flag to support </span>
<span class="hljs-addition">+  # setting the host using the X-Forwarded-Host header. This is needed</span>
<span class="hljs-addition">+  # when running a UI instance locally that should connect to a remote</span>
<span class="hljs-addition">+  # cluster.</span>
<span class="hljs-addition">+    - --redirect-url</span>
<span class="hljs-addition">+    - /oauth2/callback</span>
<span class="hljs-addition">+    - --reverse-proxy</span>
<span class="hljs-addition">+    - &quot;true&quot;</span>
<span class="hljs-addition">+    - --oidc-issuer-url</span>
<span class="hljs-addition">+    - https://konflux-ui.apps.stone-stg-rh01.l2vh.p1.openshiftapps.com/idp</span>
<span class="hljs-addition">+    - &quot;true&quot;</span>
<span class="hljs-addition">+    - --cookie-name</span>
<span class="hljs-addition">+    - __Host-konflux-ci-cookie</span>
<span class="hljs-addition">+    - --email-domain</span>
<span class="hljs-addition">+    - &quot;*&quot;</span>
<span class="hljs-addition">+    - --insecure-oidc-allow-unverified-email</span>
<span class="hljs-addition">+    - &quot;true&quot;</span>
<span class="hljs-addition">+    - --set-xauthrequest</span>
<span class="hljs-addition">+    - &quot;true&quot;</span>
<span class="hljs-addition">+    - --whitelist-domain</span>
<span class="hljs-addition">+    - localhost:9443</span>
<span class="hljs-addition">+    - --whitelist-domain</span>
<span class="hljs-addition">+    - konflux-ui.apps.stone-stg-rh01.l2vh.p1.openshiftapps.com</span>
<span class="hljs-comment">diff --git a/components/konflux-ui/staging/stone-stg-rh01/remove-run-as-user-proxy-patch.yaml b/components/konflux-ui/staging/stone-stg-rh01/remove-run-as-user-proxy-patch.yaml</span>
new file mode 100644
<span class="hljs-comment">index 00000000..a8939cef</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/components/konflux-ui/staging/stone-stg-rh01/remove-run-as-user-proxy-patch.yaml</span>
<span class="hljs-meta">@@ -0,0 +1,15 @@</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+- op: remove</span>
<span class="hljs-addition">+  path: /spec/template/spec/initContainers/0/securityContext/runAsUser</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+- op: remove</span>
<span class="hljs-addition">+  path: /spec/template/spec/initContainers/1/securityContext/runAsUser</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+- op: remove</span>
<span class="hljs-addition">+  path: /spec/template/spec/containers/0/securityContext/runAsUser</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+- op: remove</span>
<span class="hljs-addition">+  path: /spec/template/spec/containers/1/securityContext/runAsUser</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+- op: remove</span>
<span class="hljs-addition">+  path: /spec/template/spec/containers/2/securityContext/runAsUser</span>
<span class="hljs-comment">diff --git a/components/konflux-ui/staging/stone-stg-rh01/set-hostname.yaml b/components/konflux-ui/staging/stone-stg-rh01/set-hostname.yaml</span>
new file mode 100644
<span class="hljs-comment">index 00000000..59753bcc</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/components/konflux-ui/staging/stone-stg-rh01/set-hostname.yaml</span>
<span class="hljs-meta">@@ -0,0 +1,4 @@</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+- op: add</span>
<span class="hljs-addition">+  path: /spec/host</span>
<span class="hljs-addition">+  value: konflux-ui.apps.stone-stg-rh01.l2vh.p1.openshiftapps.com</span>
<span class="hljs-comment">diff --git a/components/konflux-ui/staging/stone-stg-rh01/set-redirect-uri.yaml b/components/konflux-ui/staging/stone-stg-rh01/set-redirect-uri.yaml</span>
new file mode 100644
<span class="hljs-comment">index 00000000..e6ea9d25</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/components/konflux-ui/staging/stone-stg-rh01/set-redirect-uri.yaml</span>
<span class="hljs-meta">@@ -0,0 +1,4 @@</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+- op: add</span>
<span class="hljs-addition">+  path: /metadata/annotations/serviceaccounts.openshift.io~1oauth-redirecturi.konflux</span>
<span class="hljs-addition">+  value: https://konflux-ui.apps.stone-stg-rh01.l2vh.p1.openshiftapps.com/idp/callback</span>
<span class="hljs-comment">diff --git a/components/konflux-ui/staging/stone-stg-rh01/set-replicas-patch.yaml b/components/konflux-ui/staging/stone-stg-rh01/set-replicas-patch.yaml</span>
new file mode 100644
<span class="hljs-comment">index 00000000..e044d9c7</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/components/konflux-ui/staging/stone-stg-rh01/set-replicas-patch.yaml</span>
<span class="hljs-meta">@@ -0,0 +1,4 @@</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+- op: add</span>
<span class="hljs-addition">+  path: /spec/replicas</span>
<span class="hljs-addition">+  value: 3 </span>
</code></pre>

</details> 

<details> 
<summary>Kustomize Generated Diff (0 lines)</summary>  
<pre><code>  
</code></pre>

</details>  

<details> 
<summary>Lint</summary>  
<pre><code>  <span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found! 
</code></pre>

</details> 
<br> 


</div>
<div>
<h3>3: Staging changes from eebcbd6c to d8033565 on Mon Nov 25 12:00:54 2024 </h3>  

<details> 
<summary>Git Diff (1063 lines)</summary>  
<pre><code>  <span class="hljs-comment">diff --git a/argo-cd-apps/base/member/infra-deployments/konflux-ui/README b/argo-cd-apps/base/member/infra-deployments/konflux-ui/README</span>
new file mode 100644
<span class="hljs-comment">index 00000000..33918f24</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/argo-cd-apps/base/member/infra-deployments/konflux-ui/README</span>
@@ -0,0 +1 @@
<span class="hljs-addition">+The new UI for Konflux. It will replace the ui ArgoCD app in the future.</span>
<span class="hljs-comment">diff --git a/argo-cd-apps/base/member/infra-deployments/konflux-ui/konflux-ui.yaml b/argo-cd-apps/base/member/infra-deployments/konflux-ui/konflux-ui.yaml</span>
new file mode 100644
<span class="hljs-comment">index 00000000..a308ef33</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/argo-cd-apps/base/member/infra-deployments/konflux-ui/konflux-ui.yaml</span>
<span class="hljs-meta">@@ -0,0 +1,44 @@</span>
<span class="hljs-addition">+apiVersion: argoproj.io/v1alpha1</span>
<span class="hljs-addition">+kind: ApplicationSet</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: konflux-ui</span>
<span class="hljs-addition">+spec:</span>
<span class="hljs-addition">+  generators:</span>
<span class="hljs-addition">+    - merge:</span>
<span class="hljs-addition">+        mergeKeys:</span>
<span class="hljs-addition">+          - nameNormalized</span>
<span class="hljs-addition">+        generators:</span>
<span class="hljs-addition">+          - clusters:</span>
<span class="hljs-addition">+              values:</span>
<span class="hljs-addition">+                sourceRoot: components/konflux-ui</span>
<span class="hljs-addition">+                environment: staging</span>
<span class="hljs-addition">+                # This app must have cluster specific configurations</span>
<span class="hljs-addition">+                clusterDir: does-not-exist</span>
<span class="hljs-addition">+          - list:</span>
<span class="hljs-addition">+              elements:</span>
<span class="hljs-addition">+                - nameNormalized: stone-stg-rh01</span>
<span class="hljs-addition">+                  values.clusterDir: stone-stg-rh01</span>
<span class="hljs-addition">+  template:</span>
<span class="hljs-addition">+    metadata:</span>
<span class="hljs-addition">+      name: konflux-ui-{{nameNormalized}}</span>
<span class="hljs-addition">+    spec:</span>
<span class="hljs-addition">+      project: default</span>
<span class="hljs-addition">+      source:</span>
<span class="hljs-addition">+        path: &#x27;{{values.sourceRoot}}/{{values.environment}}/{{values.clusterDir}}&#x27;</span>
<span class="hljs-addition">+        repoURL: https://github.com/redhat-appstudio/infra-deployments.git</span>
<span class="hljs-addition">+        targetRevision: main</span>
<span class="hljs-addition">+      destination:</span>
<span class="hljs-addition">+        namespace: konflux-ui</span>
<span class="hljs-addition">+        server: &#x27;{{server}}&#x27;</span>
<span class="hljs-addition">+      syncPolicy:</span>
<span class="hljs-addition">+        automated:</span>
<span class="hljs-addition">+          prune: true</span>
<span class="hljs-addition">+          selfHeal: true</span>
<span class="hljs-addition">+        syncOptions:</span>
<span class="hljs-addition">+          - CreateNamespace=true</span>
<span class="hljs-addition">+        retry:</span>
<span class="hljs-addition">+          limit: -1</span>
<span class="hljs-addition">+          backoff:</span>
<span class="hljs-addition">+            duration: 10s</span>
<span class="hljs-addition">+            factor: 2</span>
<span class="hljs-addition">+            maxDuration: 3m</span>
<span class="hljs-comment">diff --git a/argo-cd-apps/base/member/infra-deployments/konflux-ui/kustomization.yaml b/argo-cd-apps/base/member/infra-deployments/konflux-ui/kustomization.yaml</span>
new file mode 100644
<span class="hljs-comment">index 00000000..fc85fb1f</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/argo-cd-apps/base/member/infra-deployments/konflux-ui/kustomization.yaml</span>
<span class="hljs-meta">@@ -0,0 +1,6 @@</span>
<span class="hljs-addition">+apiVersion: kustomize.config.k8s.io/v1beta1</span>
<span class="hljs-addition">+kind: Kustomization</span>
<span class="hljs-addition">+resources:</span>
<span class="hljs-addition">+- konflux-ui.yaml</span>
<span class="hljs-addition">+components:</span>
<span class="hljs-addition">+  - ../../../../k-components/deploy-to-member-cluster-merge-generator</span>
<span class="hljs-comment">diff --git a/argo-cd-apps/base/member/infra-deployments/kustomization.yaml b/argo-cd-apps/base/member/infra-deployments/kustomization.yaml</span>
<span class="hljs-comment">index e602a10d..0670efb0 100644</span>
<span class="hljs-comment">--- a/argo-cd-apps/base/member/infra-deployments/kustomization.yaml</span>
<span class="hljs-comment">+++ b/argo-cd-apps/base/member/infra-deployments/kustomization.yaml</span>
<span class="hljs-meta">@@ -26,5 +26,6 @@</span> resources:
   - proactive-scaler
   - knative-eventing
   - crossplane-control-plane
<span class="hljs-addition">+  - konflux-ui</span>
 components:
   - ../../../k-components/inject-infra-deployments-repo-details
<span class="hljs-comment">diff --git a/argo-cd-apps/overlays/development/delete-applications.yaml b/argo-cd-apps/overlays/development/delete-applications.yaml</span>
<span class="hljs-comment">index c8cf77ae..e32dc4fa 100644</span>
<span class="hljs-comment">--- a/argo-cd-apps/overlays/development/delete-applications.yaml</span>
<span class="hljs-comment">+++ b/argo-cd-apps/overlays/development/delete-applications.yaml</span>
<span class="hljs-meta">@@ -100,3 +100,9 @@</span> kind: ApplicationSet
 metadata:
   name: nvme-storage-configurator
 $patch: delete
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: argoproj.io/v1alpha1</span>
<span class="hljs-addition">+kind: ApplicationSet</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: konflux-ui</span>
<span class="hljs-addition">+$patch: delete</span>
<span class="hljs-comment">diff --git a/argo-cd-apps/overlays/konflux-public-production/delete-applications.yaml b/argo-cd-apps/overlays/konflux-public-production/delete-applications.yaml</span>
<span class="hljs-comment">index 281da6e7..d25bff5e 100644</span>
<span class="hljs-comment">--- a/argo-cd-apps/overlays/konflux-public-production/delete-applications.yaml</span>
<span class="hljs-comment">+++ b/argo-cd-apps/overlays/konflux-public-production/delete-applications.yaml</span>
<span class="hljs-meta">@@ -33,3 +33,9 @@</span> kind: ApplicationSet
 metadata:
   name: knative-eventing
 $patch: delete
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: argoproj.io/v1alpha1</span>
<span class="hljs-addition">+kind: ApplicationSet</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: konflux-ui</span>
<span class="hljs-addition">+$patch: delete</span>
<span class="hljs-comment">diff --git a/argo-cd-apps/overlays/production-downstream/delete-applications.yaml b/argo-cd-apps/overlays/production-downstream/delete-applications.yaml</span>
<span class="hljs-comment">index dbee992c..bbf7c2fe 100644</span>
<span class="hljs-comment">--- a/argo-cd-apps/overlays/production-downstream/delete-applications.yaml</span>
<span class="hljs-comment">+++ b/argo-cd-apps/overlays/production-downstream/delete-applications.yaml</span>
<span class="hljs-meta">@@ -57,3 +57,9 @@</span> kind: ApplicationSet
 metadata:
   name: knative-eventing
 $patch: delete
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: argoproj.io/v1alpha1</span>
<span class="hljs-addition">+kind: ApplicationSet</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: konflux-ui</span>
<span class="hljs-addition">+$patch: delete</span>
<span class="hljs-comment">diff --git a/argo-cd-apps/overlays/staging-downstream/delete-applications.yaml b/argo-cd-apps/overlays/staging-downstream/delete-applications.yaml</span>
<span class="hljs-comment">index 983e6b78..92920e9d 100644</span>
<span class="hljs-comment">--- a/argo-cd-apps/overlays/staging-downstream/delete-applications.yaml</span>
<span class="hljs-comment">+++ b/argo-cd-apps/overlays/staging-downstream/delete-applications.yaml</span>
<span class="hljs-meta">@@ -50,3 +50,9 @@</span> kind: ApplicationSet
 metadata:
   name: knative-eventing
 $patch: delete
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: argoproj.io/v1alpha1</span>
<span class="hljs-addition">+kind: ApplicationSet</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: konflux-ui</span>
<span class="hljs-addition">+$patch: delete</span>
<span class="hljs-comment">diff --git a/components/konflux-ui/base/ns.yaml b/components/konflux-ui/base/ns.yaml</span>
new file mode 100644
<span class="hljs-comment">index 00000000..5ca5a63a</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/components/konflux-ui/base/ns.yaml</span>
<span class="hljs-meta">@@ -0,0 +1,4 @@</span>
<span class="hljs-addition">+apiVersion: v1</span>
<span class="hljs-addition">+kind: Namespace</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: konflux-ui</span>
<span class="hljs-comment">diff --git a/components/konflux-ui/staging/base/dex/dex.yaml b/components/konflux-ui/staging/base/dex/dex.yaml</span>
new file mode 100644
<span class="hljs-comment">index 00000000..49371c8e</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/components/konflux-ui/staging/base/dex/dex.yaml</span>
<span class="hljs-meta">@@ -0,0 +1,126 @@</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: apps/v1</span>
<span class="hljs-addition">+kind: Deployment</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  labels:</span>
<span class="hljs-addition">+    app: dex</span>
<span class="hljs-addition">+  name: dex</span>
<span class="hljs-addition">+  annotations:</span>
<span class="hljs-addition">+    ignore-check.kube-linter.io/no-anti-affinity: &quot;Using topologySpreadConstraints&quot;</span>
<span class="hljs-addition">+spec:</span>
<span class="hljs-addition">+  replicas: 1</span>
<span class="hljs-addition">+  selector:</span>
<span class="hljs-addition">+    matchLabels:</span>
<span class="hljs-addition">+      app: dex</span>
<span class="hljs-addition">+  template:</span>
<span class="hljs-addition">+    metadata:</span>
<span class="hljs-addition">+      labels:</span>
<span class="hljs-addition">+        app: dex</span>
<span class="hljs-addition">+    spec:</span>
<span class="hljs-addition">+      serviceAccountName: dex</span>
<span class="hljs-addition">+      topologySpreadConstraints:</span>
<span class="hljs-addition">+      - maxSkew: 1</span>
<span class="hljs-addition">+        topologyKey: topology.kubernetes.io/zone</span>
<span class="hljs-addition">+        whenUnsatisfiable: ScheduleAnyway</span>
<span class="hljs-addition">+        labelSelector:</span>
<span class="hljs-addition">+          matchLabels:</span>
<span class="hljs-addition">+            app: dex</span>
<span class="hljs-addition">+      containers:</span>
<span class="hljs-addition">+      - image: ghcr.io/dexidp/dex:v2.32.0</span>
<span class="hljs-addition">+        name: dex</span>
<span class="hljs-addition">+        command: [&quot;/usr/local/bin/dex&quot;, &quot;serve&quot;, &quot;/etc/dex/cfg/config.yaml&quot;]</span>
<span class="hljs-addition">+        securityContext:</span>
<span class="hljs-addition">+          readOnlyRootFilesystem: true</span>
<span class="hljs-addition">+          runAsNonRoot: true</span>
<span class="hljs-addition">+        resources:</span>
<span class="hljs-addition">+          limits:</span>
<span class="hljs-addition">+            cpu: 100m</span>
<span class="hljs-addition">+            memory: 256Mi</span>
<span class="hljs-addition">+          requests:</span>
<span class="hljs-addition">+            cpu: 100m</span>
<span class="hljs-addition">+            memory: 256Mi</span>
<span class="hljs-addition">+        ports:</span>
<span class="hljs-addition">+        - name: https</span>
<span class="hljs-addition">+          containerPort: 9443</span>
<span class="hljs-addition">+        - name: telemetry</span>
<span class="hljs-addition">+          containerPort: 5558</span>
<span class="hljs-addition">+          protocol: TCP</span>
<span class="hljs-addition">+        volumeMounts:</span>
<span class="hljs-addition">+        - name: dex</span>
<span class="hljs-addition">+          mountPath: /etc/dex/cfg</span>
<span class="hljs-addition">+        - name: tls</span>
<span class="hljs-addition">+          mountPath: /etc/dex/tls</span>
<span class="hljs-addition">+        readinessProbe:</span>
<span class="hljs-addition">+          httpGet:</span>
<span class="hljs-addition">+            path: /healthz/ready</span>
<span class="hljs-addition">+            port: telemetry</span>
<span class="hljs-addition">+        env:</span>
<span class="hljs-addition">+        - name: OPENSHIFT_OAUTH_CLIENT_SECRET</span>
<span class="hljs-addition">+          valueFrom:</span>
<span class="hljs-addition">+            secretKeyRef:</span>
<span class="hljs-addition">+              name: dex-client</span>
<span class="hljs-addition">+              key: token</span>
<span class="hljs-addition">+        - name: OAUTH2_CLIENT_SECRET</span>
<span class="hljs-addition">+          valueFrom:</span>
<span class="hljs-addition">+            secretKeyRef:</span>
<span class="hljs-addition">+              name: oauth2-proxy-client-secret</span>
<span class="hljs-addition">+              key: client-secret</span>
<span class="hljs-addition">+      volumes:</span>
<span class="hljs-addition">+      - name: dex</span>
<span class="hljs-addition">+        configMap:</span>
<span class="hljs-addition">+          name: dex</span>
<span class="hljs-addition">+          defaultMode: 420</span>
<span class="hljs-addition">+          items:</span>
<span class="hljs-addition">+          - key: dex-config.yaml</span>
<span class="hljs-addition">+            path: config.yaml</span>
<span class="hljs-addition">+      - name: tls</span>
<span class="hljs-addition">+        secret:</span>
<span class="hljs-addition">+          secretName: dex-cert</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: v1</span>
<span class="hljs-addition">+kind: Service</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: dex</span>
<span class="hljs-addition">+  annotations:</span>
<span class="hljs-addition">+    service.beta.openshift.io/serving-cert-secret-name: dex-cert</span>
<span class="hljs-addition">+spec:</span>
<span class="hljs-addition">+  type: ClusterIP</span>
<span class="hljs-addition">+  ports:</span>
<span class="hljs-addition">+  - name: dex</span>
<span class="hljs-addition">+    port: 9443</span>
<span class="hljs-addition">+    protocol: TCP</span>
<span class="hljs-addition">+    targetPort: 9443</span>
<span class="hljs-addition">+  selector:</span>
<span class="hljs-addition">+    app: dex</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: v1</span>
<span class="hljs-addition">+kind: ServiceAccount</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  labels:</span>
<span class="hljs-addition">+    app: dex</span>
<span class="hljs-addition">+  name: dex</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: rbac.authorization.k8s.io/v1</span>
<span class="hljs-addition">+kind: ClusterRole</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: dex</span>
<span class="hljs-addition">+rules:</span>
<span class="hljs-addition">+- apiGroups: [&quot;dex.coreos.com&quot;] # API group created by dex</span>
<span class="hljs-addition">+  resources: [&quot;*&quot;]</span>
<span class="hljs-addition">+  verbs: [&quot;*&quot;]</span>
<span class="hljs-addition">+- apiGroups: [&quot;apiextensions.k8s.io&quot;]</span>
<span class="hljs-addition">+  resources: [&quot;customresourcedefinitions&quot;]</span>
<span class="hljs-addition">+  verbs: [&quot;create&quot;] # To manage its own resources, dex must be able to create customresourcedefinitions</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: rbac.authorization.k8s.io/v1</span>
<span class="hljs-addition">+kind: ClusterRoleBinding</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: dex</span>
<span class="hljs-addition">+roleRef:</span>
<span class="hljs-addition">+  apiGroup: rbac.authorization.k8s.io</span>
<span class="hljs-addition">+  kind: ClusterRole</span>
<span class="hljs-addition">+  name: dex</span>
<span class="hljs-addition">+subjects:</span>
<span class="hljs-addition">+- kind: ServiceAccount</span>
<span class="hljs-addition">+  name: dex           # Service account assigned to the dex pod, created above</span>
<span class="hljs-addition">+  namespace: konflux-ui  # The namespace dex is running in</span>
<span class="hljs-comment">diff --git a/components/konflux-ui/staging/base/dex/kustomization.yaml b/components/konflux-ui/staging/base/dex/kustomization.yaml</span>
new file mode 100644
<span class="hljs-comment">index 00000000..32291d23</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/components/konflux-ui/staging/base/dex/kustomization.yaml</span>
<span class="hljs-meta">@@ -0,0 +1,4 @@</span>
<span class="hljs-addition">+apiVersion: kustomize.config.k8s.io/v1beta1</span>
<span class="hljs-addition">+kind: Kustomization</span>
<span class="hljs-addition">+resources:</span>
<span class="hljs-addition">+  - dex.yaml</span>
<span class="hljs-comment">diff --git a/components/konflux-ui/staging/base/kustomization.yaml b/components/konflux-ui/staging/base/kustomization.yaml</span>
new file mode 100644
<span class="hljs-comment">index 00000000..b3770aab</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/components/konflux-ui/staging/base/kustomization.yaml</span>
<span class="hljs-meta">@@ -0,0 +1,15 @@</span>
<span class="hljs-addition">+apiVersion: kustomize.config.k8s.io/v1beta1</span>
<span class="hljs-addition">+kind: Kustomization</span>
<span class="hljs-addition">+resources:</span>
<span class="hljs-addition">+  - dex</span>
<span class="hljs-addition">+  - proxy</span>
<span class="hljs-addition">+  - route-and-oauth.yaml</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+images:</span>
<span class="hljs-addition">+  - name: quay.io/konflux-ci/workspace-manager</span>
<span class="hljs-addition">+    digest: sha256:0b32c063d9fbce1af4f851d7cf1f8bc0ad1eda06dafaa4ad2bd4a0d5fbba62c7</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+  - name: quay.io/konflux-ci/konflux-ui</span>
<span class="hljs-addition">+    digest: sha256:4d638ff6ed4874de0406b200e671ebac72b3f03c4d46b92f02bf62809c1cbed3</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+namespace: konflux-ui</span>
<span class="hljs-comment">diff --git a/components/konflux-ui/staging/base/proxy/kustomization.yaml b/components/konflux-ui/staging/base/proxy/kustomization.yaml</span>
new file mode 100644
<span class="hljs-comment">index 00000000..526e2783</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/components/konflux-ui/staging/base/proxy/kustomization.yaml</span>
<span class="hljs-meta">@@ -0,0 +1,9 @@</span>
<span class="hljs-addition">+kind: Kustomization</span>
<span class="hljs-addition">+apiVersion: kustomize.config.k8s.io/v1beta1</span>
<span class="hljs-addition">+resources:</span>
<span class="hljs-addition">+  - proxy.yaml</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+configMapGenerator:</span>
<span class="hljs-addition">+  - name: proxy</span>
<span class="hljs-addition">+    files:</span>
<span class="hljs-addition">+      - nginx.conf</span>
<span class="hljs-comment">diff --git a/components/konflux-ui/staging/base/proxy/nginx.conf b/components/konflux-ui/staging/base/proxy/nginx.conf</span>
new file mode 100644
<span class="hljs-comment">index 00000000..2223cf23</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/components/konflux-ui/staging/base/proxy/nginx.conf</span>
<span class="hljs-meta">@@ -0,0 +1,169 @@</span>
<span class="hljs-addition">+worker_processes auto;</span>
<span class="hljs-addition">+error_log /var/log/nginx/error.log;</span>
<span class="hljs-addition">+pid /run/nginx.pid;</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+# Load dynamic modules. See /usr/share/doc/nginx/README.dynamic.</span>
<span class="hljs-addition">+include /usr/share/nginx/modules/*.conf;</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+events {</span>
<span class="hljs-addition">+    worker_connections 1024;</span>
<span class="hljs-addition">+}</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+http {</span>
<span class="hljs-addition">+    log_format upstreamlog &#x27;[$time_local] $remote_addr - $remote_user - $server_name $host to: $proxy_host  $upstream_addr: $request $status upstream_response_time $upstream_response_time msec $msec request_time $request_time X-Forwarded-Host: $http_x_forwarded_host&#x27;;</span>
<span class="hljs-addition">+    access_log /dev/stderr upstreamlog;</span>
<span class="hljs-addition">+    error_log /dev/stderr;</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+    sendfile on;</span>
<span class="hljs-addition">+    tcp_nopush on;</span>
<span class="hljs-addition">+    tcp_nodelay on;</span>
<span class="hljs-addition">+    keepalive_timeout 65;</span>
<span class="hljs-addition">+    types_hash_max_size 4096;</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+    default_type application/octet-stream;</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+    client_body_temp_path /var/run/openresty/nginx-client-body;</span>
<span class="hljs-addition">+    proxy_temp_path       /var/run/openresty/nginx-proxy;</span>
<span class="hljs-addition">+    fastcgi_temp_path     /var/run/openresty/nginx-fastcgi;</span>
<span class="hljs-addition">+    uwsgi_temp_path       /var/run/openresty/nginx-uwsgi;</span>
<span class="hljs-addition">+    scgi_temp_path        /var/run/openresty/nginx-scgi;</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+    include /usr/local/openresty/nginx/conf/mime.types;</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+    map $http_upgrade $connection_upgrade {</span>
<span class="hljs-addition">+        default upgrade;</span>
<span class="hljs-addition">+        &#x27;&#x27; close;</span>
<span class="hljs-addition">+    }</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+    server {</span>
<span class="hljs-addition">+        listen 9443 ssl;</span>
<span class="hljs-addition">+        ssl_certificate /mnt/tls.crt;</span>
<span class="hljs-addition">+        ssl_certificate_key /mnt/tls.key;</span>
<span class="hljs-addition">+        server_name _;</span>
<span class="hljs-addition">+        root /opt/app-root/src;</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+        location / {</span>
<span class="hljs-addition">+            alias /opt/app-root/src/static-content/;</span>
<span class="hljs-addition">+            try_files $uri /index.html;</span>
<span class="hljs-addition">+        }</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+        location = /404.html {</span>
<span class="hljs-addition">+        }</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+        location = /oauth2/auth {</span>
<span class="hljs-addition">+            internal; </span>
<span class="hljs-addition">+            proxy_pass       http://127.0.0.1:6000;</span>
<span class="hljs-addition">+            proxy_set_header Host             $host;</span>
<span class="hljs-addition">+            proxy_set_header X-Real-IP        $remote_addr;</span>
<span class="hljs-addition">+            proxy_set_header X-Scheme         $scheme;</span>
<span class="hljs-addition">+            proxy_set_header X-Forwarded-Host $http_x_forwarded_host;</span>
<span class="hljs-addition">+            # nginx auth_request includes headers but not body</span>
<span class="hljs-addition">+            proxy_set_header Content-Length   &quot;&quot;;</span>
<span class="hljs-addition">+            proxy_pass_request_body           off;</span>
<span class="hljs-addition">+        }</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+        location /oauth2/ {</span>
<span class="hljs-addition">+            proxy_pass       http://127.0.0.1:6000/oauth2/;</span>
<span class="hljs-addition">+            proxy_set_header Host             $host;</span>
<span class="hljs-addition">+            proxy_set_header X-Real-IP        $remote_addr;</span>
<span class="hljs-addition">+            proxy_set_header X-Scheme         $scheme;</span>
<span class="hljs-addition">+            proxy_set_header X-Forwarded-Host $http_x_forwarded_host;</span>
<span class="hljs-addition">+        }</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+        location /api/k8s/registration/ {</span>
<span class="hljs-addition">+           # Registration Service registration endpoint</span>
<span class="hljs-addition">+            auth_request_set $email  $upstream_http_x_auth_request_email;</span>
<span class="hljs-addition">+            proxy_set_header X-Email $email;</span>
<span class="hljs-addition">+            auth_request_set $user  $upstream_http_x_auth_request_user;</span>
<span class="hljs-addition">+            proxy_set_header X-User  $user;</span>
<span class="hljs-addition">+            auth_request_set $username  $upstream_http_x_auth_request_preferred_username; </span>
<span class="hljs-addition">+            proxy_set_header X-Auth-Request-Preferred-Username $username;</span>
<span class="hljs-addition">+            auth_request_set $groups  $upstream_http_x_auth_request_groups;</span>
<span class="hljs-addition">+            proxy_set_header X-Auth-Request-Groups  $groups;    </span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+            auth_request /oauth2/auth;</span>
<span class="hljs-addition">+            proxy_pass http://127.0.0.1:5000/;</span>
<span class="hljs-addition">+        }</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+        location /api/k8s/apis/toolchain.dev.openshift.com/v1alpha1/workspaces {</span>
<span class="hljs-addition">+           # Registration Service workspaces endpoint</span>
<span class="hljs-addition">+            auth_request_set $email  $upstream_http_x_auth_request_email;</span>
<span class="hljs-addition">+            proxy_set_header X-Email $email;</span>
<span class="hljs-addition">+            auth_request_set $user  $upstream_http_x_auth_request_user;</span>
<span class="hljs-addition">+            proxy_set_header X-User  $user;</span>
<span class="hljs-addition">+            auth_request_set $username  $upstream_http_x_auth_request_preferred_username; </span>
<span class="hljs-addition">+            proxy_set_header X-Auth-Request-Preferred-Username $username;</span>
<span class="hljs-addition">+            auth_request_set $groups  $upstream_http_x_auth_request_groups;</span>
<span class="hljs-addition">+            proxy_set_header X-Auth-Request-Groups  $groups;</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+            auth_request /oauth2/auth;</span>
<span class="hljs-addition">+            proxy_pass http://127.0.0.1:5000/workspaces;</span>
<span class="hljs-addition">+        }</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+        location /api/k8s/workspaces/ {</span>
<span class="hljs-addition">+            # Kube-API</span>
<span class="hljs-addition">+            auth_request_set $email  $upstream_http_x_auth_request_email;</span>
<span class="hljs-addition">+            auth_request /oauth2/auth;</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+            rewrite /api/k8s/workspaces/.+?/(.+) /$1 break;</span>
<span class="hljs-addition">+            proxy_pass https://kubernetes.default.svc;</span>
<span class="hljs-addition">+            proxy_read_timeout 30m;</span>
<span class="hljs-addition">+            proxy_set_header Impersonate-User $email;</span>
<span class="hljs-addition">+            include /mnt/nginx-generated-config/bearer.conf;</span>
<span class="hljs-addition">+        }</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+        location /wss/k8s/workspaces/ {</span>
<span class="hljs-addition">+            # Kube-API</span>
<span class="hljs-addition">+            auth_request_set $email  $upstream_http_x_auth_request_email;</span>
<span class="hljs-addition">+            auth_request /oauth2/auth;</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+            rewrite /wss/k8s/workspaces/.+?/(.+) /$1 break;</span>
<span class="hljs-addition">+            proxy_pass https://kubernetes.default.svc/;</span>
<span class="hljs-addition">+            proxy_http_version 1.1;</span>
<span class="hljs-addition">+            proxy_set_header Upgrade $http_upgrade;</span>
<span class="hljs-addition">+            proxy_set_header Connection $connection_upgrade;</span>
<span class="hljs-addition">+            proxy_read_timeout 30m;</span>
<span class="hljs-addition">+            proxy_set_header Impersonate-User $email;</span>
<span class="hljs-addition">+            include /mnt/nginx-generated-config/websocket.conf;</span>
<span class="hljs-addition">+        }</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+        location /api/k8s/ {</span>
<span class="hljs-addition">+            # Kube-API</span>
<span class="hljs-addition">+            auth_request_set $email  $upstream_http_x_auth_request_email;</span>
<span class="hljs-addition">+            auth_request /oauth2/auth;</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+            proxy_pass https://kubernetes.default.svc/;</span>
<span class="hljs-addition">+            proxy_read_timeout 30m;</span>
<span class="hljs-addition">+            proxy_set_header Impersonate-User $email;</span>
<span class="hljs-addition">+            include /mnt/nginx-generated-config/bearer.conf;</span>
<span class="hljs-addition">+        }</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+        location /wss/k8s/ {</span>
<span class="hljs-addition">+            auth_request_set $email  $upstream_http_x_auth_request_email;</span>
<span class="hljs-addition">+            auth_request /oauth2/auth;</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+            proxy_http_version 1.1;</span>
<span class="hljs-addition">+            proxy_set_header Upgrade $http_upgrade;</span>
<span class="hljs-addition">+            proxy_set_header Connection $connection_upgrade;</span>
<span class="hljs-addition">+            proxy_read_timeout 30m;</span>
<span class="hljs-addition">+            proxy_set_header Impersonate-User $email;</span>
<span class="hljs-addition">+            include /mnt/nginx-generated-config/websocket.conf;</span>
<span class="hljs-addition">+        }</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+        location /api/k8s/plugins/tekton-results/workspaces/ {</span>
<span class="hljs-addition">+            auth_request_set $email  $upstream_http_x_auth_request_email;</span>
<span class="hljs-addition">+            auth_request /oauth2/auth;</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+            rewrite /api/k8s/plugins/tekton-results/workspaces/.+?/(.+) /$1 break;</span>
<span class="hljs-addition">+            proxy_pass https://tekton-results-api-service.tekton-results.svc.cluster.local:8080;</span>
<span class="hljs-addition">+            proxy_read_timeout 30m;</span>
<span class="hljs-addition">+            proxy_set_header Impersonate-User $email;</span>
<span class="hljs-addition">+            include /mnt/nginx-generated-config/bearer.conf;</span>
<span class="hljs-addition">+        }</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+        location /health {</span>
<span class="hljs-addition">+            # Used for liveness probes</span>
<span class="hljs-addition">+            return 200;</span>
<span class="hljs-addition">+        }</span>
<span class="hljs-addition">+    }</span>
<span class="hljs-addition">+}</span>
<span class="hljs-comment">diff --git a/components/konflux-ui/staging/base/proxy/proxy.yaml b/components/konflux-ui/staging/base/proxy/proxy.yaml</span>
new file mode 100644
<span class="hljs-comment">index 00000000..0f61607d</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/components/konflux-ui/staging/base/proxy/proxy.yaml</span>
<span class="hljs-meta">@@ -0,0 +1,308 @@</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: apps/v1</span>
<span class="hljs-addition">+kind: Deployment</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  labels:</span>
<span class="hljs-addition">+    app: proxy</span>
<span class="hljs-addition">+  name: proxy</span>
<span class="hljs-addition">+  annotations:</span>
<span class="hljs-addition">+    ignore-check.kube-linter.io/no-anti-affinity: &quot;Using topologySpreadConstraints&quot;</span>
<span class="hljs-addition">+spec:</span>
<span class="hljs-addition">+  replicas: 1</span>
<span class="hljs-addition">+  selector:</span>
<span class="hljs-addition">+    matchLabels:</span>
<span class="hljs-addition">+      app: proxy</span>
<span class="hljs-addition">+  minReadySeconds: 30</span>
<span class="hljs-addition">+  strategy:</span>
<span class="hljs-addition">+    rollingUpdate:</span>
<span class="hljs-addition">+      maxSurge: 25%</span>
<span class="hljs-addition">+      maxUnavailable: 0</span>
<span class="hljs-addition">+  template:</span>
<span class="hljs-addition">+    metadata:</span>
<span class="hljs-addition">+      labels:</span>
<span class="hljs-addition">+        app: proxy</span>
<span class="hljs-addition">+    spec:</span>
<span class="hljs-addition">+      serviceAccountName: proxy</span>
<span class="hljs-addition">+      topologySpreadConstraints:</span>
<span class="hljs-addition">+      - maxSkew: 1</span>
<span class="hljs-addition">+        topologyKey: topology.kubernetes.io/zone</span>
<span class="hljs-addition">+        whenUnsatisfiable: ScheduleAnyway</span>
<span class="hljs-addition">+        labelSelector:</span>
<span class="hljs-addition">+          matchLabels:</span>
<span class="hljs-addition">+            app: proxy</span>
<span class="hljs-addition">+      initContainers:</span>
<span class="hljs-addition">+      - name: copy-static-content</span>
<span class="hljs-addition">+        image: quay.io/konflux-ci/konflux-ui@sha256:4d638ff6ed4874de0406b200e671ebac72b3f03c4d46b92f02bf62809c1cbed3</span>
<span class="hljs-addition">+        command:</span>
<span class="hljs-addition">+          - cp</span>
<span class="hljs-addition">+          - -R</span>
<span class="hljs-addition">+          - /opt/app-root/src/.</span>
<span class="hljs-addition">+          - /mnt/static-content/</span>
<span class="hljs-addition">+        volumeMounts:</span>
<span class="hljs-addition">+        - name: static-content</span>
<span class="hljs-addition">+          mountPath: /mnt/static-content</span>
<span class="hljs-addition">+        securityContext:</span>
<span class="hljs-addition">+          readOnlyRootFilesystem: true</span>
<span class="hljs-addition">+          runAsNonRoot: true</span>
<span class="hljs-addition">+          runAsUser: 1001</span>
<span class="hljs-addition">+        resources:</span>
<span class="hljs-addition">+          limits:</span>
<span class="hljs-addition">+            cpu: 50m</span>
<span class="hljs-addition">+            memory: 128Mi</span>
<span class="hljs-addition">+          requests:</span>
<span class="hljs-addition">+            cpu: 10m</span>
<span class="hljs-addition">+            memory: 64Mi</span>
<span class="hljs-addition">+      - name: add-sva-token-to-nginx-config</span>
<span class="hljs-addition">+        image: registry.access.redhat.com/ubi9/ubi@sha256:66233eebd72bb5baa25190d4f55e1dc3fff3a9b77186c1f91a0abdb274452072</span>
<span class="hljs-addition">+        command:</span>
<span class="hljs-addition">+          - sh</span>
<span class="hljs-addition">+          - -c</span>
<span class="hljs-addition">+          - |</span>
<span class="hljs-addition">+            set -e</span>
<span class="hljs-addition">+            </span>
<span class="hljs-addition">+            token=$(cat /mnt/api-token/token)</span>
<span class="hljs-addition">+            token64=$(cat /mnt/api-token/token | base64 -w 0 | head -c-1)</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+            echo &quot;proxy_set_header Authorization \&quot;Bearer $token\&quot;;&quot; &gt; /mnt/nginx-generated-config/bearer.conf</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+            echo &quot;proxy_set_header Sec-WebSocket-Protocol \&quot;base64url.bearer.authorization.k8s.io.${token64}, base64.binary.k8s.io\&quot;;&quot; &gt; /mnt/nginx-generated-config/websocket.conf</span>
<span class="hljs-addition">+        volumeMounts:</span>
<span class="hljs-addition">+        - name: nginx-generated-config</span>
<span class="hljs-addition">+          mountPath: /mnt/nginx-generated-config</span>
<span class="hljs-addition">+        - name: api-token</span>
<span class="hljs-addition">+          mountPath: /mnt/api-token</span>
<span class="hljs-addition">+        securityContext:</span>
<span class="hljs-addition">+          readOnlyRootFilesystem: true</span>
<span class="hljs-addition">+          runAsNonRoot: true</span>
<span class="hljs-addition">+          runAsUser: 1001</span>
<span class="hljs-addition">+        resources:</span>
<span class="hljs-addition">+          limits:</span>
<span class="hljs-addition">+            cpu: 50m</span>
<span class="hljs-addition">+            memory: 128Mi</span>
<span class="hljs-addition">+          requests:</span>
<span class="hljs-addition">+            cpu: 10m</span>
<span class="hljs-addition">+            memory: 64Mi</span>
<span class="hljs-addition">+      containers:</span>
<span class="hljs-addition">+      - image: openresty/openresty:1.25.3.1-0-jammy</span>
<span class="hljs-addition">+        name: nginx-120</span>
<span class="hljs-addition">+        command: </span>
<span class="hljs-addition">+          - &quot;/usr/local/openresty/bin/openresty&quot;</span>
<span class="hljs-addition">+          - &quot;-g&quot;</span>
<span class="hljs-addition">+          - &quot;daemon off;&quot;</span>
<span class="hljs-addition">+          - -c</span>
<span class="hljs-addition">+          - /etc/nginx/nginx.conf</span>
<span class="hljs-addition">+        livenessProbe:</span>
<span class="hljs-addition">+          failureThreshold: 3</span>
<span class="hljs-addition">+          httpGet:</span>
<span class="hljs-addition">+            path: /health</span>
<span class="hljs-addition">+            port: 9443</span>
<span class="hljs-addition">+            scheme: HTTPS</span>
<span class="hljs-addition">+          initialDelaySeconds: 30</span>
<span class="hljs-addition">+          periodSeconds: 60</span>
<span class="hljs-addition">+          successThreshold: 1</span>
<span class="hljs-addition">+          timeoutSeconds: 1</span>
<span class="hljs-addition">+        readinessProbe:</span>
<span class="hljs-addition">+          failureThreshold: 3</span>
<span class="hljs-addition">+          httpGet:</span>
<span class="hljs-addition">+            path: /health</span>
<span class="hljs-addition">+            port: 9443</span>
<span class="hljs-addition">+            scheme: HTTPS</span>
<span class="hljs-addition">+          initialDelaySeconds: 30</span>
<span class="hljs-addition">+          periodSeconds: 30</span>
<span class="hljs-addition">+          successThreshold: 1</span>
<span class="hljs-addition">+          timeoutSeconds: 1</span>
<span class="hljs-addition">+        ports:</span>
<span class="hljs-addition">+        - containerPort: 8080</span>
<span class="hljs-addition">+          name: web</span>
<span class="hljs-addition">+          protocol: TCP</span>
<span class="hljs-addition">+        - containerPort: 9443</span>
<span class="hljs-addition">+          name: web-tls</span>
<span class="hljs-addition">+          protocol: TCP</span>
<span class="hljs-addition">+        resources:</span>
<span class="hljs-addition">+          limits:</span>
<span class="hljs-addition">+            cpu: 300m</span>
<span class="hljs-addition">+            memory: 256Mi</span>
<span class="hljs-addition">+          requests:</span>
<span class="hljs-addition">+            cpu: 30m</span>
<span class="hljs-addition">+            memory: 128Mi</span>
<span class="hljs-addition">+        volumeMounts:</span>
<span class="hljs-addition">+          - mountPath: /etc/nginx/nginx.conf</span>
<span class="hljs-addition">+            subPath: nginx.conf</span>
<span class="hljs-addition">+            name: proxy</span>
<span class="hljs-addition">+            readOnly: true</span>
<span class="hljs-addition">+          - name: logs</span>
<span class="hljs-addition">+            mountPath: /var/log/nginx</span>
<span class="hljs-addition">+          - name: nginx-tmp</span>
<span class="hljs-addition">+            mountPath: /var/lib/nginx/tmp</span>
<span class="hljs-addition">+          - name: run</span>
<span class="hljs-addition">+            mountPath: /run</span>
<span class="hljs-addition">+          - name: serving-cert</span>
<span class="hljs-addition">+            mountPath: /mnt</span>
<span class="hljs-addition">+          - name: nginx-generated-config</span>
<span class="hljs-addition">+            mountPath: /mnt/nginx-generated-config</span>
<span class="hljs-addition">+          - name: openresty</span>
<span class="hljs-addition">+            mountPath: /var/run/openresty</span>
<span class="hljs-addition">+          - name: static-content</span>
<span class="hljs-addition">+            mountPath: /opt/app-root/src/static-content</span>
<span class="hljs-addition">+        securityContext:</span>
<span class="hljs-addition">+          readOnlyRootFilesystem: true</span>
<span class="hljs-addition">+          runAsNonRoot: true</span>
<span class="hljs-addition">+          runAsUser: 1001</span>
<span class="hljs-addition">+      - image: quay.io/konflux-ci/workspace-manager@sha256:6b7bfcf197cbff2ae9b1d84abd73636ce5733921524fb550438d8a8143a536b5</span>
<span class="hljs-addition">+        name: workspace-manager</span>
<span class="hljs-addition">+        ports:</span>
<span class="hljs-addition">+          - containerPort: 5000</span>
<span class="hljs-addition">+            name: web</span>
<span class="hljs-addition">+            protocol: TCP</span>
<span class="hljs-addition">+        resources:</span>
<span class="hljs-addition">+          limits:</span>
<span class="hljs-addition">+            cpu: 300m</span>
<span class="hljs-addition">+            memory: 256Mi</span>
<span class="hljs-addition">+          requests:</span>
<span class="hljs-addition">+            cpu: 30m</span>
<span class="hljs-addition">+            memory: 128Mi</span>
<span class="hljs-addition">+        securityContext:</span>
<span class="hljs-addition">+          readOnlyRootFilesystem: true</span>
<span class="hljs-addition">+          runAsNonRoot: true</span>
<span class="hljs-addition">+          runAsUser: 1001</span>
<span class="hljs-addition">+      - image: quay.io/oauth2-proxy/oauth2-proxy@sha256:3da33b9670c67bd782277f99acadf7026f75b9507bfba2088eb2d497266ef7fc</span>
<span class="hljs-addition">+        name: oauth2-proxy</span>
<span class="hljs-addition">+        env:</span>
<span class="hljs-addition">+        - name: OAUTH2_PROXY_CLIENT_SECRET</span>
<span class="hljs-addition">+          valueFrom:</span>
<span class="hljs-addition">+            secretKeyRef:</span>
<span class="hljs-addition">+              name: oauth2-proxy-client-secret</span>
<span class="hljs-addition">+              key: client-secret</span>
<span class="hljs-addition">+        - name: OAUTH2_PROXY_COOKIE_SECRET</span>
<span class="hljs-addition">+          valueFrom:</span>
<span class="hljs-addition">+            secretKeyRef:</span>
<span class="hljs-addition">+              name: oauth2-proxy-cookie-secret</span>
<span class="hljs-addition">+              key: cookie-secret</span>
<span class="hljs-addition">+        args:</span>
<span class="hljs-addition">+          - to be replaced by a patch</span>
<span class="hljs-addition">+        ports:</span>
<span class="hljs-addition">+          - containerPort: 6000</span>
<span class="hljs-addition">+            name: web</span>
<span class="hljs-addition">+            protocol: TCP</span>
<span class="hljs-addition">+        resources:</span>
<span class="hljs-addition">+          limits:</span>
<span class="hljs-addition">+            cpu: 300m</span>
<span class="hljs-addition">+            memory: 256Mi</span>
<span class="hljs-addition">+          requests:</span>
<span class="hljs-addition">+            cpu: 30m</span>
<span class="hljs-addition">+            memory: 128Mi</span>
<span class="hljs-addition">+        securityContext:</span>
<span class="hljs-addition">+          readOnlyRootFilesystem: true</span>
<span class="hljs-addition">+          runAsNonRoot: true</span>
<span class="hljs-addition">+          runAsUser: 1001</span>
<span class="hljs-addition">+      volumes:</span>
<span class="hljs-addition">+        - configMap:</span>
<span class="hljs-addition">+            defaultMode: 420</span>
<span class="hljs-addition">+            name: proxy</span>
<span class="hljs-addition">+            items:</span>
<span class="hljs-addition">+              - key: nginx.conf</span>
<span class="hljs-addition">+                path: nginx.conf </span>
<span class="hljs-addition">+          name: proxy</span>
<span class="hljs-addition">+        - name: logs</span>
<span class="hljs-addition">+          emptyDir: {}</span>
<span class="hljs-addition">+        - name: nginx-tmp</span>
<span class="hljs-addition">+          emptyDir: {}</span>
<span class="hljs-addition">+        - name: run</span>
<span class="hljs-addition">+          emptyDir: {}</span>
<span class="hljs-addition">+        - name: serving-cert</span>
<span class="hljs-addition">+          secret:</span>
<span class="hljs-addition">+            secretName: serving-cert</span>
<span class="hljs-addition">+        - name: nginx-generated-config</span>
<span class="hljs-addition">+          emptyDir: {}</span>
<span class="hljs-addition">+        - name: api-token</span>
<span class="hljs-addition">+          secret:</span>
<span class="hljs-addition">+            secretName: proxy</span>
<span class="hljs-addition">+        - name: openresty</span>
<span class="hljs-addition">+          emptyDir: {}</span>
<span class="hljs-addition">+        - name: static-content</span>
<span class="hljs-addition">+          emptyDir: {}</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: v1</span>
<span class="hljs-addition">+kind: Service</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  labels:</span>
<span class="hljs-addition">+    app: proxy</span>
<span class="hljs-addition">+  name: proxy</span>
<span class="hljs-addition">+spec:</span>
<span class="hljs-addition">+  type: ClusterIP</span>
<span class="hljs-addition">+  internalTrafficPolicy: Cluster</span>
<span class="hljs-addition">+  ipFamilies:</span>
<span class="hljs-addition">+    - IPv4</span>
<span class="hljs-addition">+  ipFamilyPolicy: SingleStack</span>
<span class="hljs-addition">+  ports:</span>
<span class="hljs-addition">+    - name: web</span>
<span class="hljs-addition">+      port: 8888</span>
<span class="hljs-addition">+      protocol: TCP</span>
<span class="hljs-addition">+      targetPort: web</span>
<span class="hljs-addition">+    - name: web-tls</span>
<span class="hljs-addition">+      port: 9443</span>
<span class="hljs-addition">+      protocol: TCP</span>
<span class="hljs-addition">+      targetPort: web-tls</span>
<span class="hljs-addition">+  selector:</span>
<span class="hljs-addition">+    app: proxy</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: v1</span>
<span class="hljs-addition">+kind: ServiceAccount</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: proxy</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: v1</span>
<span class="hljs-addition">+kind: Secret</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: proxy</span>
<span class="hljs-addition">+  annotations:</span>
<span class="hljs-addition">+    kubernetes.io/service-account.name: proxy</span>
<span class="hljs-addition">+type: kubernetes.io/service-account-token</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: rbac.authorization.k8s.io/v1</span>
<span class="hljs-addition">+kind: ClusterRole</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: konflux-proxy</span>
<span class="hljs-addition">+rules:</span>
<span class="hljs-addition">+- apiGroups: [&quot;&quot;]</span>
<span class="hljs-addition">+  resources: [&quot;users&quot;]</span>
<span class="hljs-addition">+  verbs: [&quot;impersonate&quot;]</span>
<span class="hljs-addition">+- apiGroups: [&quot;authorization.k8s.io&quot;]</span>
<span class="hljs-addition">+  resources: [&quot;localsubjectaccessreviews&quot;]</span>
<span class="hljs-addition">+  verbs: [&quot;create&quot;]</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: rbac.authorization.k8s.io/v1</span>
<span class="hljs-addition">+kind: ClusterRoleBinding</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: konflux-proxy</span>
<span class="hljs-addition">+roleRef:</span>
<span class="hljs-addition">+  apiGroup: rbac.authorization.k8s.io</span>
<span class="hljs-addition">+  kind: ClusterRole</span>
<span class="hljs-addition">+  name: konflux-proxy</span>
<span class="hljs-addition">+subjects:</span>
<span class="hljs-addition">+- kind: ServiceAccount</span>
<span class="hljs-addition">+  name: proxy</span>
<span class="hljs-addition">+  namespace: konflux-ui</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: rbac.authorization.k8s.io/v1</span>
<span class="hljs-addition">+kind: ClusterRole</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: konflux-proxy-namespace-lister</span>
<span class="hljs-addition">+rules:</span>
<span class="hljs-addition">+- apiGroups: [&quot;&quot;]</span>
<span class="hljs-addition">+  resources: [&quot;namespaces&quot;]</span>
<span class="hljs-addition">+  verbs: [&quot;list&quot;, &quot;get&quot;]</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: rbac.authorization.k8s.io/v1</span>
<span class="hljs-addition">+kind: ClusterRoleBinding</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: konflux-proxy-namespace-lister</span>
<span class="hljs-addition">+roleRef:</span>
<span class="hljs-addition">+  apiGroup: rbac.authorization.k8s.io</span>
<span class="hljs-addition">+  kind: ClusterRole</span>
<span class="hljs-addition">+  name: konflux-proxy-namespace-lister</span>
<span class="hljs-addition">+subjects:</span>
<span class="hljs-addition">+- kind: ServiceAccount</span>
<span class="hljs-addition">+  name: proxy</span>
<span class="hljs-addition">+  namespace: konflux-ui</span>
<span class="hljs-comment">diff --git a/components/konflux-ui/staging/base/route-and-oauth.yaml b/components/konflux-ui/staging/base/route-and-oauth.yaml</span>
new file mode 100644
<span class="hljs-comment">index 00000000..89ec448f</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/components/konflux-ui/staging/base/route-and-oauth.yaml</span>
<span class="hljs-meta">@@ -0,0 +1,52 @@</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: route.openshift.io/v1</span>
<span class="hljs-addition">+kind: Route</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: konflux</span>
<span class="hljs-addition">+  annotations:</span>
<span class="hljs-addition">+    # Needed for running a local development env for the Konflux UI</span>
<span class="hljs-addition">+    haproxy.router.openshift.io/set-forwarded-headers: if-none</span>
<span class="hljs-addition">+spec:</span>
<span class="hljs-addition">+  host: tba</span>
<span class="hljs-addition">+  path: /</span>
<span class="hljs-addition">+  port:</span>
<span class="hljs-addition">+    targetPort: web-tls</span>
<span class="hljs-addition">+  tls:</span>
<span class="hljs-addition">+    insecureEdgeTerminationPolicy: Redirect</span>
<span class="hljs-addition">+    termination: reencrypt</span>
<span class="hljs-addition">+  to:</span>
<span class="hljs-addition">+    kind: Service</span>
<span class="hljs-addition">+    name: proxy</span>
<span class="hljs-addition">+    weight: 100</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: route.openshift.io/v1</span>
<span class="hljs-addition">+kind: Route</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: konflux-idp</span>
<span class="hljs-addition">+spec:</span>
<span class="hljs-addition">+  host: tba</span>
<span class="hljs-addition">+  path: /idp</span>
<span class="hljs-addition">+  port:</span>
<span class="hljs-addition">+    targetPort: dex</span>
<span class="hljs-addition">+  tls:</span>
<span class="hljs-addition">+    insecureEdgeTerminationPolicy: Redirect</span>
<span class="hljs-addition">+    termination: reencrypt</span>
<span class="hljs-addition">+  to:</span>
<span class="hljs-addition">+    kind: Service</span>
<span class="hljs-addition">+    name: dex</span>
<span class="hljs-addition">+    weight: 100</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+kind: ServiceAccount</span>
<span class="hljs-addition">+apiVersion: v1</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: dex-client</span>
<span class="hljs-addition">+  annotations:</span>
<span class="hljs-addition">+    serviceaccounts.openshift.io/oauth-redirecturi.konflux: tba</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+kind: Secret</span>
<span class="hljs-addition">+apiVersion: v1</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: dex-client</span>
<span class="hljs-addition">+  annotations:</span>
<span class="hljs-addition">+    kubernetes.io/service-account.name: dex-client</span>
<span class="hljs-addition">+type: kubernetes.io/service-account-token</span>
<span class="hljs-comment">diff --git a/components/konflux-ui/staging/stone-stg-rh01/add-service-certs-patch.yaml b/components/konflux-ui/staging/stone-stg-rh01/add-service-certs-patch.yaml</span>
new file mode 100644
<span class="hljs-comment">index 00000000..b636793b</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/components/konflux-ui/staging/stone-stg-rh01/add-service-certs-patch.yaml</span>
<span class="hljs-meta">@@ -0,0 +1,4 @@</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+- op: add</span>
<span class="hljs-addition">+  path: /metadata/annotations/service.beta.openshift.io~1serving-cert-secret-name</span>
<span class="hljs-addition">+  value: serving-cert</span>
<span class="hljs-comment">diff --git a/components/konflux-ui/staging/stone-stg-rh01/dex-config.yaml b/components/konflux-ui/staging/stone-stg-rh01/dex-config.yaml</span>
new file mode 100644
<span class="hljs-comment">index 00000000..0a61fd09</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/components/konflux-ui/staging/stone-stg-rh01/dex-config.yaml</span>
<span class="hljs-meta">@@ -0,0 +1,34 @@</span>
<span class="hljs-addition">+issuer: https://konflux-ui.apps.stone-stg-rh01.l2vh.p1.openshiftapps.com/idp</span>
<span class="hljs-addition">+storage:</span>
<span class="hljs-addition">+  type: kubernetes</span>
<span class="hljs-addition">+  config:</span>
<span class="hljs-addition">+    inCluster: true</span>
<span class="hljs-addition">+web:</span>
<span class="hljs-addition">+  https: 0.0.0.0:9443</span>
<span class="hljs-addition">+  tlsCert: /etc/dex/tls/tls.crt</span>
<span class="hljs-addition">+  tlsKey: /etc/dex/tls/tls.key</span>
<span class="hljs-addition">+oauth2:</span>
<span class="hljs-addition">+  skipApprovalScreen: true</span>
<span class="hljs-addition">+staticClients:</span>
<span class="hljs-addition">+- id: oauth2-proxy</span>
<span class="hljs-addition">+  redirectURIs:</span>
<span class="hljs-addition">+  - https://konflux-ui.apps.stone-stg-rh01.l2vh.p1.openshiftapps.com/oauth2/callback</span>
<span class="hljs-addition">+  # required for using dex from a UI instance run locally</span>
<span class="hljs-addition">+  - https://localhost:8080/oauth2/callback</span>
<span class="hljs-addition">+  name: &#x27;oauth2-proxy&#x27;</span>
<span class="hljs-addition">+  secretEnv: &#x27;OAUTH2_CLIENT_SECRET&#x27;</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+telemetry:</span>
<span class="hljs-addition">+  http: 0.0.0.0:5558</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+connectors:</span>
<span class="hljs-addition">+  - type: openshift</span>
<span class="hljs-addition">+    id: openshift</span>
<span class="hljs-addition">+    name: OpenShift</span>
<span class="hljs-addition">+    config:</span>
<span class="hljs-addition">+      # OpenShift API</span>
<span class="hljs-addition">+      issuer: https://api.stone-stg-rh01.l2vh.p1.openshiftapps.com:6443</span>
<span class="hljs-addition">+      # Credentials can be string literals or pulled from the environment.</span>
<span class="hljs-addition">+      clientID: system:serviceaccount:konflux-ui:dex-client</span>
<span class="hljs-addition">+      clientSecret: $OPENSHIFT_OAUTH_CLIENT_SECRET</span>
<span class="hljs-addition">+      redirectURI: https://konflux-ui.apps.stone-stg-rh01.l2vh.p1.openshiftapps.com/idp/callback</span>
<span class="hljs-comment">diff --git a/components/konflux-ui/staging/stone-stg-rh01/kustomization.yaml b/components/konflux-ui/staging/stone-stg-rh01/kustomization.yaml</span>
new file mode 100644
<span class="hljs-comment">index 00000000..149cbc6c</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/components/konflux-ui/staging/stone-stg-rh01/kustomization.yaml</span>
<span class="hljs-meta">@@ -0,0 +1,44 @@</span>
<span class="hljs-addition">+apiVersion: kustomize.config.k8s.io/v1beta1</span>
<span class="hljs-addition">+kind: Kustomization</span>
<span class="hljs-addition">+resources:</span>
<span class="hljs-addition">+  - ../base</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+configMapGenerator:</span>
<span class="hljs-addition">+  - name: dex</span>
<span class="hljs-addition">+    files:</span>
<span class="hljs-addition">+      - dex-config.yaml</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+patches:</span>
<span class="hljs-addition">+  - path: add-service-certs-patch.yaml</span>
<span class="hljs-addition">+    target:</span>
<span class="hljs-addition">+      group: &quot;&quot;</span>
<span class="hljs-addition">+      version: v1</span>
<span class="hljs-addition">+      kind: Service</span>
<span class="hljs-addition">+      name: proxy</span>
<span class="hljs-addition">+  - path: oauth2-proxy-args-patch.yaml</span>
<span class="hljs-addition">+    target:</span>
<span class="hljs-addition">+      group: apps</span>
<span class="hljs-addition">+      version: v1</span>
<span class="hljs-addition">+      kind: Deployment</span>
<span class="hljs-addition">+      name: proxy</span>
<span class="hljs-addition">+  - path: remove-run-as-user-proxy-patch.yaml</span>
<span class="hljs-addition">+    target:</span>
<span class="hljs-addition">+      group: apps</span>
<span class="hljs-addition">+      version: v1</span>
<span class="hljs-addition">+      kind: Deployment</span>
<span class="hljs-addition">+      name: proxy</span>
<span class="hljs-addition">+  - path: set-replicas-patch.yaml</span>
<span class="hljs-addition">+    target:</span>
<span class="hljs-addition">+      group: apps</span>
<span class="hljs-addition">+      version: v1</span>
<span class="hljs-addition">+      kind: Deployment</span>
<span class="hljs-addition">+  - path: set-redirect-uri.yaml</span>
<span class="hljs-addition">+    target:</span>
<span class="hljs-addition">+      name: dex-client</span>
<span class="hljs-addition">+      kind: ServiceAccount</span>
<span class="hljs-addition">+  - path: set-hostname.yaml</span>
<span class="hljs-addition">+    target:</span>
<span class="hljs-addition">+      kind: Route</span>
<span class="hljs-addition">+      version: v1</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+namespace: konflux-ui</span>
<span class="hljs-comment">diff --git a/components/konflux-ui/staging/stone-stg-rh01/oauth2-proxy-args-patch.yaml b/components/konflux-ui/staging/stone-stg-rh01/oauth2-proxy-args-patch.yaml</span>
new file mode 100644
<span class="hljs-comment">index 00000000..27f53739</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/components/konflux-ui/staging/stone-stg-rh01/oauth2-proxy-args-patch.yaml</span>
<span class="hljs-meta">@@ -0,0 +1,35 @@</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+- op: replace</span>
<span class="hljs-addition">+  path: /spec/template/spec/containers/2/args</span>
<span class="hljs-addition">+  value:</span>
<span class="hljs-addition">+    - --provider</span>
<span class="hljs-addition">+    - oidc</span>
<span class="hljs-addition">+    - --provider-display-name</span>
<span class="hljs-addition">+    - &quot;Dex&quot;</span>
<span class="hljs-addition">+    - --client-id</span>
<span class="hljs-addition">+    - oauth2-proxy</span>
<span class="hljs-addition">+    - --http-address</span>
<span class="hljs-addition">+    - &quot;127.0.0.1:6000&quot;</span>
<span class="hljs-addition">+  # We use relative redirect URI and the reverse-proxy flag to support </span>
<span class="hljs-addition">+  # setting the host using the X-Forwarded-Host header. This is needed</span>
<span class="hljs-addition">+  # when running a UI instance locally that should connect to a remote</span>
<span class="hljs-addition">+  # cluster.</span>
<span class="hljs-addition">+    - --redirect-url</span>
<span class="hljs-addition">+    - /oauth2/callback</span>
<span class="hljs-addition">+    - --reverse-proxy</span>
<span class="hljs-addition">+    - &quot;true&quot;</span>
<span class="hljs-addition">+    - --oidc-issuer-url</span>
<span class="hljs-addition">+    - https://konflux-ui.apps.stone-stg-rh01.l2vh.p1.openshiftapps.com/idp</span>
<span class="hljs-addition">+    - &quot;true&quot;</span>
<span class="hljs-addition">+    - --cookie-name</span>
<span class="hljs-addition">+    - __Host-konflux-ci-cookie</span>
<span class="hljs-addition">+    - --email-domain</span>
<span class="hljs-addition">+    - &quot;*&quot;</span>
<span class="hljs-addition">+    - --insecure-oidc-allow-unverified-email</span>
<span class="hljs-addition">+    - &quot;true&quot;</span>
<span class="hljs-addition">+    - --set-xauthrequest</span>
<span class="hljs-addition">+    - &quot;true&quot;</span>
<span class="hljs-addition">+    - --whitelist-domain</span>
<span class="hljs-addition">+    - localhost:9443</span>
<span class="hljs-addition">+    - --whitelist-domain</span>
<span class="hljs-addition">+    - konflux-ui.apps.stone-stg-rh01.l2vh.p1.openshiftapps.com</span>
<span class="hljs-comment">diff --git a/components/konflux-ui/staging/stone-stg-rh01/remove-run-as-user-proxy-patch.yaml b/components/konflux-ui/staging/stone-stg-rh01/remove-run-as-user-proxy-patch.yaml</span>
new file mode 100644
<span class="hljs-comment">index 00000000..a8939cef</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/components/konflux-ui/staging/stone-stg-rh01/remove-run-as-user-proxy-patch.yaml</span>
<span class="hljs-meta">@@ -0,0 +1,15 @@</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+- op: remove</span>
<span class="hljs-addition">+  path: /spec/template/spec/initContainers/0/securityContext/runAsUser</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+- op: remove</span>
<span class="hljs-addition">+  path: /spec/template/spec/initContainers/1/securityContext/runAsUser</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+- op: remove</span>
<span class="hljs-addition">+  path: /spec/template/spec/containers/0/securityContext/runAsUser</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+- op: remove</span>
<span class="hljs-addition">+  path: /spec/template/spec/containers/1/securityContext/runAsUser</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+- op: remove</span>
<span class="hljs-addition">+  path: /spec/template/spec/containers/2/securityContext/runAsUser</span>
<span class="hljs-comment">diff --git a/components/konflux-ui/staging/stone-stg-rh01/set-hostname.yaml b/components/konflux-ui/staging/stone-stg-rh01/set-hostname.yaml</span>
new file mode 100644
<span class="hljs-comment">index 00000000..59753bcc</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/components/konflux-ui/staging/stone-stg-rh01/set-hostname.yaml</span>
<span class="hljs-meta">@@ -0,0 +1,4 @@</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+- op: add</span>
<span class="hljs-addition">+  path: /spec/host</span>
<span class="hljs-addition">+  value: konflux-ui.apps.stone-stg-rh01.l2vh.p1.openshiftapps.com</span>
<span class="hljs-comment">diff --git a/components/konflux-ui/staging/stone-stg-rh01/set-redirect-uri.yaml b/components/konflux-ui/staging/stone-stg-rh01/set-redirect-uri.yaml</span>
new file mode 100644
<span class="hljs-comment">index 00000000..e6ea9d25</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/components/konflux-ui/staging/stone-stg-rh01/set-redirect-uri.yaml</span>
<span class="hljs-meta">@@ -0,0 +1,4 @@</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+- op: add</span>
<span class="hljs-addition">+  path: /metadata/annotations/serviceaccounts.openshift.io~1oauth-redirecturi.konflux</span>
<span class="hljs-addition">+  value: https://konflux-ui.apps.stone-stg-rh01.l2vh.p1.openshiftapps.com/idp/callback</span>
<span class="hljs-comment">diff --git a/components/konflux-ui/staging/stone-stg-rh01/set-replicas-patch.yaml b/components/konflux-ui/staging/stone-stg-rh01/set-replicas-patch.yaml</span>
new file mode 100644
<span class="hljs-comment">index 00000000..e044d9c7</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/components/konflux-ui/staging/stone-stg-rh01/set-replicas-patch.yaml</span>
<span class="hljs-meta">@@ -0,0 +1,4 @@</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+- op: add</span>
<span class="hljs-addition">+  path: /spec/replicas</span>
<span class="hljs-addition">+  value: 3 </span>
</code></pre>

</details> 

<details> 
<summary>Kustomize Generated Diff (1 lines)</summary>  
<pre><code>  ./commit-d8033565/staging/components: konflux-ui 
</code></pre>

</details>  

<details> 
<summary>Lint</summary>  
<pre><code>  <span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found! 
</code></pre>

</details> 
<br> 


</div>
<div>
<h3>3: Development changes from eebcbd6c to d8033565 on Mon Nov 25 12:00:54 2024 </h3>  

<details> 
<summary>Git Diff (1063 lines)</summary>  
<pre><code>  <span class="hljs-comment">diff --git a/argo-cd-apps/base/member/infra-deployments/konflux-ui/README b/argo-cd-apps/base/member/infra-deployments/konflux-ui/README</span>
new file mode 100644
<span class="hljs-comment">index 00000000..33918f24</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/argo-cd-apps/base/member/infra-deployments/konflux-ui/README</span>
@@ -0,0 +1 @@
<span class="hljs-addition">+The new UI for Konflux. It will replace the ui ArgoCD app in the future.</span>
<span class="hljs-comment">diff --git a/argo-cd-apps/base/member/infra-deployments/konflux-ui/konflux-ui.yaml b/argo-cd-apps/base/member/infra-deployments/konflux-ui/konflux-ui.yaml</span>
new file mode 100644
<span class="hljs-comment">index 00000000..a308ef33</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/argo-cd-apps/base/member/infra-deployments/konflux-ui/konflux-ui.yaml</span>
<span class="hljs-meta">@@ -0,0 +1,44 @@</span>
<span class="hljs-addition">+apiVersion: argoproj.io/v1alpha1</span>
<span class="hljs-addition">+kind: ApplicationSet</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: konflux-ui</span>
<span class="hljs-addition">+spec:</span>
<span class="hljs-addition">+  generators:</span>
<span class="hljs-addition">+    - merge:</span>
<span class="hljs-addition">+        mergeKeys:</span>
<span class="hljs-addition">+          - nameNormalized</span>
<span class="hljs-addition">+        generators:</span>
<span class="hljs-addition">+          - clusters:</span>
<span class="hljs-addition">+              values:</span>
<span class="hljs-addition">+                sourceRoot: components/konflux-ui</span>
<span class="hljs-addition">+                environment: staging</span>
<span class="hljs-addition">+                # This app must have cluster specific configurations</span>
<span class="hljs-addition">+                clusterDir: does-not-exist</span>
<span class="hljs-addition">+          - list:</span>
<span class="hljs-addition">+              elements:</span>
<span class="hljs-addition">+                - nameNormalized: stone-stg-rh01</span>
<span class="hljs-addition">+                  values.clusterDir: stone-stg-rh01</span>
<span class="hljs-addition">+  template:</span>
<span class="hljs-addition">+    metadata:</span>
<span class="hljs-addition">+      name: konflux-ui-{{nameNormalized}}</span>
<span class="hljs-addition">+    spec:</span>
<span class="hljs-addition">+      project: default</span>
<span class="hljs-addition">+      source:</span>
<span class="hljs-addition">+        path: &#x27;{{values.sourceRoot}}/{{values.environment}}/{{values.clusterDir}}&#x27;</span>
<span class="hljs-addition">+        repoURL: https://github.com/redhat-appstudio/infra-deployments.git</span>
<span class="hljs-addition">+        targetRevision: main</span>
<span class="hljs-addition">+      destination:</span>
<span class="hljs-addition">+        namespace: konflux-ui</span>
<span class="hljs-addition">+        server: &#x27;{{server}}&#x27;</span>
<span class="hljs-addition">+      syncPolicy:</span>
<span class="hljs-addition">+        automated:</span>
<span class="hljs-addition">+          prune: true</span>
<span class="hljs-addition">+          selfHeal: true</span>
<span class="hljs-addition">+        syncOptions:</span>
<span class="hljs-addition">+          - CreateNamespace=true</span>
<span class="hljs-addition">+        retry:</span>
<span class="hljs-addition">+          limit: -1</span>
<span class="hljs-addition">+          backoff:</span>
<span class="hljs-addition">+            duration: 10s</span>
<span class="hljs-addition">+            factor: 2</span>
<span class="hljs-addition">+            maxDuration: 3m</span>
<span class="hljs-comment">diff --git a/argo-cd-apps/base/member/infra-deployments/konflux-ui/kustomization.yaml b/argo-cd-apps/base/member/infra-deployments/konflux-ui/kustomization.yaml</span>
new file mode 100644
<span class="hljs-comment">index 00000000..fc85fb1f</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/argo-cd-apps/base/member/infra-deployments/konflux-ui/kustomization.yaml</span>
<span class="hljs-meta">@@ -0,0 +1,6 @@</span>
<span class="hljs-addition">+apiVersion: kustomize.config.k8s.io/v1beta1</span>
<span class="hljs-addition">+kind: Kustomization</span>
<span class="hljs-addition">+resources:</span>
<span class="hljs-addition">+- konflux-ui.yaml</span>
<span class="hljs-addition">+components:</span>
<span class="hljs-addition">+  - ../../../../k-components/deploy-to-member-cluster-merge-generator</span>
<span class="hljs-comment">diff --git a/argo-cd-apps/base/member/infra-deployments/kustomization.yaml b/argo-cd-apps/base/member/infra-deployments/kustomization.yaml</span>
<span class="hljs-comment">index e602a10d..0670efb0 100644</span>
<span class="hljs-comment">--- a/argo-cd-apps/base/member/infra-deployments/kustomization.yaml</span>
<span class="hljs-comment">+++ b/argo-cd-apps/base/member/infra-deployments/kustomization.yaml</span>
<span class="hljs-meta">@@ -26,5 +26,6 @@</span> resources:
   - proactive-scaler
   - knative-eventing
   - crossplane-control-plane
<span class="hljs-addition">+  - konflux-ui</span>
 components:
   - ../../../k-components/inject-infra-deployments-repo-details
<span class="hljs-comment">diff --git a/argo-cd-apps/overlays/development/delete-applications.yaml b/argo-cd-apps/overlays/development/delete-applications.yaml</span>
<span class="hljs-comment">index c8cf77ae..e32dc4fa 100644</span>
<span class="hljs-comment">--- a/argo-cd-apps/overlays/development/delete-applications.yaml</span>
<span class="hljs-comment">+++ b/argo-cd-apps/overlays/development/delete-applications.yaml</span>
<span class="hljs-meta">@@ -100,3 +100,9 @@</span> kind: ApplicationSet
 metadata:
   name: nvme-storage-configurator
 $patch: delete
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: argoproj.io/v1alpha1</span>
<span class="hljs-addition">+kind: ApplicationSet</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: konflux-ui</span>
<span class="hljs-addition">+$patch: delete</span>
<span class="hljs-comment">diff --git a/argo-cd-apps/overlays/konflux-public-production/delete-applications.yaml b/argo-cd-apps/overlays/konflux-public-production/delete-applications.yaml</span>
<span class="hljs-comment">index 281da6e7..d25bff5e 100644</span>
<span class="hljs-comment">--- a/argo-cd-apps/overlays/konflux-public-production/delete-applications.yaml</span>
<span class="hljs-comment">+++ b/argo-cd-apps/overlays/konflux-public-production/delete-applications.yaml</span>
<span class="hljs-meta">@@ -33,3 +33,9 @@</span> kind: ApplicationSet
 metadata:
   name: knative-eventing
 $patch: delete
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: argoproj.io/v1alpha1</span>
<span class="hljs-addition">+kind: ApplicationSet</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: konflux-ui</span>
<span class="hljs-addition">+$patch: delete</span>
<span class="hljs-comment">diff --git a/argo-cd-apps/overlays/production-downstream/delete-applications.yaml b/argo-cd-apps/overlays/production-downstream/delete-applications.yaml</span>
<span class="hljs-comment">index dbee992c..bbf7c2fe 100644</span>
<span class="hljs-comment">--- a/argo-cd-apps/overlays/production-downstream/delete-applications.yaml</span>
<span class="hljs-comment">+++ b/argo-cd-apps/overlays/production-downstream/delete-applications.yaml</span>
<span class="hljs-meta">@@ -57,3 +57,9 @@</span> kind: ApplicationSet
 metadata:
   name: knative-eventing
 $patch: delete
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: argoproj.io/v1alpha1</span>
<span class="hljs-addition">+kind: ApplicationSet</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: konflux-ui</span>
<span class="hljs-addition">+$patch: delete</span>
<span class="hljs-comment">diff --git a/argo-cd-apps/overlays/staging-downstream/delete-applications.yaml b/argo-cd-apps/overlays/staging-downstream/delete-applications.yaml</span>
<span class="hljs-comment">index 983e6b78..92920e9d 100644</span>
<span class="hljs-comment">--- a/argo-cd-apps/overlays/staging-downstream/delete-applications.yaml</span>
<span class="hljs-comment">+++ b/argo-cd-apps/overlays/staging-downstream/delete-applications.yaml</span>
<span class="hljs-meta">@@ -50,3 +50,9 @@</span> kind: ApplicationSet
 metadata:
   name: knative-eventing
 $patch: delete
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: argoproj.io/v1alpha1</span>
<span class="hljs-addition">+kind: ApplicationSet</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: konflux-ui</span>
<span class="hljs-addition">+$patch: delete</span>
<span class="hljs-comment">diff --git a/components/konflux-ui/base/ns.yaml b/components/konflux-ui/base/ns.yaml</span>
new file mode 100644
<span class="hljs-comment">index 00000000..5ca5a63a</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/components/konflux-ui/base/ns.yaml</span>
<span class="hljs-meta">@@ -0,0 +1,4 @@</span>
<span class="hljs-addition">+apiVersion: v1</span>
<span class="hljs-addition">+kind: Namespace</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: konflux-ui</span>
<span class="hljs-comment">diff --git a/components/konflux-ui/staging/base/dex/dex.yaml b/components/konflux-ui/staging/base/dex/dex.yaml</span>
new file mode 100644
<span class="hljs-comment">index 00000000..49371c8e</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/components/konflux-ui/staging/base/dex/dex.yaml</span>
<span class="hljs-meta">@@ -0,0 +1,126 @@</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: apps/v1</span>
<span class="hljs-addition">+kind: Deployment</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  labels:</span>
<span class="hljs-addition">+    app: dex</span>
<span class="hljs-addition">+  name: dex</span>
<span class="hljs-addition">+  annotations:</span>
<span class="hljs-addition">+    ignore-check.kube-linter.io/no-anti-affinity: &quot;Using topologySpreadConstraints&quot;</span>
<span class="hljs-addition">+spec:</span>
<span class="hljs-addition">+  replicas: 1</span>
<span class="hljs-addition">+  selector:</span>
<span class="hljs-addition">+    matchLabels:</span>
<span class="hljs-addition">+      app: dex</span>
<span class="hljs-addition">+  template:</span>
<span class="hljs-addition">+    metadata:</span>
<span class="hljs-addition">+      labels:</span>
<span class="hljs-addition">+        app: dex</span>
<span class="hljs-addition">+    spec:</span>
<span class="hljs-addition">+      serviceAccountName: dex</span>
<span class="hljs-addition">+      topologySpreadConstraints:</span>
<span class="hljs-addition">+      - maxSkew: 1</span>
<span class="hljs-addition">+        topologyKey: topology.kubernetes.io/zone</span>
<span class="hljs-addition">+        whenUnsatisfiable: ScheduleAnyway</span>
<span class="hljs-addition">+        labelSelector:</span>
<span class="hljs-addition">+          matchLabels:</span>
<span class="hljs-addition">+            app: dex</span>
<span class="hljs-addition">+      containers:</span>
<span class="hljs-addition">+      - image: ghcr.io/dexidp/dex:v2.32.0</span>
<span class="hljs-addition">+        name: dex</span>
<span class="hljs-addition">+        command: [&quot;/usr/local/bin/dex&quot;, &quot;serve&quot;, &quot;/etc/dex/cfg/config.yaml&quot;]</span>
<span class="hljs-addition">+        securityContext:</span>
<span class="hljs-addition">+          readOnlyRootFilesystem: true</span>
<span class="hljs-addition">+          runAsNonRoot: true</span>
<span class="hljs-addition">+        resources:</span>
<span class="hljs-addition">+          limits:</span>
<span class="hljs-addition">+            cpu: 100m</span>
<span class="hljs-addition">+            memory: 256Mi</span>
<span class="hljs-addition">+          requests:</span>
<span class="hljs-addition">+            cpu: 100m</span>
<span class="hljs-addition">+            memory: 256Mi</span>
<span class="hljs-addition">+        ports:</span>
<span class="hljs-addition">+        - name: https</span>
<span class="hljs-addition">+          containerPort: 9443</span>
<span class="hljs-addition">+        - name: telemetry</span>
<span class="hljs-addition">+          containerPort: 5558</span>
<span class="hljs-addition">+          protocol: TCP</span>
<span class="hljs-addition">+        volumeMounts:</span>
<span class="hljs-addition">+        - name: dex</span>
<span class="hljs-addition">+          mountPath: /etc/dex/cfg</span>
<span class="hljs-addition">+        - name: tls</span>
<span class="hljs-addition">+          mountPath: /etc/dex/tls</span>
<span class="hljs-addition">+        readinessProbe:</span>
<span class="hljs-addition">+          httpGet:</span>
<span class="hljs-addition">+            path: /healthz/ready</span>
<span class="hljs-addition">+            port: telemetry</span>
<span class="hljs-addition">+        env:</span>
<span class="hljs-addition">+        - name: OPENSHIFT_OAUTH_CLIENT_SECRET</span>
<span class="hljs-addition">+          valueFrom:</span>
<span class="hljs-addition">+            secretKeyRef:</span>
<span class="hljs-addition">+              name: dex-client</span>
<span class="hljs-addition">+              key: token</span>
<span class="hljs-addition">+        - name: OAUTH2_CLIENT_SECRET</span>
<span class="hljs-addition">+          valueFrom:</span>
<span class="hljs-addition">+            secretKeyRef:</span>
<span class="hljs-addition">+              name: oauth2-proxy-client-secret</span>
<span class="hljs-addition">+              key: client-secret</span>
<span class="hljs-addition">+      volumes:</span>
<span class="hljs-addition">+      - name: dex</span>
<span class="hljs-addition">+        configMap:</span>
<span class="hljs-addition">+          name: dex</span>
<span class="hljs-addition">+          defaultMode: 420</span>
<span class="hljs-addition">+          items:</span>
<span class="hljs-addition">+          - key: dex-config.yaml</span>
<span class="hljs-addition">+            path: config.yaml</span>
<span class="hljs-addition">+      - name: tls</span>
<span class="hljs-addition">+        secret:</span>
<span class="hljs-addition">+          secretName: dex-cert</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: v1</span>
<span class="hljs-addition">+kind: Service</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: dex</span>
<span class="hljs-addition">+  annotations:</span>
<span class="hljs-addition">+    service.beta.openshift.io/serving-cert-secret-name: dex-cert</span>
<span class="hljs-addition">+spec:</span>
<span class="hljs-addition">+  type: ClusterIP</span>
<span class="hljs-addition">+  ports:</span>
<span class="hljs-addition">+  - name: dex</span>
<span class="hljs-addition">+    port: 9443</span>
<span class="hljs-addition">+    protocol: TCP</span>
<span class="hljs-addition">+    targetPort: 9443</span>
<span class="hljs-addition">+  selector:</span>
<span class="hljs-addition">+    app: dex</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: v1</span>
<span class="hljs-addition">+kind: ServiceAccount</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  labels:</span>
<span class="hljs-addition">+    app: dex</span>
<span class="hljs-addition">+  name: dex</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: rbac.authorization.k8s.io/v1</span>
<span class="hljs-addition">+kind: ClusterRole</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: dex</span>
<span class="hljs-addition">+rules:</span>
<span class="hljs-addition">+- apiGroups: [&quot;dex.coreos.com&quot;] # API group created by dex</span>
<span class="hljs-addition">+  resources: [&quot;*&quot;]</span>
<span class="hljs-addition">+  verbs: [&quot;*&quot;]</span>
<span class="hljs-addition">+- apiGroups: [&quot;apiextensions.k8s.io&quot;]</span>
<span class="hljs-addition">+  resources: [&quot;customresourcedefinitions&quot;]</span>
<span class="hljs-addition">+  verbs: [&quot;create&quot;] # To manage its own resources, dex must be able to create customresourcedefinitions</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: rbac.authorization.k8s.io/v1</span>
<span class="hljs-addition">+kind: ClusterRoleBinding</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: dex</span>
<span class="hljs-addition">+roleRef:</span>
<span class="hljs-addition">+  apiGroup: rbac.authorization.k8s.io</span>
<span class="hljs-addition">+  kind: ClusterRole</span>
<span class="hljs-addition">+  name: dex</span>
<span class="hljs-addition">+subjects:</span>
<span class="hljs-addition">+- kind: ServiceAccount</span>
<span class="hljs-addition">+  name: dex           # Service account assigned to the dex pod, created above</span>
<span class="hljs-addition">+  namespace: konflux-ui  # The namespace dex is running in</span>
<span class="hljs-comment">diff --git a/components/konflux-ui/staging/base/dex/kustomization.yaml b/components/konflux-ui/staging/base/dex/kustomization.yaml</span>
new file mode 100644
<span class="hljs-comment">index 00000000..32291d23</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/components/konflux-ui/staging/base/dex/kustomization.yaml</span>
<span class="hljs-meta">@@ -0,0 +1,4 @@</span>
<span class="hljs-addition">+apiVersion: kustomize.config.k8s.io/v1beta1</span>
<span class="hljs-addition">+kind: Kustomization</span>
<span class="hljs-addition">+resources:</span>
<span class="hljs-addition">+  - dex.yaml</span>
<span class="hljs-comment">diff --git a/components/konflux-ui/staging/base/kustomization.yaml b/components/konflux-ui/staging/base/kustomization.yaml</span>
new file mode 100644
<span class="hljs-comment">index 00000000..b3770aab</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/components/konflux-ui/staging/base/kustomization.yaml</span>
<span class="hljs-meta">@@ -0,0 +1,15 @@</span>
<span class="hljs-addition">+apiVersion: kustomize.config.k8s.io/v1beta1</span>
<span class="hljs-addition">+kind: Kustomization</span>
<span class="hljs-addition">+resources:</span>
<span class="hljs-addition">+  - dex</span>
<span class="hljs-addition">+  - proxy</span>
<span class="hljs-addition">+  - route-and-oauth.yaml</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+images:</span>
<span class="hljs-addition">+  - name: quay.io/konflux-ci/workspace-manager</span>
<span class="hljs-addition">+    digest: sha256:0b32c063d9fbce1af4f851d7cf1f8bc0ad1eda06dafaa4ad2bd4a0d5fbba62c7</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+  - name: quay.io/konflux-ci/konflux-ui</span>
<span class="hljs-addition">+    digest: sha256:4d638ff6ed4874de0406b200e671ebac72b3f03c4d46b92f02bf62809c1cbed3</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+namespace: konflux-ui</span>
<span class="hljs-comment">diff --git a/components/konflux-ui/staging/base/proxy/kustomization.yaml b/components/konflux-ui/staging/base/proxy/kustomization.yaml</span>
new file mode 100644
<span class="hljs-comment">index 00000000..526e2783</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/components/konflux-ui/staging/base/proxy/kustomization.yaml</span>
<span class="hljs-meta">@@ -0,0 +1,9 @@</span>
<span class="hljs-addition">+kind: Kustomization</span>
<span class="hljs-addition">+apiVersion: kustomize.config.k8s.io/v1beta1</span>
<span class="hljs-addition">+resources:</span>
<span class="hljs-addition">+  - proxy.yaml</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+configMapGenerator:</span>
<span class="hljs-addition">+  - name: proxy</span>
<span class="hljs-addition">+    files:</span>
<span class="hljs-addition">+      - nginx.conf</span>
<span class="hljs-comment">diff --git a/components/konflux-ui/staging/base/proxy/nginx.conf b/components/konflux-ui/staging/base/proxy/nginx.conf</span>
new file mode 100644
<span class="hljs-comment">index 00000000..2223cf23</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/components/konflux-ui/staging/base/proxy/nginx.conf</span>
<span class="hljs-meta">@@ -0,0 +1,169 @@</span>
<span class="hljs-addition">+worker_processes auto;</span>
<span class="hljs-addition">+error_log /var/log/nginx/error.log;</span>
<span class="hljs-addition">+pid /run/nginx.pid;</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+# Load dynamic modules. See /usr/share/doc/nginx/README.dynamic.</span>
<span class="hljs-addition">+include /usr/share/nginx/modules/*.conf;</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+events {</span>
<span class="hljs-addition">+    worker_connections 1024;</span>
<span class="hljs-addition">+}</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+http {</span>
<span class="hljs-addition">+    log_format upstreamlog &#x27;[$time_local] $remote_addr - $remote_user - $server_name $host to: $proxy_host  $upstream_addr: $request $status upstream_response_time $upstream_response_time msec $msec request_time $request_time X-Forwarded-Host: $http_x_forwarded_host&#x27;;</span>
<span class="hljs-addition">+    access_log /dev/stderr upstreamlog;</span>
<span class="hljs-addition">+    error_log /dev/stderr;</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+    sendfile on;</span>
<span class="hljs-addition">+    tcp_nopush on;</span>
<span class="hljs-addition">+    tcp_nodelay on;</span>
<span class="hljs-addition">+    keepalive_timeout 65;</span>
<span class="hljs-addition">+    types_hash_max_size 4096;</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+    default_type application/octet-stream;</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+    client_body_temp_path /var/run/openresty/nginx-client-body;</span>
<span class="hljs-addition">+    proxy_temp_path       /var/run/openresty/nginx-proxy;</span>
<span class="hljs-addition">+    fastcgi_temp_path     /var/run/openresty/nginx-fastcgi;</span>
<span class="hljs-addition">+    uwsgi_temp_path       /var/run/openresty/nginx-uwsgi;</span>
<span class="hljs-addition">+    scgi_temp_path        /var/run/openresty/nginx-scgi;</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+    include /usr/local/openresty/nginx/conf/mime.types;</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+    map $http_upgrade $connection_upgrade {</span>
<span class="hljs-addition">+        default upgrade;</span>
<span class="hljs-addition">+        &#x27;&#x27; close;</span>
<span class="hljs-addition">+    }</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+    server {</span>
<span class="hljs-addition">+        listen 9443 ssl;</span>
<span class="hljs-addition">+        ssl_certificate /mnt/tls.crt;</span>
<span class="hljs-addition">+        ssl_certificate_key /mnt/tls.key;</span>
<span class="hljs-addition">+        server_name _;</span>
<span class="hljs-addition">+        root /opt/app-root/src;</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+        location / {</span>
<span class="hljs-addition">+            alias /opt/app-root/src/static-content/;</span>
<span class="hljs-addition">+            try_files $uri /index.html;</span>
<span class="hljs-addition">+        }</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+        location = /404.html {</span>
<span class="hljs-addition">+        }</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+        location = /oauth2/auth {</span>
<span class="hljs-addition">+            internal; </span>
<span class="hljs-addition">+            proxy_pass       http://127.0.0.1:6000;</span>
<span class="hljs-addition">+            proxy_set_header Host             $host;</span>
<span class="hljs-addition">+            proxy_set_header X-Real-IP        $remote_addr;</span>
<span class="hljs-addition">+            proxy_set_header X-Scheme         $scheme;</span>
<span class="hljs-addition">+            proxy_set_header X-Forwarded-Host $http_x_forwarded_host;</span>
<span class="hljs-addition">+            # nginx auth_request includes headers but not body</span>
<span class="hljs-addition">+            proxy_set_header Content-Length   &quot;&quot;;</span>
<span class="hljs-addition">+            proxy_pass_request_body           off;</span>
<span class="hljs-addition">+        }</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+        location /oauth2/ {</span>
<span class="hljs-addition">+            proxy_pass       http://127.0.0.1:6000/oauth2/;</span>
<span class="hljs-addition">+            proxy_set_header Host             $host;</span>
<span class="hljs-addition">+            proxy_set_header X-Real-IP        $remote_addr;</span>
<span class="hljs-addition">+            proxy_set_header X-Scheme         $scheme;</span>
<span class="hljs-addition">+            proxy_set_header X-Forwarded-Host $http_x_forwarded_host;</span>
<span class="hljs-addition">+        }</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+        location /api/k8s/registration/ {</span>
<span class="hljs-addition">+           # Registration Service registration endpoint</span>
<span class="hljs-addition">+            auth_request_set $email  $upstream_http_x_auth_request_email;</span>
<span class="hljs-addition">+            proxy_set_header X-Email $email;</span>
<span class="hljs-addition">+            auth_request_set $user  $upstream_http_x_auth_request_user;</span>
<span class="hljs-addition">+            proxy_set_header X-User  $user;</span>
<span class="hljs-addition">+            auth_request_set $username  $upstream_http_x_auth_request_preferred_username; </span>
<span class="hljs-addition">+            proxy_set_header X-Auth-Request-Preferred-Username $username;</span>
<span class="hljs-addition">+            auth_request_set $groups  $upstream_http_x_auth_request_groups;</span>
<span class="hljs-addition">+            proxy_set_header X-Auth-Request-Groups  $groups;    </span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+            auth_request /oauth2/auth;</span>
<span class="hljs-addition">+            proxy_pass http://127.0.0.1:5000/;</span>
<span class="hljs-addition">+        }</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+        location /api/k8s/apis/toolchain.dev.openshift.com/v1alpha1/workspaces {</span>
<span class="hljs-addition">+           # Registration Service workspaces endpoint</span>
<span class="hljs-addition">+            auth_request_set $email  $upstream_http_x_auth_request_email;</span>
<span class="hljs-addition">+            proxy_set_header X-Email $email;</span>
<span class="hljs-addition">+            auth_request_set $user  $upstream_http_x_auth_request_user;</span>
<span class="hljs-addition">+            proxy_set_header X-User  $user;</span>
<span class="hljs-addition">+            auth_request_set $username  $upstream_http_x_auth_request_preferred_username; </span>
<span class="hljs-addition">+            proxy_set_header X-Auth-Request-Preferred-Username $username;</span>
<span class="hljs-addition">+            auth_request_set $groups  $upstream_http_x_auth_request_groups;</span>
<span class="hljs-addition">+            proxy_set_header X-Auth-Request-Groups  $groups;</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+            auth_request /oauth2/auth;</span>
<span class="hljs-addition">+            proxy_pass http://127.0.0.1:5000/workspaces;</span>
<span class="hljs-addition">+        }</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+        location /api/k8s/workspaces/ {</span>
<span class="hljs-addition">+            # Kube-API</span>
<span class="hljs-addition">+            auth_request_set $email  $upstream_http_x_auth_request_email;</span>
<span class="hljs-addition">+            auth_request /oauth2/auth;</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+            rewrite /api/k8s/workspaces/.+?/(.+) /$1 break;</span>
<span class="hljs-addition">+            proxy_pass https://kubernetes.default.svc;</span>
<span class="hljs-addition">+            proxy_read_timeout 30m;</span>
<span class="hljs-addition">+            proxy_set_header Impersonate-User $email;</span>
<span class="hljs-addition">+            include /mnt/nginx-generated-config/bearer.conf;</span>
<span class="hljs-addition">+        }</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+        location /wss/k8s/workspaces/ {</span>
<span class="hljs-addition">+            # Kube-API</span>
<span class="hljs-addition">+            auth_request_set $email  $upstream_http_x_auth_request_email;</span>
<span class="hljs-addition">+            auth_request /oauth2/auth;</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+            rewrite /wss/k8s/workspaces/.+?/(.+) /$1 break;</span>
<span class="hljs-addition">+            proxy_pass https://kubernetes.default.svc/;</span>
<span class="hljs-addition">+            proxy_http_version 1.1;</span>
<span class="hljs-addition">+            proxy_set_header Upgrade $http_upgrade;</span>
<span class="hljs-addition">+            proxy_set_header Connection $connection_upgrade;</span>
<span class="hljs-addition">+            proxy_read_timeout 30m;</span>
<span class="hljs-addition">+            proxy_set_header Impersonate-User $email;</span>
<span class="hljs-addition">+            include /mnt/nginx-generated-config/websocket.conf;</span>
<span class="hljs-addition">+        }</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+        location /api/k8s/ {</span>
<span class="hljs-addition">+            # Kube-API</span>
<span class="hljs-addition">+            auth_request_set $email  $upstream_http_x_auth_request_email;</span>
<span class="hljs-addition">+            auth_request /oauth2/auth;</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+            proxy_pass https://kubernetes.default.svc/;</span>
<span class="hljs-addition">+            proxy_read_timeout 30m;</span>
<span class="hljs-addition">+            proxy_set_header Impersonate-User $email;</span>
<span class="hljs-addition">+            include /mnt/nginx-generated-config/bearer.conf;</span>
<span class="hljs-addition">+        }</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+        location /wss/k8s/ {</span>
<span class="hljs-addition">+            auth_request_set $email  $upstream_http_x_auth_request_email;</span>
<span class="hljs-addition">+            auth_request /oauth2/auth;</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+            proxy_http_version 1.1;</span>
<span class="hljs-addition">+            proxy_set_header Upgrade $http_upgrade;</span>
<span class="hljs-addition">+            proxy_set_header Connection $connection_upgrade;</span>
<span class="hljs-addition">+            proxy_read_timeout 30m;</span>
<span class="hljs-addition">+            proxy_set_header Impersonate-User $email;</span>
<span class="hljs-addition">+            include /mnt/nginx-generated-config/websocket.conf;</span>
<span class="hljs-addition">+        }</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+        location /api/k8s/plugins/tekton-results/workspaces/ {</span>
<span class="hljs-addition">+            auth_request_set $email  $upstream_http_x_auth_request_email;</span>
<span class="hljs-addition">+            auth_request /oauth2/auth;</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+            rewrite /api/k8s/plugins/tekton-results/workspaces/.+?/(.+) /$1 break;</span>
<span class="hljs-addition">+            proxy_pass https://tekton-results-api-service.tekton-results.svc.cluster.local:8080;</span>
<span class="hljs-addition">+            proxy_read_timeout 30m;</span>
<span class="hljs-addition">+            proxy_set_header Impersonate-User $email;</span>
<span class="hljs-addition">+            include /mnt/nginx-generated-config/bearer.conf;</span>
<span class="hljs-addition">+        }</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+        location /health {</span>
<span class="hljs-addition">+            # Used for liveness probes</span>
<span class="hljs-addition">+            return 200;</span>
<span class="hljs-addition">+        }</span>
<span class="hljs-addition">+    }</span>
<span class="hljs-addition">+}</span>
<span class="hljs-comment">diff --git a/components/konflux-ui/staging/base/proxy/proxy.yaml b/components/konflux-ui/staging/base/proxy/proxy.yaml</span>
new file mode 100644
<span class="hljs-comment">index 00000000..0f61607d</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/components/konflux-ui/staging/base/proxy/proxy.yaml</span>
<span class="hljs-meta">@@ -0,0 +1,308 @@</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: apps/v1</span>
<span class="hljs-addition">+kind: Deployment</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  labels:</span>
<span class="hljs-addition">+    app: proxy</span>
<span class="hljs-addition">+  name: proxy</span>
<span class="hljs-addition">+  annotations:</span>
<span class="hljs-addition">+    ignore-check.kube-linter.io/no-anti-affinity: &quot;Using topologySpreadConstraints&quot;</span>
<span class="hljs-addition">+spec:</span>
<span class="hljs-addition">+  replicas: 1</span>
<span class="hljs-addition">+  selector:</span>
<span class="hljs-addition">+    matchLabels:</span>
<span class="hljs-addition">+      app: proxy</span>
<span class="hljs-addition">+  minReadySeconds: 30</span>
<span class="hljs-addition">+  strategy:</span>
<span class="hljs-addition">+    rollingUpdate:</span>
<span class="hljs-addition">+      maxSurge: 25%</span>
<span class="hljs-addition">+      maxUnavailable: 0</span>
<span class="hljs-addition">+  template:</span>
<span class="hljs-addition">+    metadata:</span>
<span class="hljs-addition">+      labels:</span>
<span class="hljs-addition">+        app: proxy</span>
<span class="hljs-addition">+    spec:</span>
<span class="hljs-addition">+      serviceAccountName: proxy</span>
<span class="hljs-addition">+      topologySpreadConstraints:</span>
<span class="hljs-addition">+      - maxSkew: 1</span>
<span class="hljs-addition">+        topologyKey: topology.kubernetes.io/zone</span>
<span class="hljs-addition">+        whenUnsatisfiable: ScheduleAnyway</span>
<span class="hljs-addition">+        labelSelector:</span>
<span class="hljs-addition">+          matchLabels:</span>
<span class="hljs-addition">+            app: proxy</span>
<span class="hljs-addition">+      initContainers:</span>
<span class="hljs-addition">+      - name: copy-static-content</span>
<span class="hljs-addition">+        image: quay.io/konflux-ci/konflux-ui@sha256:4d638ff6ed4874de0406b200e671ebac72b3f03c4d46b92f02bf62809c1cbed3</span>
<span class="hljs-addition">+        command:</span>
<span class="hljs-addition">+          - cp</span>
<span class="hljs-addition">+          - -R</span>
<span class="hljs-addition">+          - /opt/app-root/src/.</span>
<span class="hljs-addition">+          - /mnt/static-content/</span>
<span class="hljs-addition">+        volumeMounts:</span>
<span class="hljs-addition">+        - name: static-content</span>
<span class="hljs-addition">+          mountPath: /mnt/static-content</span>
<span class="hljs-addition">+        securityContext:</span>
<span class="hljs-addition">+          readOnlyRootFilesystem: true</span>
<span class="hljs-addition">+          runAsNonRoot: true</span>
<span class="hljs-addition">+          runAsUser: 1001</span>
<span class="hljs-addition">+        resources:</span>
<span class="hljs-addition">+          limits:</span>
<span class="hljs-addition">+            cpu: 50m</span>
<span class="hljs-addition">+            memory: 128Mi</span>
<span class="hljs-addition">+          requests:</span>
<span class="hljs-addition">+            cpu: 10m</span>
<span class="hljs-addition">+            memory: 64Mi</span>
<span class="hljs-addition">+      - name: add-sva-token-to-nginx-config</span>
<span class="hljs-addition">+        image: registry.access.redhat.com/ubi9/ubi@sha256:66233eebd72bb5baa25190d4f55e1dc3fff3a9b77186c1f91a0abdb274452072</span>
<span class="hljs-addition">+        command:</span>
<span class="hljs-addition">+          - sh</span>
<span class="hljs-addition">+          - -c</span>
<span class="hljs-addition">+          - |</span>
<span class="hljs-addition">+            set -e</span>
<span class="hljs-addition">+            </span>
<span class="hljs-addition">+            token=$(cat /mnt/api-token/token)</span>
<span class="hljs-addition">+            token64=$(cat /mnt/api-token/token | base64 -w 0 | head -c-1)</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+            echo &quot;proxy_set_header Authorization \&quot;Bearer $token\&quot;;&quot; &gt; /mnt/nginx-generated-config/bearer.conf</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+            echo &quot;proxy_set_header Sec-WebSocket-Protocol \&quot;base64url.bearer.authorization.k8s.io.${token64}, base64.binary.k8s.io\&quot;;&quot; &gt; /mnt/nginx-generated-config/websocket.conf</span>
<span class="hljs-addition">+        volumeMounts:</span>
<span class="hljs-addition">+        - name: nginx-generated-config</span>
<span class="hljs-addition">+          mountPath: /mnt/nginx-generated-config</span>
<span class="hljs-addition">+        - name: api-token</span>
<span class="hljs-addition">+          mountPath: /mnt/api-token</span>
<span class="hljs-addition">+        securityContext:</span>
<span class="hljs-addition">+          readOnlyRootFilesystem: true</span>
<span class="hljs-addition">+          runAsNonRoot: true</span>
<span class="hljs-addition">+          runAsUser: 1001</span>
<span class="hljs-addition">+        resources:</span>
<span class="hljs-addition">+          limits:</span>
<span class="hljs-addition">+            cpu: 50m</span>
<span class="hljs-addition">+            memory: 128Mi</span>
<span class="hljs-addition">+          requests:</span>
<span class="hljs-addition">+            cpu: 10m</span>
<span class="hljs-addition">+            memory: 64Mi</span>
<span class="hljs-addition">+      containers:</span>
<span class="hljs-addition">+      - image: openresty/openresty:1.25.3.1-0-jammy</span>
<span class="hljs-addition">+        name: nginx-120</span>
<span class="hljs-addition">+        command: </span>
<span class="hljs-addition">+          - &quot;/usr/local/openresty/bin/openresty&quot;</span>
<span class="hljs-addition">+          - &quot;-g&quot;</span>
<span class="hljs-addition">+          - &quot;daemon off;&quot;</span>
<span class="hljs-addition">+          - -c</span>
<span class="hljs-addition">+          - /etc/nginx/nginx.conf</span>
<span class="hljs-addition">+        livenessProbe:</span>
<span class="hljs-addition">+          failureThreshold: 3</span>
<span class="hljs-addition">+          httpGet:</span>
<span class="hljs-addition">+            path: /health</span>
<span class="hljs-addition">+            port: 9443</span>
<span class="hljs-addition">+            scheme: HTTPS</span>
<span class="hljs-addition">+          initialDelaySeconds: 30</span>
<span class="hljs-addition">+          periodSeconds: 60</span>
<span class="hljs-addition">+          successThreshold: 1</span>
<span class="hljs-addition">+          timeoutSeconds: 1</span>
<span class="hljs-addition">+        readinessProbe:</span>
<span class="hljs-addition">+          failureThreshold: 3</span>
<span class="hljs-addition">+          httpGet:</span>
<span class="hljs-addition">+            path: /health</span>
<span class="hljs-addition">+            port: 9443</span>
<span class="hljs-addition">+            scheme: HTTPS</span>
<span class="hljs-addition">+          initialDelaySeconds: 30</span>
<span class="hljs-addition">+          periodSeconds: 30</span>
<span class="hljs-addition">+          successThreshold: 1</span>
<span class="hljs-addition">+          timeoutSeconds: 1</span>
<span class="hljs-addition">+        ports:</span>
<span class="hljs-addition">+        - containerPort: 8080</span>
<span class="hljs-addition">+          name: web</span>
<span class="hljs-addition">+          protocol: TCP</span>
<span class="hljs-addition">+        - containerPort: 9443</span>
<span class="hljs-addition">+          name: web-tls</span>
<span class="hljs-addition">+          protocol: TCP</span>
<span class="hljs-addition">+        resources:</span>
<span class="hljs-addition">+          limits:</span>
<span class="hljs-addition">+            cpu: 300m</span>
<span class="hljs-addition">+            memory: 256Mi</span>
<span class="hljs-addition">+          requests:</span>
<span class="hljs-addition">+            cpu: 30m</span>
<span class="hljs-addition">+            memory: 128Mi</span>
<span class="hljs-addition">+        volumeMounts:</span>
<span class="hljs-addition">+          - mountPath: /etc/nginx/nginx.conf</span>
<span class="hljs-addition">+            subPath: nginx.conf</span>
<span class="hljs-addition">+            name: proxy</span>
<span class="hljs-addition">+            readOnly: true</span>
<span class="hljs-addition">+          - name: logs</span>
<span class="hljs-addition">+            mountPath: /var/log/nginx</span>
<span class="hljs-addition">+          - name: nginx-tmp</span>
<span class="hljs-addition">+            mountPath: /var/lib/nginx/tmp</span>
<span class="hljs-addition">+          - name: run</span>
<span class="hljs-addition">+            mountPath: /run</span>
<span class="hljs-addition">+          - name: serving-cert</span>
<span class="hljs-addition">+            mountPath: /mnt</span>
<span class="hljs-addition">+          - name: nginx-generated-config</span>
<span class="hljs-addition">+            mountPath: /mnt/nginx-generated-config</span>
<span class="hljs-addition">+          - name: openresty</span>
<span class="hljs-addition">+            mountPath: /var/run/openresty</span>
<span class="hljs-addition">+          - name: static-content</span>
<span class="hljs-addition">+            mountPath: /opt/app-root/src/static-content</span>
<span class="hljs-addition">+        securityContext:</span>
<span class="hljs-addition">+          readOnlyRootFilesystem: true</span>
<span class="hljs-addition">+          runAsNonRoot: true</span>
<span class="hljs-addition">+          runAsUser: 1001</span>
<span class="hljs-addition">+      - image: quay.io/konflux-ci/workspace-manager@sha256:6b7bfcf197cbff2ae9b1d84abd73636ce5733921524fb550438d8a8143a536b5</span>
<span class="hljs-addition">+        name: workspace-manager</span>
<span class="hljs-addition">+        ports:</span>
<span class="hljs-addition">+          - containerPort: 5000</span>
<span class="hljs-addition">+            name: web</span>
<span class="hljs-addition">+            protocol: TCP</span>
<span class="hljs-addition">+        resources:</span>
<span class="hljs-addition">+          limits:</span>
<span class="hljs-addition">+            cpu: 300m</span>
<span class="hljs-addition">+            memory: 256Mi</span>
<span class="hljs-addition">+          requests:</span>
<span class="hljs-addition">+            cpu: 30m</span>
<span class="hljs-addition">+            memory: 128Mi</span>
<span class="hljs-addition">+        securityContext:</span>
<span class="hljs-addition">+          readOnlyRootFilesystem: true</span>
<span class="hljs-addition">+          runAsNonRoot: true</span>
<span class="hljs-addition">+          runAsUser: 1001</span>
<span class="hljs-addition">+      - image: quay.io/oauth2-proxy/oauth2-proxy@sha256:3da33b9670c67bd782277f99acadf7026f75b9507bfba2088eb2d497266ef7fc</span>
<span class="hljs-addition">+        name: oauth2-proxy</span>
<span class="hljs-addition">+        env:</span>
<span class="hljs-addition">+        - name: OAUTH2_PROXY_CLIENT_SECRET</span>
<span class="hljs-addition">+          valueFrom:</span>
<span class="hljs-addition">+            secretKeyRef:</span>
<span class="hljs-addition">+              name: oauth2-proxy-client-secret</span>
<span class="hljs-addition">+              key: client-secret</span>
<span class="hljs-addition">+        - name: OAUTH2_PROXY_COOKIE_SECRET</span>
<span class="hljs-addition">+          valueFrom:</span>
<span class="hljs-addition">+            secretKeyRef:</span>
<span class="hljs-addition">+              name: oauth2-proxy-cookie-secret</span>
<span class="hljs-addition">+              key: cookie-secret</span>
<span class="hljs-addition">+        args:</span>
<span class="hljs-addition">+          - to be replaced by a patch</span>
<span class="hljs-addition">+        ports:</span>
<span class="hljs-addition">+          - containerPort: 6000</span>
<span class="hljs-addition">+            name: web</span>
<span class="hljs-addition">+            protocol: TCP</span>
<span class="hljs-addition">+        resources:</span>
<span class="hljs-addition">+          limits:</span>
<span class="hljs-addition">+            cpu: 300m</span>
<span class="hljs-addition">+            memory: 256Mi</span>
<span class="hljs-addition">+          requests:</span>
<span class="hljs-addition">+            cpu: 30m</span>
<span class="hljs-addition">+            memory: 128Mi</span>
<span class="hljs-addition">+        securityContext:</span>
<span class="hljs-addition">+          readOnlyRootFilesystem: true</span>
<span class="hljs-addition">+          runAsNonRoot: true</span>
<span class="hljs-addition">+          runAsUser: 1001</span>
<span class="hljs-addition">+      volumes:</span>
<span class="hljs-addition">+        - configMap:</span>
<span class="hljs-addition">+            defaultMode: 420</span>
<span class="hljs-addition">+            name: proxy</span>
<span class="hljs-addition">+            items:</span>
<span class="hljs-addition">+              - key: nginx.conf</span>
<span class="hljs-addition">+                path: nginx.conf </span>
<span class="hljs-addition">+          name: proxy</span>
<span class="hljs-addition">+        - name: logs</span>
<span class="hljs-addition">+          emptyDir: {}</span>
<span class="hljs-addition">+        - name: nginx-tmp</span>
<span class="hljs-addition">+          emptyDir: {}</span>
<span class="hljs-addition">+        - name: run</span>
<span class="hljs-addition">+          emptyDir: {}</span>
<span class="hljs-addition">+        - name: serving-cert</span>
<span class="hljs-addition">+          secret:</span>
<span class="hljs-addition">+            secretName: serving-cert</span>
<span class="hljs-addition">+        - name: nginx-generated-config</span>
<span class="hljs-addition">+          emptyDir: {}</span>
<span class="hljs-addition">+        - name: api-token</span>
<span class="hljs-addition">+          secret:</span>
<span class="hljs-addition">+            secretName: proxy</span>
<span class="hljs-addition">+        - name: openresty</span>
<span class="hljs-addition">+          emptyDir: {}</span>
<span class="hljs-addition">+        - name: static-content</span>
<span class="hljs-addition">+          emptyDir: {}</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: v1</span>
<span class="hljs-addition">+kind: Service</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  labels:</span>
<span class="hljs-addition">+    app: proxy</span>
<span class="hljs-addition">+  name: proxy</span>
<span class="hljs-addition">+spec:</span>
<span class="hljs-addition">+  type: ClusterIP</span>
<span class="hljs-addition">+  internalTrafficPolicy: Cluster</span>
<span class="hljs-addition">+  ipFamilies:</span>
<span class="hljs-addition">+    - IPv4</span>
<span class="hljs-addition">+  ipFamilyPolicy: SingleStack</span>
<span class="hljs-addition">+  ports:</span>
<span class="hljs-addition">+    - name: web</span>
<span class="hljs-addition">+      port: 8888</span>
<span class="hljs-addition">+      protocol: TCP</span>
<span class="hljs-addition">+      targetPort: web</span>
<span class="hljs-addition">+    - name: web-tls</span>
<span class="hljs-addition">+      port: 9443</span>
<span class="hljs-addition">+      protocol: TCP</span>
<span class="hljs-addition">+      targetPort: web-tls</span>
<span class="hljs-addition">+  selector:</span>
<span class="hljs-addition">+    app: proxy</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: v1</span>
<span class="hljs-addition">+kind: ServiceAccount</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: proxy</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: v1</span>
<span class="hljs-addition">+kind: Secret</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: proxy</span>
<span class="hljs-addition">+  annotations:</span>
<span class="hljs-addition">+    kubernetes.io/service-account.name: proxy</span>
<span class="hljs-addition">+type: kubernetes.io/service-account-token</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: rbac.authorization.k8s.io/v1</span>
<span class="hljs-addition">+kind: ClusterRole</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: konflux-proxy</span>
<span class="hljs-addition">+rules:</span>
<span class="hljs-addition">+- apiGroups: [&quot;&quot;]</span>
<span class="hljs-addition">+  resources: [&quot;users&quot;]</span>
<span class="hljs-addition">+  verbs: [&quot;impersonate&quot;]</span>
<span class="hljs-addition">+- apiGroups: [&quot;authorization.k8s.io&quot;]</span>
<span class="hljs-addition">+  resources: [&quot;localsubjectaccessreviews&quot;]</span>
<span class="hljs-addition">+  verbs: [&quot;create&quot;]</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: rbac.authorization.k8s.io/v1</span>
<span class="hljs-addition">+kind: ClusterRoleBinding</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: konflux-proxy</span>
<span class="hljs-addition">+roleRef:</span>
<span class="hljs-addition">+  apiGroup: rbac.authorization.k8s.io</span>
<span class="hljs-addition">+  kind: ClusterRole</span>
<span class="hljs-addition">+  name: konflux-proxy</span>
<span class="hljs-addition">+subjects:</span>
<span class="hljs-addition">+- kind: ServiceAccount</span>
<span class="hljs-addition">+  name: proxy</span>
<span class="hljs-addition">+  namespace: konflux-ui</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: rbac.authorization.k8s.io/v1</span>
<span class="hljs-addition">+kind: ClusterRole</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: konflux-proxy-namespace-lister</span>
<span class="hljs-addition">+rules:</span>
<span class="hljs-addition">+- apiGroups: [&quot;&quot;]</span>
<span class="hljs-addition">+  resources: [&quot;namespaces&quot;]</span>
<span class="hljs-addition">+  verbs: [&quot;list&quot;, &quot;get&quot;]</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: rbac.authorization.k8s.io/v1</span>
<span class="hljs-addition">+kind: ClusterRoleBinding</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: konflux-proxy-namespace-lister</span>
<span class="hljs-addition">+roleRef:</span>
<span class="hljs-addition">+  apiGroup: rbac.authorization.k8s.io</span>
<span class="hljs-addition">+  kind: ClusterRole</span>
<span class="hljs-addition">+  name: konflux-proxy-namespace-lister</span>
<span class="hljs-addition">+subjects:</span>
<span class="hljs-addition">+- kind: ServiceAccount</span>
<span class="hljs-addition">+  name: proxy</span>
<span class="hljs-addition">+  namespace: konflux-ui</span>
<span class="hljs-comment">diff --git a/components/konflux-ui/staging/base/route-and-oauth.yaml b/components/konflux-ui/staging/base/route-and-oauth.yaml</span>
new file mode 100644
<span class="hljs-comment">index 00000000..89ec448f</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/components/konflux-ui/staging/base/route-and-oauth.yaml</span>
<span class="hljs-meta">@@ -0,0 +1,52 @@</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: route.openshift.io/v1</span>
<span class="hljs-addition">+kind: Route</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: konflux</span>
<span class="hljs-addition">+  annotations:</span>
<span class="hljs-addition">+    # Needed for running a local development env for the Konflux UI</span>
<span class="hljs-addition">+    haproxy.router.openshift.io/set-forwarded-headers: if-none</span>
<span class="hljs-addition">+spec:</span>
<span class="hljs-addition">+  host: tba</span>
<span class="hljs-addition">+  path: /</span>
<span class="hljs-addition">+  port:</span>
<span class="hljs-addition">+    targetPort: web-tls</span>
<span class="hljs-addition">+  tls:</span>
<span class="hljs-addition">+    insecureEdgeTerminationPolicy: Redirect</span>
<span class="hljs-addition">+    termination: reencrypt</span>
<span class="hljs-addition">+  to:</span>
<span class="hljs-addition">+    kind: Service</span>
<span class="hljs-addition">+    name: proxy</span>
<span class="hljs-addition">+    weight: 100</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+apiVersion: route.openshift.io/v1</span>
<span class="hljs-addition">+kind: Route</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: konflux-idp</span>
<span class="hljs-addition">+spec:</span>
<span class="hljs-addition">+  host: tba</span>
<span class="hljs-addition">+  path: /idp</span>
<span class="hljs-addition">+  port:</span>
<span class="hljs-addition">+    targetPort: dex</span>
<span class="hljs-addition">+  tls:</span>
<span class="hljs-addition">+    insecureEdgeTerminationPolicy: Redirect</span>
<span class="hljs-addition">+    termination: reencrypt</span>
<span class="hljs-addition">+  to:</span>
<span class="hljs-addition">+    kind: Service</span>
<span class="hljs-addition">+    name: dex</span>
<span class="hljs-addition">+    weight: 100</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+kind: ServiceAccount</span>
<span class="hljs-addition">+apiVersion: v1</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: dex-client</span>
<span class="hljs-addition">+  annotations:</span>
<span class="hljs-addition">+    serviceaccounts.openshift.io/oauth-redirecturi.konflux: tba</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+kind: Secret</span>
<span class="hljs-addition">+apiVersion: v1</span>
<span class="hljs-addition">+metadata:</span>
<span class="hljs-addition">+  name: dex-client</span>
<span class="hljs-addition">+  annotations:</span>
<span class="hljs-addition">+    kubernetes.io/service-account.name: dex-client</span>
<span class="hljs-addition">+type: kubernetes.io/service-account-token</span>
<span class="hljs-comment">diff --git a/components/konflux-ui/staging/stone-stg-rh01/add-service-certs-patch.yaml b/components/konflux-ui/staging/stone-stg-rh01/add-service-certs-patch.yaml</span>
new file mode 100644
<span class="hljs-comment">index 00000000..b636793b</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/components/konflux-ui/staging/stone-stg-rh01/add-service-certs-patch.yaml</span>
<span class="hljs-meta">@@ -0,0 +1,4 @@</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+- op: add</span>
<span class="hljs-addition">+  path: /metadata/annotations/service.beta.openshift.io~1serving-cert-secret-name</span>
<span class="hljs-addition">+  value: serving-cert</span>
<span class="hljs-comment">diff --git a/components/konflux-ui/staging/stone-stg-rh01/dex-config.yaml b/components/konflux-ui/staging/stone-stg-rh01/dex-config.yaml</span>
new file mode 100644
<span class="hljs-comment">index 00000000..0a61fd09</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/components/konflux-ui/staging/stone-stg-rh01/dex-config.yaml</span>
<span class="hljs-meta">@@ -0,0 +1,34 @@</span>
<span class="hljs-addition">+issuer: https://konflux-ui.apps.stone-stg-rh01.l2vh.p1.openshiftapps.com/idp</span>
<span class="hljs-addition">+storage:</span>
<span class="hljs-addition">+  type: kubernetes</span>
<span class="hljs-addition">+  config:</span>
<span class="hljs-addition">+    inCluster: true</span>
<span class="hljs-addition">+web:</span>
<span class="hljs-addition">+  https: 0.0.0.0:9443</span>
<span class="hljs-addition">+  tlsCert: /etc/dex/tls/tls.crt</span>
<span class="hljs-addition">+  tlsKey: /etc/dex/tls/tls.key</span>
<span class="hljs-addition">+oauth2:</span>
<span class="hljs-addition">+  skipApprovalScreen: true</span>
<span class="hljs-addition">+staticClients:</span>
<span class="hljs-addition">+- id: oauth2-proxy</span>
<span class="hljs-addition">+  redirectURIs:</span>
<span class="hljs-addition">+  - https://konflux-ui.apps.stone-stg-rh01.l2vh.p1.openshiftapps.com/oauth2/callback</span>
<span class="hljs-addition">+  # required for using dex from a UI instance run locally</span>
<span class="hljs-addition">+  - https://localhost:8080/oauth2/callback</span>
<span class="hljs-addition">+  name: &#x27;oauth2-proxy&#x27;</span>
<span class="hljs-addition">+  secretEnv: &#x27;OAUTH2_CLIENT_SECRET&#x27;</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+telemetry:</span>
<span class="hljs-addition">+  http: 0.0.0.0:5558</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+connectors:</span>
<span class="hljs-addition">+  - type: openshift</span>
<span class="hljs-addition">+    id: openshift</span>
<span class="hljs-addition">+    name: OpenShift</span>
<span class="hljs-addition">+    config:</span>
<span class="hljs-addition">+      # OpenShift API</span>
<span class="hljs-addition">+      issuer: https://api.stone-stg-rh01.l2vh.p1.openshiftapps.com:6443</span>
<span class="hljs-addition">+      # Credentials can be string literals or pulled from the environment.</span>
<span class="hljs-addition">+      clientID: system:serviceaccount:konflux-ui:dex-client</span>
<span class="hljs-addition">+      clientSecret: $OPENSHIFT_OAUTH_CLIENT_SECRET</span>
<span class="hljs-addition">+      redirectURI: https://konflux-ui.apps.stone-stg-rh01.l2vh.p1.openshiftapps.com/idp/callback</span>
<span class="hljs-comment">diff --git a/components/konflux-ui/staging/stone-stg-rh01/kustomization.yaml b/components/konflux-ui/staging/stone-stg-rh01/kustomization.yaml</span>
new file mode 100644
<span class="hljs-comment">index 00000000..149cbc6c</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/components/konflux-ui/staging/stone-stg-rh01/kustomization.yaml</span>
<span class="hljs-meta">@@ -0,0 +1,44 @@</span>
<span class="hljs-addition">+apiVersion: kustomize.config.k8s.io/v1beta1</span>
<span class="hljs-addition">+kind: Kustomization</span>
<span class="hljs-addition">+resources:</span>
<span class="hljs-addition">+  - ../base</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+configMapGenerator:</span>
<span class="hljs-addition">+  - name: dex</span>
<span class="hljs-addition">+    files:</span>
<span class="hljs-addition">+      - dex-config.yaml</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+patches:</span>
<span class="hljs-addition">+  - path: add-service-certs-patch.yaml</span>
<span class="hljs-addition">+    target:</span>
<span class="hljs-addition">+      group: &quot;&quot;</span>
<span class="hljs-addition">+      version: v1</span>
<span class="hljs-addition">+      kind: Service</span>
<span class="hljs-addition">+      name: proxy</span>
<span class="hljs-addition">+  - path: oauth2-proxy-args-patch.yaml</span>
<span class="hljs-addition">+    target:</span>
<span class="hljs-addition">+      group: apps</span>
<span class="hljs-addition">+      version: v1</span>
<span class="hljs-addition">+      kind: Deployment</span>
<span class="hljs-addition">+      name: proxy</span>
<span class="hljs-addition">+  - path: remove-run-as-user-proxy-patch.yaml</span>
<span class="hljs-addition">+    target:</span>
<span class="hljs-addition">+      group: apps</span>
<span class="hljs-addition">+      version: v1</span>
<span class="hljs-addition">+      kind: Deployment</span>
<span class="hljs-addition">+      name: proxy</span>
<span class="hljs-addition">+  - path: set-replicas-patch.yaml</span>
<span class="hljs-addition">+    target:</span>
<span class="hljs-addition">+      group: apps</span>
<span class="hljs-addition">+      version: v1</span>
<span class="hljs-addition">+      kind: Deployment</span>
<span class="hljs-addition">+  - path: set-redirect-uri.yaml</span>
<span class="hljs-addition">+    target:</span>
<span class="hljs-addition">+      name: dex-client</span>
<span class="hljs-addition">+      kind: ServiceAccount</span>
<span class="hljs-addition">+  - path: set-hostname.yaml</span>
<span class="hljs-addition">+    target:</span>
<span class="hljs-addition">+      kind: Route</span>
<span class="hljs-addition">+      version: v1</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+namespace: konflux-ui</span>
<span class="hljs-comment">diff --git a/components/konflux-ui/staging/stone-stg-rh01/oauth2-proxy-args-patch.yaml b/components/konflux-ui/staging/stone-stg-rh01/oauth2-proxy-args-patch.yaml</span>
new file mode 100644
<span class="hljs-comment">index 00000000..27f53739</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/components/konflux-ui/staging/stone-stg-rh01/oauth2-proxy-args-patch.yaml</span>
<span class="hljs-meta">@@ -0,0 +1,35 @@</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+- op: replace</span>
<span class="hljs-addition">+  path: /spec/template/spec/containers/2/args</span>
<span class="hljs-addition">+  value:</span>
<span class="hljs-addition">+    - --provider</span>
<span class="hljs-addition">+    - oidc</span>
<span class="hljs-addition">+    - --provider-display-name</span>
<span class="hljs-addition">+    - &quot;Dex&quot;</span>
<span class="hljs-addition">+    - --client-id</span>
<span class="hljs-addition">+    - oauth2-proxy</span>
<span class="hljs-addition">+    - --http-address</span>
<span class="hljs-addition">+    - &quot;127.0.0.1:6000&quot;</span>
<span class="hljs-addition">+  # We use relative redirect URI and the reverse-proxy flag to support </span>
<span class="hljs-addition">+  # setting the host using the X-Forwarded-Host header. This is needed</span>
<span class="hljs-addition">+  # when running a UI instance locally that should connect to a remote</span>
<span class="hljs-addition">+  # cluster.</span>
<span class="hljs-addition">+    - --redirect-url</span>
<span class="hljs-addition">+    - /oauth2/callback</span>
<span class="hljs-addition">+    - --reverse-proxy</span>
<span class="hljs-addition">+    - &quot;true&quot;</span>
<span class="hljs-addition">+    - --oidc-issuer-url</span>
<span class="hljs-addition">+    - https://konflux-ui.apps.stone-stg-rh01.l2vh.p1.openshiftapps.com/idp</span>
<span class="hljs-addition">+    - &quot;true&quot;</span>
<span class="hljs-addition">+    - --cookie-name</span>
<span class="hljs-addition">+    - __Host-konflux-ci-cookie</span>
<span class="hljs-addition">+    - --email-domain</span>
<span class="hljs-addition">+    - &quot;*&quot;</span>
<span class="hljs-addition">+    - --insecure-oidc-allow-unverified-email</span>
<span class="hljs-addition">+    - &quot;true&quot;</span>
<span class="hljs-addition">+    - --set-xauthrequest</span>
<span class="hljs-addition">+    - &quot;true&quot;</span>
<span class="hljs-addition">+    - --whitelist-domain</span>
<span class="hljs-addition">+    - localhost:9443</span>
<span class="hljs-addition">+    - --whitelist-domain</span>
<span class="hljs-addition">+    - konflux-ui.apps.stone-stg-rh01.l2vh.p1.openshiftapps.com</span>
<span class="hljs-comment">diff --git a/components/konflux-ui/staging/stone-stg-rh01/remove-run-as-user-proxy-patch.yaml b/components/konflux-ui/staging/stone-stg-rh01/remove-run-as-user-proxy-patch.yaml</span>
new file mode 100644
<span class="hljs-comment">index 00000000..a8939cef</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/components/konflux-ui/staging/stone-stg-rh01/remove-run-as-user-proxy-patch.yaml</span>
<span class="hljs-meta">@@ -0,0 +1,15 @@</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+- op: remove</span>
<span class="hljs-addition">+  path: /spec/template/spec/initContainers/0/securityContext/runAsUser</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+- op: remove</span>
<span class="hljs-addition">+  path: /spec/template/spec/initContainers/1/securityContext/runAsUser</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+- op: remove</span>
<span class="hljs-addition">+  path: /spec/template/spec/containers/0/securityContext/runAsUser</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+- op: remove</span>
<span class="hljs-addition">+  path: /spec/template/spec/containers/1/securityContext/runAsUser</span>
<span class="hljs-addition">+</span>
<span class="hljs-addition">+- op: remove</span>
<span class="hljs-addition">+  path: /spec/template/spec/containers/2/securityContext/runAsUser</span>
<span class="hljs-comment">diff --git a/components/konflux-ui/staging/stone-stg-rh01/set-hostname.yaml b/components/konflux-ui/staging/stone-stg-rh01/set-hostname.yaml</span>
new file mode 100644
<span class="hljs-comment">index 00000000..59753bcc</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/components/konflux-ui/staging/stone-stg-rh01/set-hostname.yaml</span>
<span class="hljs-meta">@@ -0,0 +1,4 @@</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+- op: add</span>
<span class="hljs-addition">+  path: /spec/host</span>
<span class="hljs-addition">+  value: konflux-ui.apps.stone-stg-rh01.l2vh.p1.openshiftapps.com</span>
<span class="hljs-comment">diff --git a/components/konflux-ui/staging/stone-stg-rh01/set-redirect-uri.yaml b/components/konflux-ui/staging/stone-stg-rh01/set-redirect-uri.yaml</span>
new file mode 100644
<span class="hljs-comment">index 00000000..e6ea9d25</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/components/konflux-ui/staging/stone-stg-rh01/set-redirect-uri.yaml</span>
<span class="hljs-meta">@@ -0,0 +1,4 @@</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+- op: add</span>
<span class="hljs-addition">+  path: /metadata/annotations/serviceaccounts.openshift.io~1oauth-redirecturi.konflux</span>
<span class="hljs-addition">+  value: https://konflux-ui.apps.stone-stg-rh01.l2vh.p1.openshiftapps.com/idp/callback</span>
<span class="hljs-comment">diff --git a/components/konflux-ui/staging/stone-stg-rh01/set-replicas-patch.yaml b/components/konflux-ui/staging/stone-stg-rh01/set-replicas-patch.yaml</span>
new file mode 100644
<span class="hljs-comment">index 00000000..e044d9c7</span>
<span class="hljs-comment">--- /dev/null</span>
<span class="hljs-comment">+++ b/components/konflux-ui/staging/stone-stg-rh01/set-replicas-patch.yaml</span>
<span class="hljs-meta">@@ -0,0 +1,4 @@</span>
<span class="hljs-addition">+---</span>
<span class="hljs-addition">+- op: add</span>
<span class="hljs-addition">+  path: /spec/replicas</span>
<span class="hljs-addition">+  value: 3 </span>
</code></pre>

</details> 

<details> 
<summary>Kustomize Generated Diff (0 lines)</summary>  
<pre><code>  
</code></pre>

</details>  

<details> 
<summary>Lint</summary>  
<pre><code>  <span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found! 
</code></pre>

</details> 
<br> 


</div>
<div>
<h3>4: Production changes from 7430d323 to eebcbd6c on Mon Nov 25 11:02:38 2024 </h3>  

<details> 
<summary>Git Diff (42 lines)</summary>  
<pre><code>  diff --git a<span class="hljs-regexp">/components/i</span>ntegration<span class="hljs-regexp">/development/</span>kustomization.yaml b<span class="hljs-regexp">/components/i</span>ntegration<span class="hljs-regexp">/development/</span>kustomization.yaml
index d2431b3c..e8dfa6de <span class="hljs-number">100644</span>
--- a<span class="hljs-regexp">/components/i</span>ntegration<span class="hljs-regexp">/development/</span>kustomization.yaml
+++ b<span class="hljs-regexp">/components/i</span>ntegration<span class="hljs-regexp">/development/</span>kustomization.yaml
@@ -<span class="hljs-number">2</span>,<span class="hljs-number">13</span> +<span class="hljs-number">2</span>,<span class="hljs-number">13</span> @@ apiVersion: kustomize.config.k8s.io/v1beta1
 kind: Kustomization
 resources:
 - ../base
-- https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/konflux-ci/i</span>ntegration-service<span class="hljs-regexp">/config/</span>default?ref=<span class="hljs-number">3330</span>c2dca9f84664954491282e1e5608c6c25c13
-- https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/konflux-ci/i</span>ntegration-service<span class="hljs-regexp">/config/</span>snapshotgc?ref=<span class="hljs-number">3330</span>c2dca9f84664954491282e1e5608c6c25c13
+- https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/konflux-ci/i</span>ntegration-service<span class="hljs-regexp">/config/</span>default?ref=b2b574118504bd139b19f220c17a4e78d8a0fa48
+- https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/konflux-ci/i</span>ntegration-service<span class="hljs-regexp">/config/</span>snapshotgc?ref=b2b574118504bd139b19f220c17a4e78d8a0fa48

 images:
 - name: quay.io<span class="hljs-regexp">/redhat-appstudio/i</span>ntegration-service
   newName: quay.io<span class="hljs-regexp">/redhat-appstudio/i</span>ntegration-service
-  newTag: <span class="hljs-number">3330</span>c2dca9f84664954491282e1e5608c6c25c13
+  newTag: b2b574118504bd139b19f220c17a4e78d8a0fa48

 configMapGenerator:
 - name: integration-config
diff --git a<span class="hljs-regexp">/components/i</span>ntegration<span class="hljs-regexp">/staging/</span>base<span class="hljs-regexp">/kustomization.yaml b/</span>components<span class="hljs-regexp">/integration/</span>staging<span class="hljs-regexp">/base/</span>kustomization.yaml
index <span class="hljs-number">67</span>f16edc..<span class="hljs-number">04</span>b46fa9 <span class="hljs-number">100644</span>
--- a<span class="hljs-regexp">/components/i</span>ntegration<span class="hljs-regexp">/staging/</span>base/kustomization.yaml
+++ b<span class="hljs-regexp">/components/i</span>ntegration<span class="hljs-regexp">/staging/</span>base/kustomization.yaml
@@ -<span class="hljs-number">3</span>,<span class="hljs-number">13</span> +<span class="hljs-number">3</span>,<span class="hljs-number">13</span> @@ kind: Kustomization
 resources:
 - ..<span class="hljs-regexp">/../</span>base
 - ..<span class="hljs-regexp">/../</span>base/external-secrets
-- https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/konflux-ci/i</span>ntegration-service<span class="hljs-regexp">/config/</span>default?ref=<span class="hljs-number">3330</span>c2dca9f84664954491282e1e5608c6c25c13
-- https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/konflux-ci/i</span>ntegration-service<span class="hljs-regexp">/config/</span>snapshotgc?ref=<span class="hljs-number">3330</span>c2dca9f84664954491282e1e5608c6c25c13
+- https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/konflux-ci/i</span>ntegration-service<span class="hljs-regexp">/config/</span>default?ref=b2b574118504bd139b19f220c17a4e78d8a0fa48
+- https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/konflux-ci/i</span>ntegration-service<span class="hljs-regexp">/config/</span>snapshotgc?ref=b2b574118504bd139b19f220c17a4e78d8a0fa48

 images:
 - name: quay.io<span class="hljs-regexp">/redhat-appstudio/i</span>ntegration-service
   newName: quay.io<span class="hljs-regexp">/redhat-appstudio/i</span>ntegration-service
-  newTag: <span class="hljs-number">3330</span>c2dca9f84664954491282e1e5608c6c25c13
+  newTag: b2b574118504bd139b19f220c17a4e78d8a0fa48

 configMapGenerator:
 - name: integration-config 
</code></pre>

</details> 

<details> 
<summary>Kustomize Generated Diff (0 lines)</summary>  
<pre><code>  
</code></pre>

</details>  

<details> 
<summary>Lint</summary>  
<pre><code>  <span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found! 
</code></pre>

</details> 
<br> 


</div>
<div>
<h3>4: Staging changes from 7430d323 to eebcbd6c on Mon Nov 25 11:02:38 2024 </h3>  

<details> 
<summary>Git Diff (42 lines)</summary>  
<pre><code>  diff --git a<span class="hljs-regexp">/components/i</span>ntegration<span class="hljs-regexp">/development/</span>kustomization.yaml b<span class="hljs-regexp">/components/i</span>ntegration<span class="hljs-regexp">/development/</span>kustomization.yaml
index d2431b3c..e8dfa6de <span class="hljs-number">100644</span>
--- a<span class="hljs-regexp">/components/i</span>ntegration<span class="hljs-regexp">/development/</span>kustomization.yaml
+++ b<span class="hljs-regexp">/components/i</span>ntegration<span class="hljs-regexp">/development/</span>kustomization.yaml
@@ -<span class="hljs-number">2</span>,<span class="hljs-number">13</span> +<span class="hljs-number">2</span>,<span class="hljs-number">13</span> @@ apiVersion: kustomize.config.k8s.io/v1beta1
 kind: Kustomization
 resources:
 - ../base
-- https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/konflux-ci/i</span>ntegration-service<span class="hljs-regexp">/config/</span>default?ref=<span class="hljs-number">3330</span>c2dca9f84664954491282e1e5608c6c25c13
-- https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/konflux-ci/i</span>ntegration-service<span class="hljs-regexp">/config/</span>snapshotgc?ref=<span class="hljs-number">3330</span>c2dca9f84664954491282e1e5608c6c25c13
+- https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/konflux-ci/i</span>ntegration-service<span class="hljs-regexp">/config/</span>default?ref=b2b574118504bd139b19f220c17a4e78d8a0fa48
+- https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/konflux-ci/i</span>ntegration-service<span class="hljs-regexp">/config/</span>snapshotgc?ref=b2b574118504bd139b19f220c17a4e78d8a0fa48

 images:
 - name: quay.io<span class="hljs-regexp">/redhat-appstudio/i</span>ntegration-service
   newName: quay.io<span class="hljs-regexp">/redhat-appstudio/i</span>ntegration-service
-  newTag: <span class="hljs-number">3330</span>c2dca9f84664954491282e1e5608c6c25c13
+  newTag: b2b574118504bd139b19f220c17a4e78d8a0fa48

 configMapGenerator:
 - name: integration-config
diff --git a<span class="hljs-regexp">/components/i</span>ntegration<span class="hljs-regexp">/staging/</span>base<span class="hljs-regexp">/kustomization.yaml b/</span>components<span class="hljs-regexp">/integration/</span>staging<span class="hljs-regexp">/base/</span>kustomization.yaml
index <span class="hljs-number">67</span>f16edc..<span class="hljs-number">04</span>b46fa9 <span class="hljs-number">100644</span>
--- a<span class="hljs-regexp">/components/i</span>ntegration<span class="hljs-regexp">/staging/</span>base/kustomization.yaml
+++ b<span class="hljs-regexp">/components/i</span>ntegration<span class="hljs-regexp">/staging/</span>base/kustomization.yaml
@@ -<span class="hljs-number">3</span>,<span class="hljs-number">13</span> +<span class="hljs-number">3</span>,<span class="hljs-number">13</span> @@ kind: Kustomization
 resources:
 - ..<span class="hljs-regexp">/../</span>base
 - ..<span class="hljs-regexp">/../</span>base/external-secrets
-- https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/konflux-ci/i</span>ntegration-service<span class="hljs-regexp">/config/</span>default?ref=<span class="hljs-number">3330</span>c2dca9f84664954491282e1e5608c6c25c13
-- https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/konflux-ci/i</span>ntegration-service<span class="hljs-regexp">/config/</span>snapshotgc?ref=<span class="hljs-number">3330</span>c2dca9f84664954491282e1e5608c6c25c13
+- https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/konflux-ci/i</span>ntegration-service<span class="hljs-regexp">/config/</span>default?ref=b2b574118504bd139b19f220c17a4e78d8a0fa48
+- https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/konflux-ci/i</span>ntegration-service<span class="hljs-regexp">/config/</span>snapshotgc?ref=b2b574118504bd139b19f220c17a4e78d8a0fa48

 images:
 - name: quay.io<span class="hljs-regexp">/redhat-appstudio/i</span>ntegration-service
   newName: quay.io<span class="hljs-regexp">/redhat-appstudio/i</span>ntegration-service
-  newTag: <span class="hljs-number">3330</span>c2dca9f84664954491282e1e5608c6c25c13
+  newTag: b2b574118504bd139b19f220c17a4e78d8a0fa48

 configMapGenerator:
 - name: integration-config 
</code></pre>

</details> 

<details> 
<summary>Kustomize Generated Diff (17 lines)</summary>  
<pre><code>  <span class="hljs-string">./commit-7430d323/staging/components/integration/staging/stone-stage-p01/kustomize.out.yaml</span>
<span class="hljs-string">1424c1424</span>
<span class="hljs-string">&lt;</span>         <span class="hljs-attr">image:</span> <span class="hljs-string">quay.io/redhat-appstudio/integration-service:b2b574118504bd139b19f220c17a4e78d8a0fa48</span>
<span class="hljs-meta">---</span>
<span class="hljs-string">&gt;</span>         <span class="hljs-attr">image:</span> <span class="hljs-string">quay.io/redhat-appstudio/integration-service:3330c2dca9f84664954491282e1e5608c6c25c13</span>
<span class="hljs-number">1513</span><span class="hljs-string">,1515c1513,1515</span>
<span class="hljs-string">&lt;</span>             <span class="hljs-bullet">-</span> <span class="hljs-string">--pr-snapshots-to-keep=70</span>
<span class="hljs-string">&lt;</span>             <span class="hljs-bullet">-</span> <span class="hljs-string">--non-pr-snapshots-to-keep=600</span>
<span class="hljs-string">&lt;</span>             <span class="hljs-attr">image:</span> <span class="hljs-string">quay.io/redhat-appstudio/integration-service:b2b574118504bd139b19f220c17a4e78d8a0fa48</span>
<span class="hljs-meta">---</span>
<span class="hljs-string">&gt;</span>             <span class="hljs-bullet">-</span> <span class="hljs-string">--pr-snapshots-to-keep=100</span>
<span class="hljs-string">&gt;</span>             <span class="hljs-bullet">-</span> <span class="hljs-string">--non-pr-snapshots-to-keep=700</span>
<span class="hljs-string">&gt;</span>             <span class="hljs-attr">image:</span> <span class="hljs-string">quay.io/redhat-appstudio/integration-service:3330c2dca9f84664954491282e1e5608c6c25c13</span>
<span class="hljs-string">1530c1530</span>
<span class="hljs-string">&lt;</span>   <span class="hljs-attr">schedule:</span> <span class="hljs-number">0</span> <span class="hljs-string">*/6</span> <span class="hljs-string">*</span> <span class="hljs-string">*</span> <span class="hljs-string">*</span>
<span class="hljs-meta">---</span>
<span class="hljs-string">&gt;</span>   <span class="hljs-attr">schedule:</span> <span class="hljs-number">0</span> <span class="hljs-number">5</span> <span class="hljs-string">*</span> <span class="hljs-string">*</span> <span class="hljs-string">*</span> 
</code></pre>

</details>  

<details> 
<summary>Lint</summary>  
<pre><code>  <span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found! 
</code></pre>

</details> 
<br> 


</div>
<div>
<h3>4: Development changes from 7430d323 to eebcbd6c on Mon Nov 25 11:02:38 2024 </h3>  

<details> 
<summary>Git Diff (42 lines)</summary>  
<pre><code>  diff --git a<span class="hljs-regexp">/components/i</span>ntegration<span class="hljs-regexp">/development/</span>kustomization.yaml b<span class="hljs-regexp">/components/i</span>ntegration<span class="hljs-regexp">/development/</span>kustomization.yaml
index d2431b3c..e8dfa6de <span class="hljs-number">100644</span>
--- a<span class="hljs-regexp">/components/i</span>ntegration<span class="hljs-regexp">/development/</span>kustomization.yaml
+++ b<span class="hljs-regexp">/components/i</span>ntegration<span class="hljs-regexp">/development/</span>kustomization.yaml
@@ -<span class="hljs-number">2</span>,<span class="hljs-number">13</span> +<span class="hljs-number">2</span>,<span class="hljs-number">13</span> @@ apiVersion: kustomize.config.k8s.io/v1beta1
 kind: Kustomization
 resources:
 - ../base
-- https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/konflux-ci/i</span>ntegration-service<span class="hljs-regexp">/config/</span>default?ref=<span class="hljs-number">3330</span>c2dca9f84664954491282e1e5608c6c25c13
-- https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/konflux-ci/i</span>ntegration-service<span class="hljs-regexp">/config/</span>snapshotgc?ref=<span class="hljs-number">3330</span>c2dca9f84664954491282e1e5608c6c25c13
+- https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/konflux-ci/i</span>ntegration-service<span class="hljs-regexp">/config/</span>default?ref=b2b574118504bd139b19f220c17a4e78d8a0fa48
+- https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/konflux-ci/i</span>ntegration-service<span class="hljs-regexp">/config/</span>snapshotgc?ref=b2b574118504bd139b19f220c17a4e78d8a0fa48

 images:
 - name: quay.io<span class="hljs-regexp">/redhat-appstudio/i</span>ntegration-service
   newName: quay.io<span class="hljs-regexp">/redhat-appstudio/i</span>ntegration-service
-  newTag: <span class="hljs-number">3330</span>c2dca9f84664954491282e1e5608c6c25c13
+  newTag: b2b574118504bd139b19f220c17a4e78d8a0fa48

 configMapGenerator:
 - name: integration-config
diff --git a<span class="hljs-regexp">/components/i</span>ntegration<span class="hljs-regexp">/staging/</span>base<span class="hljs-regexp">/kustomization.yaml b/</span>components<span class="hljs-regexp">/integration/</span>staging<span class="hljs-regexp">/base/</span>kustomization.yaml
index <span class="hljs-number">67</span>f16edc..<span class="hljs-number">04</span>b46fa9 <span class="hljs-number">100644</span>
--- a<span class="hljs-regexp">/components/i</span>ntegration<span class="hljs-regexp">/staging/</span>base/kustomization.yaml
+++ b<span class="hljs-regexp">/components/i</span>ntegration<span class="hljs-regexp">/staging/</span>base/kustomization.yaml
@@ -<span class="hljs-number">3</span>,<span class="hljs-number">13</span> +<span class="hljs-number">3</span>,<span class="hljs-number">13</span> @@ kind: Kustomization
 resources:
 - ..<span class="hljs-regexp">/../</span>base
 - ..<span class="hljs-regexp">/../</span>base/external-secrets
-- https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/konflux-ci/i</span>ntegration-service<span class="hljs-regexp">/config/</span>default?ref=<span class="hljs-number">3330</span>c2dca9f84664954491282e1e5608c6c25c13
-- https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/konflux-ci/i</span>ntegration-service<span class="hljs-regexp">/config/</span>snapshotgc?ref=<span class="hljs-number">3330</span>c2dca9f84664954491282e1e5608c6c25c13
+- https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/konflux-ci/i</span>ntegration-service<span class="hljs-regexp">/config/</span>default?ref=b2b574118504bd139b19f220c17a4e78d8a0fa48
+- https:<span class="hljs-regexp">//gi</span>thub.com<span class="hljs-regexp">/konflux-ci/i</span>ntegration-service<span class="hljs-regexp">/config/</span>snapshotgc?ref=b2b574118504bd139b19f220c17a4e78d8a0fa48

 images:
 - name: quay.io<span class="hljs-regexp">/redhat-appstudio/i</span>ntegration-service
   newName: quay.io<span class="hljs-regexp">/redhat-appstudio/i</span>ntegration-service
-  newTag: <span class="hljs-number">3330</span>c2dca9f84664954491282e1e5608c6c25c13
+  newTag: b2b574118504bd139b19f220c17a4e78d8a0fa48

 configMapGenerator:
 - name: integration-config 
</code></pre>

</details> 

<details> 
<summary>Kustomize Generated Diff (19 lines)</summary>  
<pre><code>  <span class="hljs-string">./commit-7430d323/development/components/integration/development/kustomize.out.yaml</span>
<span class="hljs-string">1422c1422</span>
<span class="hljs-string">&lt;</span>         <span class="hljs-attr">image:</span> <span class="hljs-string">quay.io/redhat-appstudio/integration-service:b2b574118504bd139b19f220c17a4e78d8a0fa48</span>
<span class="hljs-meta">---</span>
<span class="hljs-string">&gt;</span>         <span class="hljs-attr">image:</span> <span class="hljs-string">quay.io/redhat-appstudio/integration-service:3330c2dca9f84664954491282e1e5608c6c25c13</span>
<span class="hljs-number">1511</span><span class="hljs-string">,1512c1511,1512</span>
<span class="hljs-string">&lt;</span>             <span class="hljs-bullet">-</span> <span class="hljs-string">--pr-snapshots-to-keep=70</span>
<span class="hljs-string">&lt;</span>             <span class="hljs-bullet">-</span> <span class="hljs-string">--non-pr-snapshots-to-keep=600</span>
<span class="hljs-meta">---</span>
<span class="hljs-string">&gt;</span>             <span class="hljs-bullet">-</span> <span class="hljs-string">--pr-snapshots-to-keep=100</span>
<span class="hljs-string">&gt;</span>             <span class="hljs-bullet">-</span> <span class="hljs-string">--non-pr-snapshots-to-keep=700</span>
<span class="hljs-string">1516c1516</span>
<span class="hljs-string">&lt;</span>             <span class="hljs-attr">image:</span> <span class="hljs-string">quay.io/redhat-appstudio/integration-service:b2b574118504bd139b19f220c17a4e78d8a0fa48</span>
<span class="hljs-meta">---</span>
<span class="hljs-string">&gt;</span>             <span class="hljs-attr">image:</span> <span class="hljs-string">quay.io/redhat-appstudio/integration-service:3330c2dca9f84664954491282e1e5608c6c25c13</span>
<span class="hljs-string">1531c1531</span>
<span class="hljs-string">&lt;</span>   <span class="hljs-attr">schedule:</span> <span class="hljs-number">0</span> <span class="hljs-string">*/6</span> <span class="hljs-string">*</span> <span class="hljs-string">*</span> <span class="hljs-string">*</span>
<span class="hljs-meta">---</span>
<span class="hljs-string">&gt;</span>   <span class="hljs-attr">schedule:</span> <span class="hljs-number">0</span> <span class="hljs-number">5</span> <span class="hljs-string">*</span> <span class="hljs-string">*</span> <span class="hljs-string">*</span> 
</code></pre>

</details>  

<details> 
<summary>Lint</summary>  
<pre><code>  <span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found!
<span class="hljs-attribute">KubeLinter</span> v0.<span class="hljs-number">6</span>.<span class="hljs-number">1</span>-<span class="hljs-number">0</span>-gc6177366a3

<span class="hljs-attribute">No</span> lint errors found! 
</code></pre>

</details> 
<br> 


</div>

          </div>
          <style type='text/css'>body {
    font: 400 16px/1.5 "Helvetica Neue", Helvetica, Arial, sans-serif;
    color: #111;
    background-color: #fbfbfb;
    -webkit-text-size-adjust: 100%;
    -webkit-font-feature-settings: "kern" 1;
    -moz-font-feature-settings: "kern" 1;
    -o-font-feature-settings: "kern" 1;
    font-feature-settings: "kern" 1;
    font-kerning: normal;
    padding: 30px;
}

@media only screen and (max-width: 600px) {
    body {
        padding: 5px;
    }
    body>#content {
        padding: 0px 20px 20px 20px !important;
    }
}

body>#content {
    margin: 0px;
    max-width: 1024px;
    border: 1px solid #e1e4e8;
    padding: 10px 40px;
    padding-bottom: 20px;
    border-radius: 2px;
    margin-left: auto;
    margin-right: auto;
}

summary {
    cursor: pointer;
    text-decoration: underline;
}

hr {
    color: #bbb;
    background-color: #bbb;
    height: 1px;
    flex: 0 1 auto;
    margin: 1em 0;
    padding: 0;
    border: none;
}

.hljs-operator {
    color: #868686;
    /* There is a bug where the syntax highlighter would pick no color for e.g. `&&` symbols in the code samples. Let's overwrite this */
}


/**
 * Links
 */

a {
    color: #0366d6;
    text-decoration: none;
}

a:visited {
    color: #0366d6;
}

a:hover {
    color: #0366d6;
    text-decoration: underline;
}

pre {
    background-color: #f6f8fa;
    border-radius: 3px;
    font-size: 85%;
    line-height: 1.45;
    overflow: auto;
    padding: 16px;
}


/**
  * Code blocks
  */

code {
    background-color: rgba(27, 31, 35, .05);
    border-radius: 3px;
    font-size: 85%;
    margin: 0;
    word-wrap: break-word;
    padding: .2em .4em;
    font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace;
}

pre>code {
    background-color: transparent;
    border: 0;
    display: inline;
    line-height: inherit;
    margin: 0;
    overflow: visible;
    padding: 0;
    word-wrap: normal;
    font-size: 100%;
}


/**
 * Blockquotes
 */

blockquote {
    margin-left: 30px;
    margin-top: 0px;
    margin-bottom: 16px;
    border-left-width: 3px;
    padding: 0 1em;
    color: #828282;
    border-left: 4px solid #e8e8e8;
    padding-left: 15px;
    font-size: 18px;
    letter-spacing: -1px;
    font-style: italic;
}

blockquote * {
    font-style: normal !important;
    letter-spacing: 0;
    color: #6a737d !important;
}


/**
 * Tables
 */

table {
    border-spacing: 2px;
    display: block;
    font-size: 14px;
    overflow: auto;
    width: 100%;
    margin-bottom: 16px;
    border-spacing: 0;
    border-collapse: collapse;
}

td {
    padding: 6px 13px;
    border: 1px solid #dfe2e5;
}

th {
    font-weight: 600;
    padding: 6px 13px;
    border: 1px solid #dfe2e5;
}

tr {
    background-color: #fff;
    border-top: 1px solid #c6cbd1;
}

table tr:nth-child(2n) {
    background-color: #f6f8fa;
}


/**
 * Others
 */

img {
    max-width: 100%;
}

p {
    line-height: 24px;
    font-weight: 400;
    font-size: 16px;
    color: #24292e;
}

ul {
    margin-top: 0;
}

li {
    color: #24292e;
    font-size: 16px;
    font-weight: 400;
    line-height: 1.5;
}

li+li {
    margin-top: 0.25em;
}

* {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
    color: #24292e;
}

a:visited {
    color: #0366d6;
}

h1,
h2,
h3 {
    border-bottom: 1px solid #eaecef;
    color: #111;
    /* Darker */
}

code>* {
    font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace !important;
}</style>
          <style type='text/css'>pre code.hljs {
  display: block;
  overflow-x: auto;
  padding: 1em
}
code.hljs {
  padding: 3px 5px
}
/*

Atom One Dark by Daniel Gamage
Original One Dark Syntax theme from https://github.com/atom/one-dark-syntax

base:    #282c34
mono-1:  #abb2bf
mono-2:  #818896
mono-3:  #5c6370
hue-1:   #56b6c2
hue-2:   #61aeee
hue-3:   #c678dd
hue-4:   #98c379
hue-5:   #e06c75
hue-5-2: #be5046
hue-6:   #d19a66
hue-6-2: #e6c07b

*/
.hljs {
  color: #abb2bf;
  background: #282c34
}
.hljs-comment,
.hljs-quote {
  color: #5c6370;
  font-style: italic
}
.hljs-doctag,
.hljs-keyword,
.hljs-formula {
  color: #c678dd
}
.hljs-section,
.hljs-name,
.hljs-selector-tag,
.hljs-deletion,
.hljs-subst {
  color: #e06c75
}
.hljs-literal {
  color: #56b6c2
}
.hljs-string,
.hljs-regexp,
.hljs-addition,
.hljs-attribute,
.hljs-meta .hljs-string {
  color: #98c379
}
.hljs-attr,
.hljs-variable,
.hljs-template-variable,
.hljs-type,
.hljs-selector-class,
.hljs-selector-attr,
.hljs-selector-pseudo,
.hljs-number {
  color: #d19a66
}
.hljs-symbol,
.hljs-bullet,
.hljs-link,
.hljs-meta,
.hljs-selector-id,
.hljs-title {
  color: #61aeee
}
.hljs-built_in,
.hljs-title.class_,
.hljs-class .hljs-title {
  color: #e6c07b
}
.hljs-emphasis {
  font-style: italic
}
.hljs-strong {
  font-weight: bold
}
.hljs-link {
  text-decoration: underline
}</style>
        </body>
      </html>