apiVersion: keycloak.org/v1alpha1
kind: Keycloak
metadata:
  annotations:
    argocd.argoproj.io/sync-options: SkipDryRunOnMissingResource=true
  labels:
    appstudio.redhat.com/keycloak: dev
  name: dev-sso
spec:
  externalAccess:
    enabled: true
  instances: 1
---
apiVersion: keycloak.org/v1alpha1
kind: KeycloakRealm
metadata:
  annotations:
    argocd.argoproj.io/sync-options: SkipDryRunOnMissingResource=true
  name: redhat-external
spec:
  instanceSelector:
    matchLabels:
      appstudio.redhat.com/keycloak: dev
  realm:
    accessTokenLifespan: 7200
    accessTokenLifespanForImplicitFlow: 900
    adminEventsDetailsEnabled: false
    adminEventsEnabled: false
    authenticationFlows:
    - alias: Account verification options
      authenticationExecutions:
      - authenticator: idp-email-verification
        authenticatorFlow: false
        priority: 10
        requirement: ALTERNATIVE
        userSetupAllowed: false
      - authenticatorFlow: true
        flowAlias: Verify Existing Account by Re-authentication
        priority: 20
        requirement: ALTERNATIVE
        userSetupAllowed: false
      builtIn: true
      description: Method with which to verity the existing account
      id: e7eb3ebc-fb97-4223-ad80-592fc5fce191
      providerId: basic-flow
      topLevel: false
    - alias: Authentication Options
      authenticationExecutions:
      - authenticator: basic-auth
        authenticatorFlow: false
        priority: 10
        requirement: REQUIRED
        userSetupAllowed: false
      - authenticator: basic-auth-otp
        authenticatorFlow: false
        priority: 20
        requirement: DISABLED
        userSetupAllowed: false
      - authenticator: auth-spnego
        authenticatorFlow: false
        priority: 30
        requirement: DISABLED
        userSetupAllowed: false
      builtIn: true
      description: Authentication options.
      id: 1198e723-0fc8-4378-adcb-5111b25ac8e0
      providerId: basic-flow
      topLevel: false
    - alias: Browser - Conditional OTP
      authenticationExecutions:
      - authenticator: conditional-user-configured
        authenticatorFlow: false
        priority: 10
        requirement: REQUIRED
        userSetupAllowed: false
      - authenticator: auth-otp-form
        authenticatorFlow: false
        priority: 20
        requirement: REQUIRED
        userSetupAllowed: false
      builtIn: true
      description: Flow to determine if the OTP is required for the authentication
      id: 17b80820-8c58-48b4-abd7-3d5a75a501ca
      providerId: basic-flow
      topLevel: false
    - alias: Direct Grant - Conditional OTP
      authenticationExecutions:
      - authenticator: conditional-user-configured
        authenticatorFlow: false
        priority: 10
        requirement: REQUIRED
        userSetupAllowed: false
      - authenticator: direct-grant-validate-otp
        authenticatorFlow: false
        priority: 20
        requirement: REQUIRED
        userSetupAllowed: false
      builtIn: true
      description: Flow to determine if the OTP is required for the authentication
      id: 87917dac-6623-4091-a031-f669c00727a0
      providerId: basic-flow
      topLevel: false
    - alias: First broker login - Conditional OTP
      authenticationExecutions:
      - authenticator: conditional-user-configured
        authenticatorFlow: false
        priority: 10
        requirement: REQUIRED
        userSetupAllowed: false
      - authenticator: auth-otp-form
        authenticatorFlow: false
        priority: 20
        requirement: REQUIRED
        userSetupAllowed: false
      builtIn: true
      description: Flow to determine if the OTP is required for the authentication
      id: c3e67dde-8f8c-4ad7-a901-48dc2f136e62
      providerId: basic-flow
      topLevel: false
    - alias: Handle Existing Account
      authenticationExecutions:
      - authenticator: idp-confirm-link
        authenticatorFlow: false
        priority: 10
        requirement: REQUIRED
        userSetupAllowed: false
      - authenticatorFlow: true
        flowAlias: Account verification options
        priority: 20
        requirement: REQUIRED
        userSetupAllowed: false
      builtIn: true
      description: Handle what to do if there is existing account with same email/username
        like authenticated identity provider
      id: 1c4a841c-8127-42c8-92b1-70ce02485b23
      providerId: basic-flow
      topLevel: false
    - alias: Reset - Conditional OTP
      authenticationExecutions:
      - authenticator: conditional-user-configured
        authenticatorFlow: false
        priority: 10
        requirement: REQUIRED
        userSetupAllowed: false
      - authenticator: reset-otp
        authenticatorFlow: false
        priority: 20
        requirement: REQUIRED
        userSetupAllowed: false
      builtIn: true
      description: Flow to determine if the OTP should be reset or not. Set to REQUIRED
        to force.
      id: 55164d9f-4366-464c-88d2-90bfd2261711
      providerId: basic-flow
      topLevel: false
    - alias: User creation or linking
      authenticationExecutions:
      - authenticator: idp-create-user-if-unique
        authenticatorConfig: create unique user config
        authenticatorFlow: false
        priority: 10
        requirement: ALTERNATIVE
        userSetupAllowed: false
      - authenticatorFlow: true
        flowAlias: Handle Existing Account
        priority: 20
        requirement: ALTERNATIVE
        userSetupAllowed: false
      builtIn: true
      description: Flow for the existing/non-existing user alternatives
      id: 7a328721-4ecf-4195-b3eb-d43710806436
      providerId: basic-flow
      topLevel: false
    - alias: Verify Existing Account by Re-authentication
      authenticationExecutions:
      - authenticator: idp-username-password-form
        authenticatorFlow: false
        priority: 10
        requirement: REQUIRED
        userSetupAllowed: false
      - authenticatorFlow: true
        flowAlias: First broker login - Conditional OTP
        priority: 20
        requirement: CONDITIONAL
        userSetupAllowed: false
      builtIn: true
      description: Reauthentication of existing account
      id: aa99db6e-a68c-41a6-a1b0-ceeb05835033
      providerId: basic-flow
      topLevel: false
    - alias: browser
      authenticationExecutions:
      - authenticator: auth-cookie
        authenticatorFlow: false
        priority: 10
        requirement: ALTERNATIVE
        userSetupAllowed: false
      - authenticator: auth-spnego
        authenticatorFlow: false
        priority: 20
        requirement: DISABLED
        userSetupAllowed: false
      - authenticator: identity-provider-redirector
        authenticatorFlow: false
        priority: 25
        requirement: ALTERNATIVE
        userSetupAllowed: false
      - authenticatorFlow: true
        flowAlias: forms
        priority: 30
        requirement: ALTERNATIVE
        userSetupAllowed: false
      builtIn: true
      description: browser based authentication
      id: fb06241d-d1fd-4cd0-8e25-a2e7c526d5ed
      providerId: basic-flow
      topLevel: true
    - alias: clients
      authenticationExecutions:
      - authenticator: client-secret
        authenticatorFlow: false
        priority: 10
        requirement: ALTERNATIVE
        userSetupAllowed: false
      - authenticator: client-jwt
        authenticatorFlow: false
        priority: 20
        requirement: ALTERNATIVE
        userSetupAllowed: false
      - authenticator: client-secret-jwt
        authenticatorFlow: false
        priority: 30
        requirement: ALTERNATIVE
        userSetupAllowed: false
      - authenticator: client-x509
        authenticatorFlow: false
        priority: 40
        requirement: ALTERNATIVE
        userSetupAllowed: false
      builtIn: true
      description: Base authentication for clients
      id: e845c181-be95-4661-bf17-ad8930302e2d
      providerId: client-flow
      topLevel: true
    - alias: direct grant
      authenticationExecutions:
      - authenticator: direct-grant-validate-username
        authenticatorFlow: false
        priority: 10
        requirement: REQUIRED
        userSetupAllowed: false
      - authenticator: direct-grant-validate-password
        authenticatorFlow: false
        priority: 20
        requirement: REQUIRED
        userSetupAllowed: false
      - authenticatorFlow: true
        flowAlias: Direct Grant - Conditional OTP
        priority: 30
        requirement: CONDITIONAL
        userSetupAllowed: false
      builtIn: true
      description: OpenID Connect Resource Owner Grant
      id: 4be61b3e-bed6-4641-b0b3-2745f67e2d3f
      providerId: basic-flow
      topLevel: true
    - alias: docker auth
      authenticationExecutions:
      - authenticator: docker-http-basic-authenticator
        authenticatorFlow: false
        priority: 10
        requirement: REQUIRED
        userSetupAllowed: false
      builtIn: true
      description: Used by Docker clients to authenticate against the IDP
      id: f5aa97fe-9f57-4358-bcff-99259d556744
      providerId: basic-flow
      topLevel: true
    - alias: first broker login
      authenticationExecutions:
      - authenticator: idp-review-profile
        authenticatorConfig: review profile config
        authenticatorFlow: false
        priority: 10
        requirement: REQUIRED
        userSetupAllowed: false
      - authenticatorFlow: true
        flowAlias: User creation or linking
        priority: 20
        requirement: REQUIRED
        userSetupAllowed: false
      builtIn: true
      description: Actions taken after first broker login with identity provider account,
        which is not yet linked to any Keycloak account
      id: 4cac59c3-abc3-461f-9c98-0af10402304f
      providerId: basic-flow
      topLevel: true
    - alias: forms
      authenticationExecutions:
      - authenticator: auth-username-password-form
        authenticatorFlow: false
        priority: 10
        requirement: REQUIRED
        userSetupAllowed: false
      - authenticatorFlow: true
        flowAlias: Browser - Conditional OTP
        priority: 20
        requirement: CONDITIONAL
        userSetupAllowed: false
      builtIn: true
      description: Username, password, otp and other auth forms.
      id: 3dee6aae-172e-44ee-8d20-13f1f757ab0a
      providerId: basic-flow
      topLevel: false
    - alias: http challenge
      authenticationExecutions:
      - authenticator: no-cookie-redirect
        authenticatorFlow: false
        priority: 10
        requirement: REQUIRED
        userSetupAllowed: false
      - authenticatorFlow: true
        flowAlias: Authentication Options
        priority: 20
        requirement: REQUIRED
        userSetupAllowed: false
      builtIn: true
      description: An authentication flow based on challenge-response HTTP Authentication
        Schemes
      id: 4e344966-4bca-47ac-a450-3251f9cf16db
      providerId: basic-flow
      topLevel: true
    - alias: registration
      authenticationExecutions:
      - authenticator: registration-page-form
        authenticatorFlow: true
        flowAlias: registration form
        priority: 10
        requirement: REQUIRED
        userSetupAllowed: false
      builtIn: true
      description: registration flow
      id: dc323cc9-6e1c-4653-8509-9ae6f62bb54e
      providerId: basic-flow
      topLevel: true
    - alias: registration form
      authenticationExecutions:
      - authenticator: registration-user-creation
        authenticatorFlow: false
        priority: 20
        requirement: REQUIRED
        userSetupAllowed: false
      - authenticator: registration-profile-action
        authenticatorFlow: false
        priority: 40
        requirement: REQUIRED
        userSetupAllowed: false
      - authenticator: registration-password-action
        authenticatorFlow: false
        priority: 50
        requirement: REQUIRED
        userSetupAllowed: false
      - authenticator: registration-recaptcha-action
        authenticatorFlow: false
        priority: 60
        requirement: DISABLED
        userSetupAllowed: false
      builtIn: true
      description: registration form
      id: 73bdf37c-12fa-4c48-89bf-aa28139e7bb1
      providerId: form-flow
      topLevel: false
    - alias: reset credentials
      authenticationExecutions:
      - authenticator: reset-credentials-choose-user
        authenticatorFlow: false
        priority: 10
        requirement: REQUIRED
        userSetupAllowed: false
      - authenticator: reset-credential-email
        authenticatorFlow: false
        priority: 20
        requirement: REQUIRED
        userSetupAllowed: false
      - authenticator: reset-password
        authenticatorFlow: false
        priority: 30
        requirement: REQUIRED
        userSetupAllowed: false
      - authenticatorFlow: true
        flowAlias: Reset - Conditional OTP
        priority: 40
        requirement: CONDITIONAL
        userSetupAllowed: false
      builtIn: true
      description: Reset credentials for a user if they forgot their password or something
      id: 6ac53ea6-30f4-4b40-b2a8-85a91514a24f
      providerId: basic-flow
      topLevel: true
    - alias: saml ecp
      authenticationExecutions:
      - authenticator: http-basic-authenticator
        authenticatorFlow: false
        priority: 10
        requirement: REQUIRED
        userSetupAllowed: false
      builtIn: true
      description: SAML ECP Profile Authentication Flow
      id: 1eae4e92-51ce-49c9-85d7-aaf4d1f437ee
      providerId: basic-flow
      topLevel: true
    authenticatorConfig:
    - alias: create unique user config
      config:
        require.password.update.after.registration: "false"
      id: 651040d9-3852-4081-8cb3-665474382f87
    - alias: review profile config
      config:
        update.profile.on.first.login: missing
      id: a03358ad-6f70-4eb9-a1fa-bea18fb856f3
    bruteForceProtected: false
    clientScopeMappings:
      account:
      - client: account-console
        roles:
        - manage-account
    clientScopes:
    - attributes:
        consent.screen.text: ""
        display.on.consent.screen: "false"
        include.in.token.scope: "false"
      description: OpenID Connect scope for add allowed web origins to the access
        token
      id: 2e00768f-fe3c-48d8-92bf-35afbbcc30c0
      name: web-origins
      protocol: openid-connect
      protocolMappers:
      - config: {}
        consentRequired: false
        id: d54340bc-16f0-45a4-9464-436ef7583a81
        name: allowed web origins
        protocol: openid-connect
        protocolMapper: oidc-allowed-origins-mapper
    - attributes:
        consent.screen.text: ${phoneScopeConsentText}
        display.on.consent.screen: "true"
        include.in.token.scope: "true"
      description: 'OpenID Connect built-in scope: phone'
      id: 172816fd-8450-4e82-b33a-89f9181373a4
      name: phone
      protocol: openid-connect
      protocolMappers:
      - config:
          access.token.claim: "true"
          claim.name: phone_number
          id.token.claim: "true"
          jsonType.label: String
          user.attribute: phoneNumber
          userinfo.token.claim: "true"
        consentRequired: false
        id: 02c09b15-1210-4a6c-b6e4-c2452031712a
        name: phone number
        protocol: openid-connect
        protocolMapper: oidc-usermodel-attribute-mapper
      - config:
          access.token.claim: "true"
          claim.name: phone_number_verified
          id.token.claim: "true"
          jsonType.label: boolean
          user.attribute: phoneNumberVerified
          userinfo.token.claim: "true"
        consentRequired: false
        id: 6a96110b-3a23-48cd-8d90-cefa6228e5e1
        name: phone number verified
        protocol: openid-connect
        protocolMapper: oidc-usermodel-attribute-mapper
    - attributes:
        consent.screen.text: ${samlRoleListScopeConsentText}
        display.on.consent.screen: "true"
      description: SAML role list
      id: c7d788d8-5836-4500-b4a9-083c2f6c2960
      name: role_list
      protocol: saml
      protocolMappers:
      - config:
          attribute.name: Role
          attribute.nameformat: Basic
          single: "false"
        consentRequired: false
        id: a70dad06-f7a0-4c3d-8c08-cf440c7918da
        name: role list
        protocol: saml
        protocolMapper: saml-role-list-mapper
    - attributes:
        consent.screen.text: ${offlineAccessScopeConsentText}
        display.on.consent.screen: "true"
      description: 'OpenID Connect built-in scope: offline_access'
      id: 656d7d46-bcd6-4b5a-bcfa-20ad0f13e9fe
      name: offline_access
      protocol: openid-connect
    - attributes:
        consent.screen.text: ${profileScopeConsentText}
        display.on.consent.screen: "true"
        include.in.token.scope: "true"
      description: 'OpenID Connect built-in scope: profile'
      id: 65c7d0bd-243d-42d2-b7f2-64ce2fa7ca7e
      name: profile
      protocol: openid-connect
      protocolMappers:
      - config:
          access.token.claim: "true"
          claim.name: locale
          id.token.claim: "true"
          jsonType.label: String
          user.attribute: locale
          userinfo.token.claim: "true"
        consentRequired: false
        id: e3f5a475-0722-4293-bcd5-2bad6bc7dde6
        name: locale
        protocol: openid-connect
        protocolMapper: oidc-usermodel-attribute-mapper
      - config:
          access.token.claim: "true"
          id.token.claim: "true"
          userinfo.token.claim: "true"
        consentRequired: false
        id: 7b91d2ec-3c9f-4e7d-859e-67900de0c6b6
        name: full name
        protocol: openid-connect
        protocolMapper: oidc-full-name-mapper
      - config:
          access.token.claim: "true"
          claim.name: family_name
          id.token.claim: "true"
          jsonType.label: String
          user.attribute: lastName
          userinfo.token.claim: "true"
        consentRequired: false
        id: d301c7b7-0d97-4d37-8527-a5c63d461a3c
        name: family name
        protocol: openid-connect
        protocolMapper: oidc-usermodel-property-mapper
      - config:
          access.token.claim: "true"
          claim.name: updated_at
          id.token.claim: "true"
          jsonType.label: long
          user.attribute: updatedAt
          userinfo.token.claim: "true"
        consentRequired: false
        id: 71c6caff-3f17-47db-8dc1-42f9af01832e
        name: updated at
        protocol: openid-connect
        protocolMapper: oidc-usermodel-attribute-mapper
      - config:
          access.token.claim: "true"
          claim.name: picture
          id.token.claim: "true"
          jsonType.label: String
          user.attribute: picture
          userinfo.token.claim: "true"
        consentRequired: false
        id: 6bcb9f8d-94be-48b3-bd47-2ba7746d65ac
        name: picture
        protocol: openid-connect
        protocolMapper: oidc-usermodel-attribute-mapper
      - config:
          access.token.claim: "true"
          claim.name: nickname
          id.token.claim: "true"
          jsonType.label: String
          user.attribute: nickname
          userinfo.token.claim: "true"
        consentRequired: false
        id: d497ef2e-5d5b-4d8a-9392-04e09f5c51b6
        name: nickname
        protocol: openid-connect
        protocolMapper: oidc-usermodel-attribute-mapper
      - config:
          access.token.claim: "true"
          claim.name: website
          id.token.claim: "true"
          jsonType.label: String
          user.attribute: website
          userinfo.token.claim: "true"
        consentRequired: false
        id: f8167604-073d-47ea-9fd1-6ec754ce5c49
        name: website
        protocol: openid-connect
        protocolMapper: oidc-usermodel-attribute-mapper
      - config:
          access.token.claim: "true"
          claim.name: profile
          id.token.claim: "true"
          jsonType.label: String
          user.attribute: profile
          userinfo.token.claim: "true"
        consentRequired: false
        id: 48d8f2ff-d0e6-41f2-839e-3e51951ee078
        name: profile
        protocol: openid-connect
        protocolMapper: oidc-usermodel-attribute-mapper
      - config:
          access.token.claim: "true"
          claim.name: preferred_username
          id.token.claim: "true"
          jsonType.label: String
          user.attribute: username
          userinfo.token.claim: "true"
        consentRequired: false
        id: 463f80df-1554-4f0b-889f-1e6f2308ba17
        name: username
        protocol: openid-connect
        protocolMapper: oidc-usermodel-property-mapper
      - config:
          access.token.claim: "true"
          claim.name: given_name
          id.token.claim: "true"
          jsonType.label: String
          user.attribute: firstName
          userinfo.token.claim: "true"
        consentRequired: false
        id: c347cd4f-a2e1-4a5f-a676-e779beb7bccf
        name: given name
        protocol: openid-connect
        protocolMapper: oidc-usermodel-property-mapper
      - config:
          access.token.claim: "true"
          claim.name: zoneinfo
          id.token.claim: "true"
          jsonType.label: String
          user.attribute: zoneinfo
          userinfo.token.claim: "true"
        consentRequired: false
        id: 665672fd-872e-4a58-b586-b6f6fddbc1ac
        name: zoneinfo
        protocol: openid-connect
        protocolMapper: oidc-usermodel-attribute-mapper
      - config:
          access.token.claim: "true"
          claim.name: gender
          id.token.claim: "true"
          jsonType.label: String
          user.attribute: gender
          userinfo.token.claim: "true"
        consentRequired: false
        id: b76e46cc-98a9-4bf7-8918-0cc8eb2dfc8c
        name: gender
        protocol: openid-connect
        protocolMapper: oidc-usermodel-attribute-mapper
      - config:
          access.token.claim: "true"
          claim.name: birthdate
          id.token.claim: "true"
          jsonType.label: String
          user.attribute: birthdate
          userinfo.token.claim: "true"
        consentRequired: false
        id: cb1a55e3-87f0-4efb-b5c0-d5de40344bfc
        name: birthdate
        protocol: openid-connect
        protocolMapper: oidc-usermodel-attribute-mapper
      - config:
          access.token.claim: "true"
          claim.name: middle_name
          id.token.claim: "true"
          jsonType.label: String
          user.attribute: middleName
          userinfo.token.claim: "true"
        consentRequired: false
        id: 9b5c1c92-c937-4216-9fdb-db23d6eee788
        name: middle name
        protocol: openid-connect
        protocolMapper: oidc-usermodel-attribute-mapper
    - attributes:
        display.on.consent.screen: "true"
        include.in.token.scope: "true"
      id: 672455b2-1e92-44f6-9fb6-fe2017995aed
      name: profile_level.name_and_dev_terms
      protocol: openid-connect
    - attributes:
        consent.screen.text: ${emailScopeConsentText}
        display.on.consent.screen: "true"
        include.in.token.scope: "true"
      description: 'OpenID Connect built-in scope: email'
      id: 45e1900d-2199-45fc-9028-a39497a6cdd5
      name: email
      protocol: openid-connect
      protocolMappers:
      - config:
          access.token.claim: "true"
          claim.name: email
          id.token.claim: "true"
          jsonType.label: String
          user.attribute: email
          userinfo.token.claim: "true"
        consentRequired: false
        id: 149315f5-4595-4794-b11f-f4b68b1c9f7a
        name: email
        protocol: openid-connect
        protocolMapper: oidc-usermodel-property-mapper
      - config:
          access.token.claim: "true"
          claim.name: email_verified
          id.token.claim: "true"
          jsonType.label: boolean
          user.attribute: emailVerified
          userinfo.token.claim: "true"
        consentRequired: false
        id: 26f0791c-93cf-4241-9c92-5528e67b9817
        name: email verified
        protocol: openid-connect
        protocolMapper: oidc-usermodel-property-mapper
    - attributes:
        consent.screen.text: ${rolesScopeConsentText}
        display.on.consent.screen: "true"
        include.in.token.scope: "false"
      description: OpenID Connect scope for add user roles to the access token
      id: ed5b578d-d48f-4023-bc23-892a76d018df
      name: roles
      protocol: openid-connect
      protocolMappers:
      - config: {}
        consentRequired: false
        id: 569264db-b779-49c9-a9b0-cfa0f8c249db
        name: audience resolve
        protocol: openid-connect
        protocolMapper: oidc-audience-resolve-mapper
      - config:
          access.token.claim: "true"
          claim.name: realm_access.roles
          jsonType.label: String
          multivalued: "true"
          user.attribute: foo
        consentRequired: false
        id: 6d2e188f-4022-474e-84ad-19a84e054fc5
        name: realm roles
        protocol: openid-connect
        protocolMapper: oidc-usermodel-realm-role-mapper
      - config:
          access.token.claim: "true"
          claim.name: resource_access.${client_id}.roles
          jsonType.label: String
          multivalued: "true"
          user.attribute: foo
        consentRequired: false
        id: f7b77092-577d-4492-b803-a3cdf2a436fe
        name: client roles
        protocol: openid-connect
        protocolMapper: oidc-usermodel-client-role-mapper
    - attributes:
        display.on.consent.screen: "false"
        include.in.token.scope: "false"
      description: OpenID Connect scope for add acr (authentication context class
        reference) to the token
      id: b2240814-1831-48d1-9682-7eb5231bbc76
      name: acr
      protocol: openid-connect
      protocolMappers:
      - config:
          access.token.claim: "true"
          id.token.claim: "true"
        consentRequired: false
        id: bc946f16-8378-4edc-9137-f5d5db96da88
        name: acr loa level
        protocol: openid-connect
        protocolMapper: oidc-acr-mapper
    - attributes:
        display.on.consent.screen: "false"
        include.in.token.scope: "true"
      description: Microprofile - JWT built-in scope
      id: 47f93745-58c6-4f19-9ef4-768cd6df7ab7
      name: microprofile-jwt
      protocol: openid-connect
      protocolMappers:
      - config:
          access.token.claim: "true"
          claim.name: upn
          id.token.claim: "true"
          jsonType.label: String
          user.attribute: username
          userinfo.token.claim: "true"
        consentRequired: false
        id: ca164b36-12dc-47fc-b0e6-e40949a5042e
        name: upn
        protocol: openid-connect
        protocolMapper: oidc-usermodel-property-mapper
      - config:
          access.token.claim: "true"
          claim.name: groups
          id.token.claim: "true"
          jsonType.label: String
          multivalued: "true"
          user.attribute: foo
        consentRequired: false
        id: 4314b495-934a-4948-b9ae-fc9c17354cf0
        name: groups
        protocol: openid-connect
        protocolMapper: oidc-usermodel-realm-role-mapper
    - attributes:
        display.on.consent.screen: "true"
        include.in.token.scope: "true"
      id: 710757d5-c717-44de-ad25-2133cf75b0a6
      name: nameandterms
      protocol: openid-connect
    - attributes:
        display.on.consent.screen: "true"
        include.in.token.scope: "true"
      id: 1d8a366c-3fae-4134-b58a-4ed5dc3b0022
      name: api.console
      protocol: openid-connect
    - attributes:
        consent.screen.text: ${addressScopeConsentText}
        display.on.consent.screen: "true"
        include.in.token.scope: "true"
      description: 'OpenID Connect built-in scope: address'
      id: b4120472-4f73-4659-ae6b-d24bd45c4fa3
      name: address
      protocol: openid-connect
      protocolMappers:
      - config:
          access.token.claim: "true"
          id.token.claim: "true"
          user.attribute.country: country
          user.attribute.formatted: formatted
          user.attribute.locality: locality
          user.attribute.postal_code: postal_code
          user.attribute.region: region
          user.attribute.street: street
          userinfo.token.claim: "true"
        consentRequired: false
        id: 8bf14f81-76b3-4970-9993-a270b52ae28a
        name: address
        protocol: openid-connect
        protocolMapper: oidc-address-mapper
    clients:
    - attributes: {}
      authenticationFlowBindingOverrides: {}
      baseUrl: /realms/redhat-external/account/
      bearerOnly: false
      clientAuthenticatorType: client-secret
      clientId: account
      consentRequired: false
      defaultClientScopes:
      - web-origins
      - acr
      - profile
      - roles
      - email
      directAccessGrantsEnabled: false
      enabled: true
      frontchannelLogout: false
      fullScopeAllowed: false
      id: 5ed7caf5-67b3-4fc9-9da4-aaee30a9b591
      implicitFlowEnabled: false
      name: ${client_account}
      nodeReRegistrationTimeout: 0
      notBefore: 0
      optionalClientScopes:
      - address
      - phone
      - offline_access
      - microprofile-jwt
      protocol: openid-connect
      publicClient: true
      redirectUris:
      - /realms/redhat-external/account/*
      rootUrl: ${authBaseUrl}
      serviceAccountsEnabled: false
      standardFlowEnabled: true
      surrogateAuthRequired: false
      webOrigins: []
    - attributes:
        pkce.code.challenge.method: S256
      authenticationFlowBindingOverrides: {}
      baseUrl: /realms/redhat-external/account/
      bearerOnly: false
      clientAuthenticatorType: client-secret
      clientId: account-console
      consentRequired: false
      defaultClientScopes:
      - web-origins
      - acr
      - profile
      - roles
      - email
      directAccessGrantsEnabled: false
      enabled: true
      frontchannelLogout: false
      fullScopeAllowed: false
      id: 664b265b-5730-4e51-aee1-fa1aa9427323
      implicitFlowEnabled: false
      name: ${client_account-console}
      nodeReRegistrationTimeout: 0
      notBefore: 0
      optionalClientScopes:
      - address
      - phone
      - offline_access
      - microprofile-jwt
      protocol: openid-connect
      protocolMappers:
      - config: {}
        consentRequired: false
        id: fab196f4-8200-41eb-8d63-173256763e71
        name: audience resolve
        protocol: openid-connect
        protocolMapper: oidc-audience-resolve-mapper
      publicClient: true
      redirectUris:
      - /realms/redhat-external/account/*
      rootUrl: ${authBaseUrl}
      serviceAccountsEnabled: false
      standardFlowEnabled: true
      surrogateAuthRequired: false
      webOrigins: []
    - attributes: {}
      authenticationFlowBindingOverrides: {}
      bearerOnly: false
      clientAuthenticatorType: client-secret
      clientId: admin-cli
      consentRequired: false
      defaultClientScopes:
      - web-origins
      - acr
      - profile
      - roles
      - email
      directAccessGrantsEnabled: true
      enabled: true
      frontchannelLogout: false
      fullScopeAllowed: false
      id: 617194f2-e0ff-4ee1-9fb1-15bed4fa4a77
      implicitFlowEnabled: false
      name: ${client_admin-cli}
      nodeReRegistrationTimeout: 0
      notBefore: 0
      optionalClientScopes:
      - address
      - phone
      - offline_access
      - microprofile-jwt
      protocol: openid-connect
      publicClient: true
      redirectUris: []
      serviceAccountsEnabled: false
      standardFlowEnabled: false
      surrogateAuthRequired: false
      webOrigins: []
    - attributes: {}
      authenticationFlowBindingOverrides: {}
      bearerOnly: true
      clientAuthenticatorType: client-secret
      clientId: broker
      consentRequired: false
      defaultClientScopes:
      - web-origins
      - acr
      - profile
      - roles
      - email
      directAccessGrantsEnabled: false
      enabled: true
      frontchannelLogout: false
      fullScopeAllowed: false
      id: 6dec4db5-3920-4e47-b671-e7cfeb915e96
      implicitFlowEnabled: false
      name: ${client_broker}
      nodeReRegistrationTimeout: 0
      notBefore: 0
      optionalClientScopes:
      - address
      - phone
      - offline_access
      - microprofile-jwt
      protocol: openid-connect
      publicClient: false
      redirectUris: []
      serviceAccountsEnabled: false
      standardFlowEnabled: true
      surrogateAuthRequired: false
      webOrigins: []
    - attributes:
        acr.loa.map: '{}'
        backchannel.logout.revoke.offline.tokens: "false"
        backchannel.logout.session.required: "true"
        client_credentials.use_refresh_token: "false"
        display.on.consent.screen: "false"
        exclude.session.state.from.auth.response: "false"
        frontchannel.logout.session.required: "false"
        id.token.as.detached.signature: "false"
        oauth2.device.authorization.grant.enabled: "false"
        oidc.ciba.grant.enabled: "false"
        require.pushed.authorization.requests: "false"
        saml.allow.ecp.flow: "false"
        saml.artifact.binding: "false"
        saml.assertion.signature: "false"
        saml.authnstatement: "false"
        saml.client.signature: "false"
        saml.encrypt: "false"
        saml.force.post.binding: "false"
        saml.multivalued.roles: "false"
        saml.onetimeuse.condition: "false"
        saml.server.signature: "false"
        saml.server.signature.keyinfo.ext: "false"
        saml_force_name_id_format: "false"
        tls.client.certificate.bound.access.tokens: "false"
        token.response.type.bearer.lower-case: "false"
        use.refresh.tokens: "true"
      authenticationFlowBindingOverrides: {}
      bearerOnly: false
      clientAuthenticatorType: client-secret
      clientId: cloud-services
      consentRequired: false
      defaultClientScopes:
      - web-origins
      - acr
      - nameandterms
      - profile
      - roles
      - email
      - api.console
      directAccessGrantsEnabled: true
      enabled: true
      frontchannelLogout: false
      fullScopeAllowed: true
      id: 9a5018a7-5f92-40c9-b8f1-63f53bc32a68
      implicitFlowEnabled: false
      name: cloud-services
      nodeReRegistrationTimeout: -1
      notBefore: 0
      optionalClientScopes:
      - address
      - phone
      - profile_level.name_and_dev_terms
      - offline_access
      - microprofile-jwt
      protocol: openid-connect
      publicClient: true
      redirectUris:
      - '*'
      serviceAccountsEnabled: false
      standardFlowEnabled: true
      surrogateAuthRequired: false
      webOrigins:
      - '*'
    - attributes: {}
      authenticationFlowBindingOverrides: {}
      bearerOnly: true
      clientAuthenticatorType: client-secret
      clientId: realm-management
      consentRequired: false
      defaultClientScopes:
      - web-origins
      - acr
      - profile
      - roles
      - email
      directAccessGrantsEnabled: false
      enabled: true
      frontchannelLogout: false
      fullScopeAllowed: false
      id: 1a447574-fcac-48e6-a70a-ca4fd5de7f91
      implicitFlowEnabled: false
      name: ${client_realm-management}
      nodeReRegistrationTimeout: 0
      notBefore: 0
      optionalClientScopes:
      - address
      - phone
      - offline_access
      - microprofile-jwt
      protocol: openid-connect
      publicClient: false
      redirectUris: []
      serviceAccountsEnabled: false
      standardFlowEnabled: true
      surrogateAuthRequired: false
      webOrigins: []
    - attributes:
        pkce.code.challenge.method: S256
      authenticationFlowBindingOverrides: {}
      baseUrl: /admin/redhat-external/console/
      bearerOnly: false
      clientAuthenticatorType: client-secret
      clientId: security-admin-console
      consentRequired: false
      defaultClientScopes:
      - web-origins
      - acr
      - profile
      - roles
      - email
      directAccessGrantsEnabled: false
      enabled: true
      frontchannelLogout: false
      fullScopeAllowed: false
      id: 50b949b2-3b56-4cc1-a8b6-90951a6ad9c6
      implicitFlowEnabled: false
      name: ${client_security-admin-console}
      nodeReRegistrationTimeout: 0
      notBefore: 0
      optionalClientScopes:
      - address
      - phone
      - offline_access
      - microprofile-jwt
      protocol: openid-connect
      protocolMappers:
      - config:
          access.token.claim: "true"
          claim.name: locale
          id.token.claim: "true"
          jsonType.label: String
          user.attribute: locale
          userinfo.token.claim: "true"
        consentRequired: false
        id: f0d04249-2f8f-4069-8566-4f3aa35e7690
        name: locale
        protocol: openid-connect
        protocolMapper: oidc-usermodel-attribute-mapper
      publicClient: true
      redirectUris:
      - /admin/redhat-external/console/*
      rootUrl: ${authAdminUrl}
      serviceAccountsEnabled: false
      standardFlowEnabled: true
      surrogateAuthRequired: false
      webOrigins:
      - +
    defaultDefaultClientScopes:
    - role_list
    - profile
    - email
    - roles
    - web-origins
    - acr
    - api.console
    defaultRole:
      clientRole: false
      composite: true
      containerId: hac-sso
      description: ${role_default-roles}
      id: a8d38f0f-7d83-41b7-8236-55998c531760
      name: default-roles-redhat-external
    displayName: Redhat External for HAC
    duplicateEmailsAllowed: false
    editUsernameAllowed: false
    enabled: true
    enabledEventTypes: []
    eventsEnabled: false
    eventsListeners:
    - jboss-logging
    failureFactor: 30
    id: hac-sso
    identityProviderMappers: []
    identityProviders: []
    internationalizationEnabled: false
    loginTheme: rh-sso
    loginWithEmailAllowed: true
    maxDeltaTimeSeconds: 43200
    maxFailureWaitSeconds: 900
    minimumQuickLoginWaitSeconds: 60
    otpPolicyAlgorithm: HmacSHA1
    otpPolicyDigits: 6
    otpPolicyInitialCounter: 0
    otpPolicyLookAheadWindow: 1
    otpPolicyPeriod: 30
    otpPolicyType: totp
    otpSupportedApplications:
    - FreeOTP
    - Google Authenticator
    permanentLockout: false
    quickLoginCheckMilliSeconds: 1000
    realm: redhat-external
    registrationAllowed: false
    registrationEmailAsUsername: false
    rememberMe: false
    resetPasswordAllowed: false
    roles:
      client:
        account:
        - attributes: {}
          clientRole: true
          composite: true
          composites:
            client:
              account:
              - manage-account-links
          containerId: 5ed7caf5-67b3-4fc9-9da4-aaee30a9b591
          description: ${role_manage-account}
          id: 62cc2451-60f3-4420-ab11-106280ea5127
          name: manage-account
        - attributes: {}
          clientRole: true
          composite: false
          containerId: 5ed7caf5-67b3-4fc9-9da4-aaee30a9b591
          description: ${role_delete-account}
          id: 8a7a5a05-e697-445e-8dee-122227311297
          name: delete-account
        - attributes: {}
          clientRole: true
          composite: false
          containerId: 5ed7caf5-67b3-4fc9-9da4-aaee30a9b591
          description: ${role_view-consent}
          id: aae2d09f-6aed-476e-93fa-68e0604bb6ac
          name: view-consent
        - attributes: {}
          clientRole: true
          composite: false
          containerId: 5ed7caf5-67b3-4fc9-9da4-aaee30a9b591
          description: ${role_view-applications}
          id: 79c590ab-dada-4ef0-bfa1-8c85d35e7d84
          name: view-applications
        - attributes: {}
          clientRole: true
          composite: true
          composites:
            client:
              account:
              - view-consent
          containerId: 5ed7caf5-67b3-4fc9-9da4-aaee30a9b591
          description: ${role_manage-consent}
          id: 7da35324-12d5-44e5-9c6a-9f1c1a2dccd0
          name: manage-consent
        - attributes: {}
          clientRole: true
          composite: false
          containerId: 5ed7caf5-67b3-4fc9-9da4-aaee30a9b591
          description: ${role_manage-account-links}
          id: 09d2dc7b-e18e-49a5-ae06-0f01cfa876b8
          name: manage-account-links
        - attributes: {}
          clientRole: true
          composite: false
          containerId: 5ed7caf5-67b3-4fc9-9da4-aaee30a9b591
          description: ${role_view-profile}
          id: 3b5813d3-3ecb-489b-8bc8-38288b2c898a
          name: view-profile
        account-console: []
        admin-cli: []
        broker:
        - attributes: {}
          clientRole: true
          composite: false
          containerId: 6dec4db5-3920-4e47-b671-e7cfeb915e96
          description: ${role_read-token}
          id: 9b3c893f-3860-46d7-82c6-4e6066380871
          name: read-token
        cloud-services: []
        realm-management:
        - attributes: {}
          clientRole: true
          composite: false
          containerId: 1a447574-fcac-48e6-a70a-ca4fd5de7f91
          description: ${role_manage-identity-providers}
          id: 47a7732c-f371-4cc1-935d-1c517614eb74
          name: manage-identity-providers
        - attributes: {}
          clientRole: true
          composite: false
          containerId: 1a447574-fcac-48e6-a70a-ca4fd5de7f91
          description: ${role_view-events}
          id: 92dac8f6-33df-4375-8d47-302065b0c47c
          name: view-events
        - attributes: {}
          clientRole: true
          composite: true
          composites:
            client:
              realm-management:
              - query-groups
              - query-users
          containerId: 1a447574-fcac-48e6-a70a-ca4fd5de7f91
          description: ${role_view-users}
          id: c5cd8e35-13cf-4d17-9002-33bc7049ed49
          name: view-users
        - attributes: {}
          clientRole: true
          composite: false
          containerId: 1a447574-fcac-48e6-a70a-ca4fd5de7f91
          description: ${role_manage-authorization}
          id: d7d79f8e-a86a-4437-9ef6-c27b086ff005
          name: manage-authorization
        - attributes: {}
          clientRole: true
          composite: true
          composites:
            client:
              realm-management:
              - query-clients
          containerId: 1a447574-fcac-48e6-a70a-ca4fd5de7f91
          description: ${role_view-clients}
          id: 3b31e4a3-a4b9-404e-a416-e559f59a18d5
          name: view-clients
        - attributes: {}
          clientRole: true
          composite: false
          containerId: 1a447574-fcac-48e6-a70a-ca4fd5de7f91
          description: ${role_impersonation}
          id: 8a5e47b0-f5cc-4f42-a4c0-7cf61107cfca
          name: impersonation
        - attributes: {}
          clientRole: true
          composite: false
          containerId: 1a447574-fcac-48e6-a70a-ca4fd5de7f91
          description: ${role_create-client}
          id: 5f7b54ef-f854-42f3-95bd-a9ea962fb629
          name: create-client
        - attributes: {}
          clientRole: true
          composite: false
          containerId: 1a447574-fcac-48e6-a70a-ca4fd5de7f91
          description: ${role_query-clients}
          id: 3b687d3d-8229-4fd5-8cdd-0aee6d4bf8ca
          name: query-clients
        - attributes: {}
          clientRole: true
          composite: false
          containerId: 1a447574-fcac-48e6-a70a-ca4fd5de7f91
          description: ${role_manage-realm}
          id: 6c5fce09-33e2-40b6-823e-dcf644fa6053
          name: manage-realm
        - attributes: {}
          clientRole: true
          composite: false
          containerId: 1a447574-fcac-48e6-a70a-ca4fd5de7f91
          description: ${role_query-users}
          id: afaf3f99-7750-4c6a-bca6-b35b26d2f8ff
          name: query-users
        - attributes: {}
          clientRole: true
          composite: false
          containerId: 1a447574-fcac-48e6-a70a-ca4fd5de7f91
          description: ${role_manage-clients}
          id: 59cf3bbe-6c5a-4401-a996-9116d71d35f4
          name: manage-clients
        - attributes: {}
          clientRole: true
          composite: false
          containerId: 1a447574-fcac-48e6-a70a-ca4fd5de7f91
          description: ${role_manage-users}
          id: 03361fc0-ff06-4d09-ab1f-ab900fe4d57b
          name: manage-users
        - attributes: {}
          clientRole: true
          composite: false
          containerId: 1a447574-fcac-48e6-a70a-ca4fd5de7f91
          description: ${role_query-groups}
          id: b1b19c8d-fd64-4960-a409-dafc455d504e
          name: query-groups
        - attributes: {}
          clientRole: true
          composite: true
          composites:
            client:
              realm-management:
              - manage-identity-providers
              - view-events
              - view-users
              - view-clients
              - manage-authorization
              - impersonation
              - create-client
              - query-clients
              - manage-realm
              - query-users
              - manage-clients
              - manage-users
              - query-groups
              - view-realm
              - query-realms
              - view-identity-providers
              - view-authorization
              - manage-events
          containerId: 1a447574-fcac-48e6-a70a-ca4fd5de7f91
          description: ${role_realm-admin}
          id: 3ea88ffd-28a4-423c-8fb4-f832f610b2dc
          name: realm-admin
        - attributes: {}
          clientRole: true
          composite: false
          containerId: 1a447574-fcac-48e6-a70a-ca4fd5de7f91
          description: ${role_view-realm}
          id: 71a4d66d-50bc-4ef3-8da8-36f31c7b6b3e
          name: view-realm
        - attributes: {}
          clientRole: true
          composite: false
          containerId: 1a447574-fcac-48e6-a70a-ca4fd5de7f91
          description: ${role_query-realms}
          id: ce2a40fc-5fd5-4735-b0dd-b5d707dd5ee2
          name: query-realms
        - attributes: {}
          clientRole: true
          composite: false
          containerId: 1a447574-fcac-48e6-a70a-ca4fd5de7f91
          description: ${role_view-identity-providers}
          id: e1403844-fc62-4522-8181-64a0395a9608
          name: view-identity-providers
        - attributes: {}
          clientRole: true
          composite: false
          containerId: 1a447574-fcac-48e6-a70a-ca4fd5de7f91
          description: ${role_manage-events}
          id: 76acc1f2-7d2b-40f2-af4d-a3dff5403470
          name: manage-events
        - attributes: {}
          clientRole: true
          composite: false
          containerId: 1a447574-fcac-48e6-a70a-ca4fd5de7f91
          description: ${role_view-authorization}
          id: 1bab32ce-418a-4779-875a-aa550bc5720e
          name: view-authorization
        security-admin-console: []
      realm:
      - attributes: {}
        clientRole: false
        composite: true
        composites:
          client:
            account:
            - manage-account
            - view-profile
          realm:
          - offline_access
          - uma_authorization
        containerId: hac-sso
        description: ${role_default-roles}
        id: a8d38f0f-7d83-41b7-8236-55998c531760
        name: default-roles-redhat-external
      - attributes: {}
        clientRole: false
        composite: false
        containerId: hac-sso
        description: ${role_uma_authorization}
        id: 4c73ed54-7750-4045-9c3b-8f43b05b0cb4
        name: uma_authorization
      - attributes: {}
        clientRole: false
        composite: false
        containerId: hac-sso
        description: ${role_offline-access}
        id: 18e6ca8a-034d-428a-a0f6-3e5824c74d67
        name: offline_access
    scopeMappings:
    - clientScope: offline_access
      roles:
      - offline_access
    smtpServer: {}
    sslRequired: external
    supportedLocales: []
    userManagedAccessAllowed: false
    users:
    - clientRoles:
        realm-management:
        - manage-users
      credentials:
      - type: password
        value: user2
      email: user1@user.us
      emailVerified: true
      enabled: true
      firstName: user1
      id: user1
      username: user1
    - clientRoles:
        realm-management:
        - manage-users
      credentials:
      - type: password
        value: e2e-hac-user2
      email: e2e-hac-user@user.us
      emailVerified: true
      enabled: true
      firstName: e2e-hac-user
      id: e2e-hac-user
      username: e2e-hac-user
    verifyEmail: false
    waitIncrementSeconds: 60
---
apiVersion: operators.coreos.com/v1
kind: OperatorGroup
metadata:
  annotations:
    argocd.argoproj.io/sync-options: SkipDryRunOnMissingResource=true
  name: keycloak-operatorgroup
spec:
  targetNamespaces:
  - dev-sso
---
apiVersion: operators.coreos.com/v1alpha1
kind: Subscription
metadata:
  annotations:
    argocd.argoproj.io/sync-options: SkipDryRunOnMissingResource=true
  name: dev-sso
spec:
  channel: stable
  installPlanApproval: Automatic
  name: rhsso-operator
  source: redhat-operators
  sourceNamespace: openshift-marketplace
